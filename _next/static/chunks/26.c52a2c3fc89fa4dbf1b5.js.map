{"version":3,"sources":["webpack://_N_E/./node_modules/pako/index.js","webpack://_N_E/./node_modules/morphoviewer/es/morphoviewer.js","webpack://_N_E/./node_modules/pako/lib/zlib/crc32.js","webpack://_N_E/./node_modules/pako/lib/zlib/trees.js","webpack://_N_E/./node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://_N_E/./node_modules/pako/lib/zlib/constants.js","webpack://_N_E/./src/components/NeuronMorphology/withFixedFocusOnMorphology.ts","webpack://_N_E/./src/components/NeuronMorphology/libs/dom.ts","webpack://_N_E/./src/components/NeuronMorphology/libs/text.ts","webpack://_N_E/./src/components/NeuronMorphology/libs/OrientationViewer.ts","webpack://_N_E/./node_modules/d3-array/src/max.js","webpack://_N_E/./node_modules/d3-array/src/min.js","webpack://_N_E/./node_modules/d3-axis/src/array.js","webpack://_N_E/./node_modules/d3-axis/src/identity.js","webpack://_N_E/./node_modules/d3-axis/src/axis.js","webpack://_N_E/./node_modules/d3-dispatch/src/dispatch.js","webpack://_N_E/./node_modules/d3-selection/src/selector.js","webpack://_N_E/./node_modules/d3-selection/src/array.js","webpack://_N_E/./node_modules/d3-selection/src/selectorAll.js","webpack://_N_E/./node_modules/d3-selection/src/selection/selectAll.js","webpack://_N_E/./node_modules/d3-selection/src/matcher.js","webpack://_N_E/./node_modules/d3-selection/src/selection/selectChild.js","webpack://_N_E/./node_modules/d3-selection/src/selection/selectChildren.js","webpack://_N_E/./node_modules/d3-selection/src/selection/sparse.js","webpack://_N_E/./node_modules/d3-selection/src/selection/enter.js","webpack://_N_E/./node_modules/d3-selection/src/constant.js","webpack://_N_E/./node_modules/d3-selection/src/selection/data.js","webpack://_N_E/./node_modules/d3-selection/src/selection/sort.js","webpack://_N_E/./node_modules/d3-selection/src/selection/call.js","webpack://_N_E/./node_modules/d3-selection/src/namespaces.js","webpack://_N_E/./node_modules/d3-selection/src/namespace.js","webpack://_N_E/./node_modules/d3-selection/src/selection/attr.js","webpack://_N_E/./node_modules/d3-selection/src/window.js","webpack://_N_E/./node_modules/d3-selection/src/selection/style.js","webpack://_N_E/./node_modules/d3-selection/src/selection/property.js","webpack://_N_E/./node_modules/d3-selection/src/selection/classed.js","webpack://_N_E/./node_modules/d3-selection/src/selection/text.js","webpack://_N_E/./node_modules/d3-selection/src/selection/html.js","webpack://_N_E/./node_modules/d3-selection/src/selection/raise.js","webpack://_N_E/./node_modules/d3-selection/src/selection/lower.js","webpack://_N_E/./node_modules/d3-selection/src/creator.js","webpack://_N_E/./node_modules/d3-selection/src/selection/insert.js","webpack://_N_E/./node_modules/d3-selection/src/selection/remove.js","webpack://_N_E/./node_modules/d3-selection/src/selection/clone.js","webpack://_N_E/./node_modules/d3-selection/src/selection/on.js","webpack://_N_E/./node_modules/d3-selection/src/selection/dispatch.js","webpack://_N_E/./node_modules/d3-selection/src/selection/index.js","webpack://_N_E/./node_modules/d3-selection/src/selection/select.js","webpack://_N_E/./node_modules/d3-selection/src/selection/filter.js","webpack://_N_E/./node_modules/d3-selection/src/selection/exit.js","webpack://_N_E/./node_modules/d3-selection/src/selection/join.js","webpack://_N_E/./node_modules/d3-selection/src/selection/merge.js","webpack://_N_E/./node_modules/d3-selection/src/selection/order.js","webpack://_N_E/./node_modules/d3-selection/src/selection/nodes.js","webpack://_N_E/./node_modules/d3-selection/src/selection/node.js","webpack://_N_E/./node_modules/d3-selection/src/selection/size.js","webpack://_N_E/./node_modules/d3-selection/src/selection/empty.js","webpack://_N_E/./node_modules/d3-selection/src/selection/each.js","webpack://_N_E/./node_modules/d3-selection/src/selection/append.js","webpack://_N_E/./node_modules/d3-selection/src/selection/datum.js","webpack://_N_E/./node_modules/d3-selection/src/selection/iterator.js","webpack://_N_E/./node_modules/d3-selection/src/select.js","webpack://_N_E/./node_modules/d3-color/src/define.js","webpack://_N_E/./node_modules/d3-color/src/color.js","webpack://_N_E/./node_modules/d3-interpolate/src/basis.js","webpack://_N_E/./node_modules/d3-interpolate/src/constant.js","webpack://_N_E/./node_modules/d3-interpolate/src/color.js","webpack://_N_E/./node_modules/d3-interpolate/src/rgb.js","webpack://_N_E/./node_modules/d3-interpolate/src/basisClosed.js","webpack://_N_E/./node_modules/d3-interpolate/src/numberArray.js","webpack://_N_E/./node_modules/d3-interpolate/src/array.js","webpack://_N_E/./node_modules/d3-interpolate/src/date.js","webpack://_N_E/./node_modules/d3-interpolate/src/number.js","webpack://_N_E/./node_modules/d3-interpolate/src/object.js","webpack://_N_E/./node_modules/d3-interpolate/src/string.js","webpack://_N_E/./node_modules/d3-timer/src/timer.js","webpack://_N_E/./node_modules/d3-interpolate/src/value.js","webpack://_N_E/./node_modules/d3-timer/src/timeout.js","webpack://_N_E/./node_modules/d3-transition/src/transition/schedule.js","webpack://_N_E/./node_modules/d3-transition/src/interrupt.js","webpack://_N_E/./node_modules/d3-interpolate/src/transform/parse.js","webpack://_N_E/./node_modules/d3-interpolate/src/transform/decompose.js","webpack://_N_E/./node_modules/d3-interpolate/src/transform/index.js","webpack://_N_E/./node_modules/d3-transition/src/transition/tween.js","webpack://_N_E/./node_modules/d3-transition/src/transition/interpolate.js","webpack://_N_E/./node_modules/d3-transition/src/transition/attr.js","webpack://_N_E/./node_modules/d3-transition/src/transition/attrTween.js","webpack://_N_E/./node_modules/d3-transition/src/transition/delay.js","webpack://_N_E/./node_modules/d3-transition/src/transition/duration.js","webpack://_N_E/./node_modules/d3-transition/src/transition/ease.js","webpack://_N_E/./node_modules/d3-transition/src/transition/on.js","webpack://_N_E/./node_modules/d3-transition/src/transition/remove.js","webpack://_N_E/./node_modules/d3-transition/src/transition/selection.js","webpack://_N_E/./node_modules/d3-transition/src/transition/style.js","webpack://_N_E/./node_modules/d3-transition/src/transition/styleTween.js","webpack://_N_E/./node_modules/d3-transition/src/transition/textTween.js","webpack://_N_E/./node_modules/d3-transition/src/transition/index.js","webpack://_N_E/./node_modules/d3-transition/src/transition/select.js","webpack://_N_E/./node_modules/d3-transition/src/transition/selectAll.js","webpack://_N_E/./node_modules/d3-transition/src/transition/filter.js","webpack://_N_E/./node_modules/d3-transition/src/transition/merge.js","webpack://_N_E/./node_modules/d3-transition/src/transition/transition.js","webpack://_N_E/./node_modules/d3-transition/src/transition/text.js","webpack://_N_E/./node_modules/d3-transition/src/transition/easeVarying.js","webpack://_N_E/./node_modules/d3-transition/src/transition/end.js","webpack://_N_E/./node_modules/d3-transition/src/selection/transition.js","webpack://_N_E/./node_modules/d3-ease/src/cubic.js","webpack://_N_E/./node_modules/d3-transition/src/selection/index.js","webpack://_N_E/./node_modules/d3-transition/src/selection/interrupt.js","webpack://_N_E/./node_modules/d3-brush/src/brush.js","webpack://_N_E/./node_modules/d3-array/src/ticks.js","webpack://_N_E/./node_modules/d3-array/src/ascending.js","webpack://_N_E/./node_modules/d3-array/src/bisector.js","webpack://_N_E/./node_modules/d3-array/src/bisect.js","webpack://_N_E/./node_modules/d3-array/src/number.js","webpack://_N_E/./node_modules/d3-interpolate/src/round.js","webpack://_N_E/./node_modules/d3-scale/src/number.js","webpack://_N_E/./node_modules/d3-scale/src/continuous.js","webpack://_N_E/./node_modules/d3-scale/src/constant.js","webpack://_N_E/./node_modules/d3-scale/src/init.js","webpack://_N_E/./node_modules/d3-format/src/formatSpecifier.js","webpack://_N_E/./node_modules/d3-format/src/formatDecimal.js","webpack://_N_E/./node_modules/d3-format/src/exponent.js","webpack://_N_E/./node_modules/d3-format/src/formatPrefixAuto.js","webpack://_N_E/./node_modules/d3-format/src/defaultLocale.js","webpack://_N_E/./node_modules/d3-format/src/formatRounded.js","webpack://_N_E/./node_modules/d3-format/src/formatTypes.js","webpack://_N_E/./node_modules/d3-format/src/identity.js","webpack://_N_E/./node_modules/d3-format/src/locale.js","webpack://_N_E/./node_modules/d3-format/src/formatGroup.js","webpack://_N_E/./node_modules/d3-format/src/formatNumerals.js","webpack://_N_E/./node_modules/d3-format/src/formatTrim.js","webpack://_N_E/./node_modules/d3-scale/src/tickFormat.js","webpack://_N_E/./node_modules/d3-format/src/precisionPrefix.js","webpack://_N_E/./node_modules/d3-format/src/precisionRound.js","webpack://_N_E/./node_modules/d3-format/src/precisionFixed.js","webpack://_N_E/./node_modules/d3-scale/src/linear.js","webpack://_N_E/./node_modules/d3-interpolate/src/zoom.js","webpack://_N_E/./node_modules/d3-zoom/src/transform.js","webpack://_N_E/./node_modules/d3-zoom/src/zoom.js","webpack://_N_E/./src/components/NeuronMorphology/libs/ScaleViewer.ts","webpack://_N_E/./src/components/NeuronMorphology/MorphoLegend.tsx","webpack://_N_E/./src/components/NeuronMorphology/MorphologyViewer.tsx","webpack://_N_E/./src/components/NeuronMorphology/MorphoWrapper.tsx","webpack://_N_E/./src/components/NeuronMorphology/MorphoViewerContainer.tsx","webpack://_N_E/./node_modules/parse-wavefront-obj/index.js","webpack://_N_E/./node_modules/pako/lib/deflate.js","webpack://_N_E/./node_modules/pako/lib/zlib/messages.js","webpack://_N_E/./node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://_N_E/./node_modules/pako/lib/zlib/inftrees.js","webpack://_N_E/./node_modules/pako/lib/inflate.js","webpack://_N_E/./node_modules/pako/lib/utils/strings.js","webpack://_N_E/./node_modules/pako/lib/zlib/inffast.js","webpack://_N_E/./node_modules/pako/lib/zlib/gzheader.js","webpack://_N_E/./node_modules/pako/lib/zlib/zstream.js","webpack://_N_E/./node_modules/swcmorphologyparser/es/swcmorphologyparser.js","webpack://_N_E/./node_modules/pako/lib/zlib/inflate.js","webpack://_N_E/./node_modules/pako/lib/zlib/deflate.js","webpack://_N_E/./node_modules/morphologycorejs/es/morphologycorejs.js","webpack://_N_E/./node_modules/pako/lib/utils/common.js","webpack://_N_E/./node_modules/pako/lib/zlib/adler32.js"],"names":["pako","assign","module","exports","TrackballControls","object","domElement","_this","this","STATE","undefined","document","enabled","screen","left","top","width","height","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","Infinity","keys","target","lastPosition","_state","_prevState","_eye","_movePrev","_moveCurr","_lastAxis","_lastAngle","_zoomStart","_zoomEnd","_touchZoomDistanceStart","_touchZoomDistanceEnd","_panStart","_panEnd","target0","clone","position0","position","up0","up","changeEvent","type","startEvent","endEvent","handleResize","window","innerWidth","innerHeight","box","getBoundingClientRect","d","ownerDocument","documentElement","pageXOffset","clientLeft","pageYOffset","clientTop","getMouseOnScreen","vector","pageX","pageY","set","getMouseOnCircle","keydown","event","removeEventListener","keyCode","keyup","addEventListener","mousedown","preventDefault","stopPropagation","button","copy","mousemove","mouseup","dispatchEvent","mousewheel","deltaMode","y","deltaY","touchstart","touches","length","dx","dy","Math","sqrt","x","touchmove","touchend","contextmenu","rotateCamera","axis","quaternion","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","angle","sub","normalize","crossVectors","setLength","add","setFromAxisAngle","applyQuaternion","zoomCamera","factor","multiplyScalar","panCamera","mouseChange","objectUp","pan","lengthSq","cross","subVectors","checkDistances","addVectors","update","lookAt","distanceToSquared","reset","dispose","prototype","Object","create","STLLoader","manager","constructor","url","onLoad","onProgress","onError","scope","loader","setResponseType","load","buf","inflate","buffer","err","parse","exception","data","matchDataViewAt","query","reader","offset","i","il","getUint8","binData","array_buffer","Uint8Array","charCodeAt","ensureBinary","expect","face_size","n_faces","DataView","getUint32","byteLength","solid","off","isBinary","faces","r","g","b","colors","defaultR","defaultG","defaultB","alpha","hasColors","index","geometry","vertices","normals","face","start","normalX","getFloat32","normalY","normalZ","packedColor","getUint16","vertexstart","push","addAttribute","Float32Array","parseBinary","patternFace","faceCounter","patternFloat","source","patternVertex","RegExp","patternNormal","normal","result","exec","vertexCountPerFace","normalCountPerFace","text","parseFloat","z","console","error","parseASCII","decodeText","Tools","optionObj","optionName","optionDefaultValue","vStart","vEnd","rStart","rEnd","openEnd","HALF_PI","PI","distance","distanceTo","divideScalar","offsetPosition","setPosition","cylinder","orientation","multiply","offsetRotation","makeRotationX","applyMatrix","strData","filename","link","createElement","body","appendChild","download","href","click","removeChild","DEFAULT_FOCUS_DISTANCE","ThreeContext","_events","eventName","callback","warn","args","events","divObj","super","that","_requestFrameId","_morphologyMeshCollection","_meshCollection","_camera","clientWidth","clientHeight","_scene","light1","_renderer","antialias","preserveDrawingBuffer","setClearColor","setPixelRatio","devicePixelRatio","setSize","gammaInput","gammaOutput","_raycaster","_raycastMouse","rect","relX","clientX","relY","clientY","_performRaycast","_controls","_render","bind","aspect","updateProjectionMatrix","_testObjMesh","_animate","fov","options","name","getOption","round","random","toString","focusOn","material","_buildMeshMaterialFromOptions","computeBoundingSphere","mesh","userData","focusOnMesh","onDone","color","floor","opacity","wireframe","shininess","doubleSide","specular","side","transparent","objStr","meshData","verticesPerPolygon","cells","indices","Uint32Array","positions","newIndex","ii","p","setIndex","computeVertexNormals","rotateX","rotateY","requestAnimationFrame","render","setFromCamera","intersects","intersectObjects","children","sectionMesh","sectionId","morphologyObj","parent","getMorphology","emit","_sections","morphoMesh","focusDistance","focusOnMorphology","morphoName","allNames","targetPoint","getTargetPoint","boundingSphere","center","radius","toDataURL","visible","cancelAnimationFrame","remove","QuickHull","tolerance","newFaces","assigned","VertexList","unassigned","Face","midpoint","area","constant","outside","mark","edge","HalfEdge","vertex","prev","next","twin","VertexNode","point","head","tail","ConvexGeometry","points","call","fromBufferGeometry","ConvexBufferGeometry","mergeVertices","setFromPoints","Array","isArray","makeEmpty","l","compute","updateMatrixWorld","traverse","node","isGeometry","applyMatrix4","matrixWorld","isBufferGeometry","attribute","attributes","count","fromBufferAttribute","append","insertBefore","end","removeSubList","absorbingFace","faceVertices","removeAllVerticesFromFace","appendChain","nextVertex","distanceToPoint","addVertexToFace","isEmpty","first","maxFace","min","max","minVertices","maxVertices","j","getComponent","setComponent","Number","EPSILON","abs","computeInitialHull","line3","plane","closestPoint","extremes","computeExtremes","v0","v1","v2","v3","closestPointToPoint","setFromCoplanarPoints","getEdge","setTwin","activeFaces","eyeVertex","eyeFace","eyePoint","crossEdge","horizon","deleteFaceVertices","twinEdge","oppositeFace","computeHorizon","horizonEdge","firstSideEdge","previousSideEdge","sideEdge","addAdjoiningFace","clear","removeVertexFromFace","addNewFaces","resolveUnassignedPoints","nextVertexToAdd","addVertexToHull","reindexFaces","cleanup","a","c","e0","e1","e2","triangle","getNormal","getMidpoint","getArea","dot","MorphologyShapeBase","morpho","morphologyName","_pointToTarget","_morpho","_sectionColors","axon","basal_dendrite","apical_dendrite","soma","getSoma","somaPoints","getPoints","log","somaSphere","getRadius","getCenter","centerV","somaMesh","somaPolygonPoints","getNeuriteStarts","map","e","_buildSomaDefault","_buildSomaFromOrphanSections","lookat","applyAxisAngle","MorphologyPolyline","sections","getArrayOfSections","sectionPolyline","_buildSection","somaShape","_buildSoma","setFromObject","section","getTypename","sectionPoints","line","getId","typevalue","getTypevalue","typename","BufferGeometryUtils","uv","array","uvs","nVertices","tangent","tangents","tan1","tan2","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","handleTriangle","fromArray","x1","x2","y1","y2","z1","z2","s1","s2","t1","t2","groups","group","jl","tmp","tmp2","n","n2","w","t","test","handleVertex","v","geometries","useGroups","isIndexed","attributesUsed","Set","morphAttributesUsed","morphAttributes","mergedGeometry","has","mergedUserData","addGroup","indexOffset","mergedIndex","getX","mergedAttribute","mergeBufferAttributes","numMorphTargets","morphAttributesToMerge","mergedMorphAttribute","TypedArray","itemSize","normalized","arrayLength","isInterleavedBufferAttribute","MorphologyPolycylinder","_sectionTubeMaterials","sectionRadius","getRadiuses","parentSection","getParent","startIndex","arrayOfGeom","cyl","makeCylinder","sectionGeom","mergeBufferGeometries","WormBufferGeometry","radii","radialSegments","tubularSegments","frames","computeFrenetFrames","binormals","P","generateSegment","N","B","sin","cos","generateUVs","generateIndices","generateBufferData","pos","p1i","p2i","p1","p2","vec","mat","MAX_VALUE","tx","ty","tz","theta","acos","makeRotationAxis","getSquareDistance","dz","getSquareSegmentDistance","simplify","highestQuality","sqTolerance","maxSqDist","sqDist","len","markers","last","stack","newPoints","pop","simplifyDouglasPeucker","prevPoint","simplifyRadialDistance","MorphologyHybrid","_smoothSections","_polylineSections","_polylineSimpleSections","_boundingSphere","neuriteMode","enableMode","_somaFromModel","_buildSomaFromModel","_somaFromOrphanSections","somaMode","enableSomaMode","somaModel","somaCenter","getRadiusFromSoma","sectionSmooth","_buildWormSection","_buildLineSection","sectionSimplePolyline","_buildSimpleLineSection","somaMaterial","somaSphereContainer","filter","s","forEach","radiuses","message","parentIsSoma","concat","slice","arr","simplifiedSection","mode","_neuriteModeName","_createTubularSections","_createPolylineSections","_createSimplifiedSections","_somaModeName","main","MorphoViewer","_threeContext","morphoObj","morphology","Morphology","buildFromRawMorphology","setId","asPolyline","formFactor","addMorphology","addStlToMeshCollection","destroy","getCameraFieldOfView","setCameraFieldOfView","cb","on","imageData","getSnapshotData","triggerDownload","addObjToMeshCollection","showMesh","hideMesh","crcTable","table","k","makeTable","crc","utils","zero","LITERALS","L_CODES","D_CODES","MAX_BITS","extra_lbits","extra_dbits","extra_blbits","bl_order","static_ltree","static_dtree","_dist_code","_length_code","MAX_MATCH","base_length","static_l_desc","static_d_desc","static_bl_desc","base_dist","StaticTreeDesc","static_tree","extra_bits","extra_base","elems","max_length","has_stree","TreeDesc","dyn_tree","stat_desc","max_code","d_code","dist","put_short","pending_buf","pending","send_bits","value","bi_valid","bi_buf","send_code","tree","bi_reverse","code","res","gen_codes","bl_count","bits","next_code","init_block","dyn_ltree","dyn_dtree","bl_tree","END_BLOCK","opt_len","static_len","last_lit","matches","bi_windup","smaller","m","depth","_n2","_m2","pqdownheap","heap","heap_len","compress_block","ltree","dtree","lc","extra","lx","d_buf","l_buf","build_tree","desc","stree","heap_max","h","xbits","f","base","overflow","gen_bitlen","scan_tree","curlen","prevlen","nextlen","max_count","min_count","REP_3_6","REPZ_3_10","REPZ_11_138","send_tree","static_init_done","_tr_stored_block","stored_len","header","arraySet","copy_block","_tr_init","LENGTH_CODES","tr_static_init","l_desc","d_desc","bl_desc","_tr_flush_block","opt_lenb","static_lenb","max_blindex","level","strm","data_type","black_mask","detect_data_type","BL_CODES","build_bl_tree","strategy","lcodes","dcodes","blcodes","rank","send_all_trees","_tr_tally","lit_bufsize","_tr_align","STATIC_TREES","bi_flush","_classCallCheck","instance","Constructor","TypeError","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_SYNC_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_BLOCK","Z_TREES","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_BUF_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","morphoViewer","getMorphoFromCollection","arguments","isInterneuron","find","child","_child$userData","getSomaChildren","getOrphanedSomaChildren","removeOrphanedSomaChildren","orphanedSoma","getTargetPointFromSoma","somaBoundingBox","expandByObject","getCameraHeightAtMorpho","vFOV","tan","fitOffset","size","getSize","maxSize","fitHeightDistance","atan","fitWidthDistance","direction","near","far","rotation","removeChildren","div","lastChild","textProps","_textProps$apparentFo","apparentFontSize","canvas","_textProps$fontSize","fontSize","_textProps$font","font","_textProps$align","align","_textProps$baseline","baseline","_textProps$color","ctx","getContext","measureText","style","textAlign","textBaseline","fillStyle","fillRect","fillText","createTextCanvas","texture","magFilter","needsUpdate","sprite","textObject","scale","OrientationViewer","context","renderer","scene","camera","camPos","orientationHelper","axes","linewidth","axisLabel","labelPosition","_this$renderer","animate","key","followCamera","requestedAnimationFrameID","_this$camera","values","valueof","epsilon","translateX","translateY","number","bandwidth","entering","__axis","orient","tickArguments","tickValues","tickFormat","tickSizeInner","tickSizeOuter","tickPadding","transform","ticks","apply","domain","format","identity","spacing","range","range0","range1","selection","path","selectAll","tick","order","tickExit","exit","tickEnter","enter","attr","select","merge","insert","transition","isFinite","getAttribute","parentNode","each","_","tickSize","axisRight","noop","dispatch","Error","Dispatch","parseTypenames","typenames","types","trim","split","indexOf","hasOwnProperty","get","T","none","selector","querySelector","from","querySelectorAll","childMatcher","childFirst","firstElementChild","EnterNode","datum","namespaceURI","_next","_parent","__data__","bindIndex","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","Map","keyValues","delete","ascending","NaN","xhtml","svg","xlink","xml","xmlns","prefix","namespaces","space","local","attrRemove","removeAttribute","attrRemoveNS","fullname","removeAttributeNS","attrConstant","setAttribute","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","defaultView","styleRemove","removeProperty","styleConstant","priority","setProperty","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","string","classList","ClassList","_node","_names","classedAdd","names","list","classedRemove","classedTrue","classedFalse","classedFunction","join","splice","contains","textRemove","textContent","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","raise","nextSibling","lower","previousSibling","firstChild","creatorInherit","uri","createElementNS","creatorFixed","namespace","constantNull","selection_cloneShallow","cloneNode","selection_cloneDeep","onRemove","__on","o","listener","onAdd","contextListener","params","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","Selection","parents","_groups","_parents","subgroups","subnode","subgroup","arrayAll","selectorAll","selectChild","match","childFind","selectChildren","childrenFilter","matcher","enterGroup","updateGroup","exitGroup","previous","i0","i1","_enter","_exit","sparse","onenter","onupdate","onexit","groups0","groups1","m0","m1","merges","group0","group1","compareDocumentPosition","sort","compareNode","compare","sortgroups","sortgroup","nodes","empty","getAttributeNS","property","classed","html","creator","before","deep","Symbol","iterator","factory","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","toLowerCase","parseInt","rgbn","Rgb","rgba","hsla","rgbConvert","rgb_formatHex","hex","rgb_formatRgb","isNaN","Hsl","hslConvert","hsl2rgb","m2","basis","t3","define","channels","displayable","formatHsl","pow","linear","gamma","nogamma","exponential","rgbGamma","rgbSpline","spline","isNumberArray","ArrayBuffer","isView","genericArray","nb","na","Date","setTime","reA","reB","taskHead","taskTail","am","bm","bs","bi","lastIndex","q","one","date","numberArray","valueOf","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","setFrame","setTimeout","clearNow","Timer","_call","_time","timer","delay","time","restart","wake","timerFlush","t0","sleep","nap","poke","clearTimeout","clearInterval","setInterval","stop","elapsed","emptyOn","emptyTween","schedules","__transition","id","self","tween","schedule","state","duration","ease","timing","init","svgNode","active","degrees","rotate","skewX","scaleX","scaleY","atan2","interpolateTransform","pxComma","pxParen","degParen","xa","ya","xb","yb","translate","interpolateTransformCss","DOMMatrix","WebKitCSSMatrix","isIdentity","decompose","interpolateTransformSvg","baseVal","consolidate","matrix","tweenRemove","tween0","tween1","tweenFunction","tweenValue","_id","interpolate","value1","string00","interpolate0","string1","string0","string10","attrInterpolate","attrInterpolateNS","attrTweenNS","_value","attrTween","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","onFunction","on0","on1","sit","every","styleInterpolate","styleTween","textInterpolate","textTween","Transition","_name","newId","selection_prototype","inherit","id0","id1","styleNull","listener0","styleMaybeRemove","easeVarying","Promise","resolve","reject","cancel","interrupt","defaultTiming","number1","number2","e10","e5","tickIncrement","step","power","LN10","delta","lo","hi","mid","ascendingComparator","right","ascendingBisect","bisector","bisectRight","bisect","unit","bimap","d0","d1","r0","r1","polymap","reverse","clamp","unknown","transformer","untransform","piecewise","output","input","rescale","clamper","invert","rangeRound","u","continuous","initRange","re","formatSpecifier","specifier","FormatSpecifier","fill","sign","symbol","comma","precision","formatDecimalParts","toExponential","coefficient","prefixExponent","exponent","toFixed","toLocaleString","replace","toPrecision","formatRounded","toUpperCase","prefixes","locale","grouping","thousands","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","String","percent","minus","nan","newFormat","formatTypes","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","formatTrim","padding","formatPrefix","step0","step1","tickStep","precisionPrefix","precisionRound","precisionFixed","linearish","nice","prestep","maxIter","ceil","cosh","exp","zoom","p0","S","ux0","uy0","w0","ux1","uy1","w1","d2","rho","b0","rho4","rho2","b1","coshr0","sinh","SQRT2","_1","_2","zoomRho","Transform","applyX","applyY","location","invertX","invertY","rescaleX","rescaleY","ScaleViewer","_div","margins","onScaleChange","_ref","hasApproximatedSoma","className","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","morphoviewer","swcmorphologyparser","ref","useRef","orientationRef","scaleRef","_React$useState","useState","_React$useState2","mv","setMorphoViewer","_React$useState3","_React$useState4","orientationViewer","setOrientationViewer","_React$useState5","_React$useState6","scaleViewer","setScaleViewer","useEffect","hasSomaData","setHex","current","swcParser","SwcParser","parsedFile","getRawMorphology","negate","morphoViewerOptions","getOwnPropertyDescriptors","defineProperties","defineProperty","_objectSpread","setFollowCamera","controlEventListenerChangedEvent","_mv$_threeContext","_mv$_threeContext$_co","handleOrientationClick","onClick","loading","onPolylineClick","disabled","_React$useState2$","setData","setOptions","fetch","then","convertIndex","objIndex","str","lines","vertexUVs","vertexNormals","faceUVs","faceNormals","parts","positionIndices","uvIndices","normalIndices","part","zlib_deflate","strings","msg","ZStream","Deflate","method","chunkSize","windowBits","memLevel","to","opt","raw","gzip","ended","chunks","avail_out","status","deflateInit2","deflateSetHeader","dictionary","dict","string2buf","deflateSetDictionary","_dict_set","deflate","deflator","_mode","next_in","avail_in","Buf8","next_out","onEnd","onData","buf2binstring","shrinkBuf","deflateEnd","chunk","flattenChunks","deflateRaw","2","1","0","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","MAXBITS","lbase","lext","dbase","dext","lens","lens_index","codes","table_index","work","opts","incr","low","mask","here_bits","here_op","here_val","root","curr","drop","used","huff","base_index","Buf16","offs","extra_index","zlib_inflate","GZheader","Inflate","inflateInit2","inflateGetHeader","inflateSetDictionary","inflator","next_out_utf8","utf8str","allowBufError","binstring2buf","utf8border","buf2string","inflateEnd","inflateRaw","ungzip","STR_APPLY_OK","STR_APPLY_UIA_OK","fromCharCode","__","_utf8len","subarray","c2","m_pos","str_len","buf_len","c_len","utf16buf","_in","_out","beg","dmax","wsize","whave","wnext","s_window","hold","lcode","dcode","lmask","dmask","here","op","from_source","lencode","distcode","lenbits","distbits","dolen","dodist","sane","xflags","os","extra_len","comment","hcrc","done","total_in","total_out","adler","SWC_TYPES","TreeNode","_type","_position","_radius","_parentId","_children","pNode","_addChild","cNode","doesAlreadyHaveChild","isSoma","nodeList","getChildren","getType","dive","TreeNodeCollection","_nodes","_rawSoma","_rawSections","_rawMorphology","_morphology","_initCollection","_buildSections","_buildMorphologyObjects","somaNodes","aNode","parentId","setParentId","getParentId","setParent","getPosition","currentSectionId","starterNodes","buildRawSection","startingNode","parentSectionId","nextNodes","stackElem","swcStr","rawPoints","extractPoints","treeNodeCollection","aType2Node","swcPoints","row","adler32","crc32","inflate_fast","inflate_table","TYPE","BAD","zswap32","InflateState","wrap","havedict","flags","check","total","wbits","ncode","nlen","ndist","have","lendyn","distdyn","back","was","inflateResetKeep","Buf32","inflateReset","inflateReset2","ret","lenfix","distfix","virgin","fixedtables","updatewindow","src","inflateInit","flush","put","last_bits","last_op","last_val","hbuf","inf_leave","dictLength","inflateInfo","configuration_table","trees","MIN_LOOKAHEAD","HCRC_STATE","BUSY_STATE","FINISH_STATE","errorCode","flush_pending","pending_out","flush_block_only","block_start","strstart","put_byte","putShortMSB","read_buf","longest_match","cur_match","chain_length","max_chain_length","scan","best_len","prev_length","nice_match","limit","w_size","_win","wmask","w_mask","strend","scan_end1","scan_end","good_match","lookahead","match_start","fill_window","more","_w_size","window_size","hash_size","ins_h","hash_shift","hash_mask","deflate_fast","hash_head","bflush","match_length","max_lazy_match","MIN_MATCH","deflate_slow","max_insert","prev_match","match_available","Config","good_length","max_lazy","nice_length","max_chain","func","DeflateState","pending_buf_size","gzhead","gzindex","last_flush","w_bits","hash_bits","HEAP_SIZE","deflateResetKeep","deflateReset","max_block_size","max_start","deflateInit","old_flush","val","bstate","deflate_huff","deflate_rle","avail","tmpDict","deflateInfo","TYPEVALUE_2_TYPENAME","3","4","5","SECTION_TYPECODES","custom","Section","_typename","_typevalue","_points","_radiuses","tn","tv","rawSection","hasChild","candidateId","sum","Soma","nbPoints","average","rawSoma","_soma","_radiusFromSoma","_specialSections","rawMorphology","initWithRawSection","sId","currentRawSection","currentSection","addChild","force","_findSpecialSection","specialityName","allSections","somaSections","getTypeValue","cs","csPoints","TYPED_OK","Uint16Array","Int32Array","_has","obj","sources","shift","fnTyped","dest","src_offs","dest_offs","fnUntyped","setTyped"],"mappings":"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","file":"static/chunks/26.c52a2c3fc89fa4dbf1b5.js","sourcesContent":["// Top level file is just a mixin of submodules & constants\n'use strict';\n\nvar assign    = require('./lib/utils/common').assign;\n\nvar deflate   = require('./lib/deflate');\nvar inflate   = require('./lib/inflate');\nvar constants = require('./lib/zlib/constants');\n\nvar pako = {};\n\nassign(pako, deflate, inflate, constants);\n\nmodule.exports = pako;\n","import { PerspectiveCamera, Scene, AmbientLight, DirectionalLight, WebGLRenderer, Raycaster, Vector2, Mesh, MeshPhongMaterial, DoubleSide, FrontSide, BufferGeometry, BufferAttribute, Vector3, Quaternion, EventDispatcher, DefaultLoadingManager, FileLoader, Float32BufferAttribute, LoaderUtils, Matrix4, CylinderBufferGeometry, Box3, LineBasicMaterial, Geometry, Line, Object3D, SphereGeometry, Face3, MeshBasicMaterial, Line3, Plane, Triangle, Sphere } from 'three';\nimport pako from 'pako';\nimport ObjParser from 'parse-wavefront-obj';\nimport morphologycorejs from 'morphologycorejs';\n\n/*\n * @author Eberhard Graether / http://egraether.com/\n * @author Mark Lundin   / http://mark-lundin.com\n * @author Simone Manini / http://daron1337.github.io\n * @author Luca Antiga   / http://lantiga.github.io\n */\n\n/*\n* ES6 adapted source from the example folder of THREEJS (because there is no proper repo for it)\n* Enables mouse control (pan, zoom, rotation)\n*/\nconst TrackballControls = function (object, domElement) {\n  const _this = this;\n  const STATE = {\n    NONE: -1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4,\n  };\n\n  this.object = object;\n  this.domElement = (domElement !== undefined) ? domElement : document;\n\n  // API\n\n  this.enabled = true;\n\n  this.screen = {\n    left: 0, top: 0, width: 0, height: 0,\n  };\n\n  this.rotateSpeed = 1.0;\n  this.zoomSpeed = 1.2;\n  this.panSpeed = 0.3;\n\n  this.noRotate = false;\n  this.noZoom = false;\n  this.noPan = false;\n\n  this.staticMoving = false;\n  this.dynamicDampingFactor = 0.5;\n\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n\n  this.keys = [65 /* A */, 83 /* S */, 68];\n\n  // internals\n\n  this.target = new Vector3();\n\n  const EPS = 0.000001;\n\n  const lastPosition = new Vector3();\n\n  let _state = STATE.NONE;\n\n\n  let _prevState = STATE.NONE;\n\n\n  const _eye = new Vector3();\n\n\n  const _movePrev = new Vector2();\n\n\n  const _moveCurr = new Vector2();\n\n\n  const _lastAxis = new Vector3();\n\n\n  let _lastAngle = 0;\n\n\n  const _zoomStart = new Vector2();\n\n\n  const _zoomEnd = new Vector2();\n\n\n  let _touchZoomDistanceStart = 0;\n\n\n  let _touchZoomDistanceEnd = 0;\n\n\n  const _panStart = new Vector2();\n\n\n  const _panEnd = new Vector2();\n\n  // for reset\n\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.up0 = this.object.up.clone();\n\n  // events\n\n  const changeEvent = { type: 'change' };\n  const startEvent = { type: 'start' };\n  const endEvent = { type: 'end' };\n\n\n  // methods\n\n  this.handleResize = function () {\n    if (this.domElement === document) {\n      this.screen.left = 0;\n      this.screen.top = 0;\n      this.screen.width = window.innerWidth;\n      this.screen.height = window.innerHeight;\n    } else {\n      const box = this.domElement.getBoundingClientRect();\n      // adjustments come from similar code in the jquery offset() function\n      const d = this.domElement.ownerDocument.documentElement;\n      this.screen.left = box.left + window.pageXOffset - d.clientLeft;\n      this.screen.top = box.top + window.pageYOffset - d.clientTop;\n      this.screen.width = box.width;\n      this.screen.height = box.height;\n    }\n  };\n\n  const getMouseOnScreen = (function () {\n    const vector = new Vector2();\n\n    return function getMouseOnScreen(pageX, pageY) {\n      vector.set(\n        (pageX - _this.screen.left) / _this.screen.width,\n        (pageY - _this.screen.top) / _this.screen.height,\n      );\n\n      return vector\n    }\n  }());\n\n  const getMouseOnCircle = (function () {\n    const vector = new Vector2();\n\n    return function getMouseOnCircle(pageX, pageY) {\n      vector.set(\n        ((pageX - _this.screen.width * 0.5 - _this.screen.left) / (_this.screen.width * 0.5)),\n        ((_this.screen.height + 2 * (_this.screen.top - pageY)) / _this.screen.width), // screen.width intentional\n      );\n\n      return vector\n    }\n  }());\n\n  this.rotateCamera = (function () {\n    const axis = new Vector3();\n\n\n    const quaternion = new Quaternion();\n\n\n    const eyeDirection = new Vector3();\n\n\n    const objectUpDirection = new Vector3();\n\n\n    const objectSidewaysDirection = new Vector3();\n\n\n    const moveDirection = new Vector3();\n\n\n    let angle;\n\n    return function rotateCamera() {\n      moveDirection.set(_moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0);\n      angle = moveDirection.length();\n\n      if (angle) {\n        _eye.copy(_this.object.position).sub(_this.target);\n\n        eyeDirection.copy(_eye).normalize();\n        objectUpDirection.copy(_this.object.up).normalize();\n        objectSidewaysDirection.crossVectors(objectUpDirection, eyeDirection).normalize();\n\n        objectUpDirection.setLength(_moveCurr.y - _movePrev.y);\n        objectSidewaysDirection.setLength(_moveCurr.x - _movePrev.x);\n\n        moveDirection.copy(objectUpDirection.add(objectSidewaysDirection));\n\n        axis.crossVectors(moveDirection, _eye).normalize();\n\n        angle *= _this.rotateSpeed;\n        quaternion.setFromAxisAngle(axis, angle);\n\n        _eye.applyQuaternion(quaternion);\n        _this.object.up.applyQuaternion(quaternion);\n\n        _lastAxis.copy(axis);\n        _lastAngle = angle;\n      } else if (!_this.staticMoving && _lastAngle) {\n        _lastAngle *= Math.sqrt(1.0 - _this.dynamicDampingFactor);\n        _eye.copy(_this.object.position).sub(_this.target);\n        quaternion.setFromAxisAngle(_lastAxis, _lastAngle);\n        _eye.applyQuaternion(quaternion);\n        _this.object.up.applyQuaternion(quaternion);\n      }\n\n      _movePrev.copy(_moveCurr);\n    }\n  }());\n\n\n  this.zoomCamera = function () {\n    let factor;\n\n    if (_state === STATE.TOUCH_ZOOM_PAN) {\n      factor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n      _touchZoomDistanceStart = _touchZoomDistanceEnd;\n      _eye.multiplyScalar(factor);\n    } else {\n      factor = 1.0 + (_zoomEnd.y - _zoomStart.y) * _this.zoomSpeed;\n\n      if (factor !== 1.0 && factor > 0.0) {\n        _eye.multiplyScalar(factor);\n      }\n\n      if (_this.staticMoving) {\n        _zoomStart.copy(_zoomEnd);\n      } else {\n        _zoomStart.y += (_zoomEnd.y - _zoomStart.y) * this.dynamicDampingFactor;\n      }\n    }\n  };\n\n  this.panCamera = (function () {\n    const mouseChange = new Vector2();\n\n\n    const objectUp = new Vector3();\n\n\n    const pan = new Vector3();\n\n    return function panCamera() {\n      mouseChange.copy(_panEnd).sub(_panStart);\n\n      if (mouseChange.lengthSq()) {\n        mouseChange.multiplyScalar(_eye.length() * _this.panSpeed);\n\n        pan.copy(_eye).cross(_this.object.up).setLength(mouseChange.x);\n        pan.add(objectUp.copy(_this.object.up).setLength(mouseChange.y));\n\n        _this.object.position.add(pan);\n        _this.target.add(pan);\n\n        if (_this.staticMoving) {\n          _panStart.copy(_panEnd);\n        } else {\n          _panStart.add(mouseChange.subVectors(_panEnd, _panStart).multiplyScalar(_this.dynamicDampingFactor));\n        }\n      }\n    }\n  }());\n\n  this.checkDistances = function () {\n    if (!_this.noZoom || !_this.noPan) {\n      if (_eye.lengthSq() > _this.maxDistance * _this.maxDistance) {\n        _this.object.position.addVectors(_this.target, _eye.setLength(_this.maxDistance));\n        _zoomStart.copy(_zoomEnd);\n      }\n\n      if (_eye.lengthSq() < _this.minDistance * _this.minDistance) {\n        _this.object.position.addVectors(_this.target, _eye.setLength(_this.minDistance));\n        _zoomStart.copy(_zoomEnd);\n      }\n    }\n  };\n\n  this.update = function () {\n    _eye.subVectors(_this.object.position, _this.target);\n\n    if (!_this.noRotate) {\n      _this.rotateCamera();\n    }\n\n    if (!_this.noZoom) {\n      _this.zoomCamera();\n    }\n\n    if (!_this.noPan) {\n      _this.panCamera();\n    }\n\n    _this.object.position.addVectors(_this.target, _eye);\n\n    _this.checkDistances();\n\n    _this.object.lookAt(_this.target);\n\n    if (lastPosition.distanceToSquared(_this.object.position) > EPS) {\n      _this.dispatchEvent(changeEvent);\n\n      lastPosition.copy(_this.object.position);\n    }\n  };\n\n  this.reset = function () {\n    _state = STATE.NONE;\n    _prevState = STATE.NONE;\n\n    _this.target.copy(_this.target0);\n    _this.object.position.copy(_this.position0);\n    _this.object.up.copy(_this.up0);\n\n    _eye.subVectors(_this.object.position, _this.target);\n\n    _this.object.lookAt(_this.target);\n\n    _this.dispatchEvent(changeEvent);\n\n    lastPosition.copy(_this.object.position);\n  };\n\n  // listeners\n\n  function keydown(event) {\n    if (_this.enabled === false) return\n\n    window.removeEventListener('keydown', keydown);\n\n    _prevState = _state;\n\n    if (_state !== STATE.NONE) {\n      return\n    } if (event.keyCode === _this.keys[STATE.ROTATE] && !_this.noRotate) {\n      _state = STATE.ROTATE;\n    } else if (event.keyCode === _this.keys[STATE.ZOOM] && !_this.noZoom) {\n      _state = STATE.ZOOM;\n    } else if (event.keyCode === _this.keys[STATE.PAN] && !_this.noPan) {\n      _state = STATE.PAN;\n    }\n  }\n\n  function keyup(event) {\n    if (_this.enabled === false) return\n\n    _state = _prevState;\n\n    window.addEventListener('keydown', keydown, false);\n  }\n\n  function mousedown(event) {\n    if (_this.enabled === false) return\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (_state === STATE.NONE) {\n      _state = event.button;\n    }\n\n    if (_state === STATE.ROTATE && !_this.noRotate) {\n      _moveCurr.copy(getMouseOnCircle(event.pageX, event.pageY));\n      _movePrev.copy(_moveCurr);\n    } else if (_state === STATE.ZOOM && !_this.noZoom) {\n      _zoomStart.copy(getMouseOnScreen(event.pageX, event.pageY));\n      _zoomEnd.copy(_zoomStart);\n    } else if (_state === STATE.PAN && !_this.noPan) {\n      _panStart.copy(getMouseOnScreen(event.pageX, event.pageY));\n      _panEnd.copy(_panStart);\n    }\n\n    document.addEventListener('mousemove', mousemove, false);\n    document.addEventListener('mouseup', mouseup, false);\n\n    _this.dispatchEvent(startEvent);\n  }\n\n  function mousemove(event) {\n    if (_this.enabled === false) return\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (_state === STATE.ROTATE && !_this.noRotate) {\n      _movePrev.copy(_moveCurr);\n      _moveCurr.copy(getMouseOnCircle(event.pageX, event.pageY));\n    } else if (_state === STATE.ZOOM && !_this.noZoom) {\n      _zoomEnd.copy(getMouseOnScreen(event.pageX, event.pageY));\n    } else if (_state === STATE.PAN && !_this.noPan) {\n      _panEnd.copy(getMouseOnScreen(event.pageX, event.pageY));\n    }\n  }\n\n  function mouseup(event) {\n    if (_this.enabled === false) return\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    _state = STATE.NONE;\n\n    document.removeEventListener('mousemove', mousemove);\n    document.removeEventListener('mouseup', mouseup);\n    _this.dispatchEvent(endEvent);\n  }\n\n  function mousewheel(event) {\n    if (_this.enabled === false) return\n\n    if (_this.noZoom === true) return\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.deltaMode) {\n      case 2:\n        // Zoom in pages\n        _zoomStart.y -= event.deltaY * 0.025;\n        break\n\n      case 1:\n        // Zoom in lines\n        _zoomStart.y -= event.deltaY * 0.01;\n        break\n\n      default:\n        // undefined, 0, assume pixels\n        _zoomStart.y -= event.deltaY * 0.00025;\n        break\n    }\n\n    _this.dispatchEvent(startEvent);\n    _this.dispatchEvent(endEvent);\n  }\n\n  function touchstart(event) {\n    if (_this.enabled === false) return\n\n    event.preventDefault();\n\n    switch (event.touches.length) {\n      case 1:\n        _state = STATE.TOUCH_ROTATE;\n        _moveCurr.copy(getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n        _movePrev.copy(_moveCurr);\n        break\n\n      default: // 2 or more\n        _state = STATE.TOUCH_ZOOM_PAN;\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        _touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt(dx * dx + dy * dy);\n\n        var x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n        var y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n        _panStart.copy(getMouseOnScreen(x, y));\n        _panEnd.copy(_panStart);\n        break\n    }\n\n    _this.dispatchEvent(startEvent);\n  }\n\n  function touchmove(event) {\n    if (_this.enabled === false) return\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.touches.length) {\n      case 1:\n        _movePrev.copy(_moveCurr);\n        _moveCurr.copy(getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n        break\n\n      default: // 2 or more\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        _touchZoomDistanceEnd = Math.sqrt(dx * dx + dy * dy);\n\n        var x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n        var y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n        _panEnd.copy(getMouseOnScreen(x, y));\n        break\n    }\n  }\n\n  function touchend(event) {\n    if (_this.enabled === false) return\n\n    switch (event.touches.length) {\n      case 0:\n        _state = STATE.NONE;\n        break\n\n      case 1:\n        _state = STATE.TOUCH_ROTATE;\n        _moveCurr.copy(getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n        _movePrev.copy(_moveCurr);\n        break\n    }\n\n    _this.dispatchEvent(endEvent);\n  }\n\n  function contextmenu(event) {\n    if (_this.enabled === false) return\n\n    event.preventDefault();\n  }\n\n  this.dispose = function () {\n    this.domElement.removeEventListener('contextmenu', contextmenu, false);\n    this.domElement.removeEventListener('mousedown', mousedown, false);\n    this.domElement.removeEventListener('wheel', mousewheel, false);\n\n    this.domElement.removeEventListener('touchstart', touchstart, false);\n    this.domElement.removeEventListener('touchend', touchend, false);\n    this.domElement.removeEventListener('touchmove', touchmove, false);\n\n    document.removeEventListener('mousemove', mousemove, false);\n    document.removeEventListener('mouseup', mouseup, false);\n\n    window.removeEventListener('keydown', keydown, false);\n    window.removeEventListener('keyup', keyup, false);\n  };\n\n  this.domElement.addEventListener('contextmenu', contextmenu, false);\n  this.domElement.addEventListener('mousedown', mousedown, false);\n  this.domElement.addEventListener('wheel', mousewheel, false);\n\n  this.domElement.addEventListener('touchstart', touchstart, false);\n  this.domElement.addEventListener('touchend', touchend, false);\n  this.domElement.addEventListener('touchmove', touchmove, false);\n\n  window.addEventListener('keydown', keydown, false);\n  window.addEventListener('keyup', keyup, false);\n\n  this.handleResize();\n\n  // force an update at start\n  this.update();\n};\n\n\nTrackballControls.prototype = Object.create(EventDispatcher.prototype);\n\n/*\n * @author aleeper / http://adamleeper.com/\n * @author mrdoob / http://mrdoob.com/\n * @author gero3 / https://github.com/gero3\n * @author Mugen87 / https://github.com/Mugen87\n *\n * Description: A THREE loader for STL ASCII files, as created by Solidworks and other CAD programs.\n *\n * Supports both binary and ASCII encoded files, with automatic detection of type.\n *\n * The loader returns a non-indexed buffer geometry.\n *\n * Limitations:\n *  Binary decoding supports \"Magics\" color format (http://en.wikipedia.org/wiki/STL_(file_format)#Color_in_binary_STL).\n *  There is perhaps some question as to how valid it is to always assume little-endian-ness.\n *  ASCII decoding assumes file is UTF-8.\n *\n * Usage:\n *  var loader = new THREE.STLLoader();\n *  loader.load( './models/stl/slotted_disk.stl', function ( geometry ) {\n *    scene.add( new THREE.Mesh( geometry ) );\n *  });\n *\n * For binary STLs geometry might contain colors for vertices. To use it:\n *  // use the same code to load STL as above\n *  if (geometry.hasColors) {\n *    material = new THREE.MeshPhongMaterial({ opacity: geometry.alpha, vertexColors: THREE.VertexColors });\n *  } else { .... }\n *  var mesh = new THREE.Mesh( geometry, material );\n */\n\n\nconst STLLoader = function (manager) {\n  this.manager = (manager !== undefined) ? manager : DefaultLoadingManager;\n};\n\nSTLLoader.prototype = {\n\n  constructor: STLLoader,\n\n  load(url, onLoad, onProgress, onError) {\n    const scope = this;\n\n    const loader = new FileLoader(scope.manager);\n    loader.setResponseType('arraybuffer');\n    loader.load(url, (buf) => {\n      // trying to un-gzip it with Pako\n      try {\n        buf = pako.inflate(buf).buffer;\n      } catch (err) {\n      }\n\n      try {\n        onLoad(scope.parse(buf));\n      } catch (exception) {\n        if (onError) {\n          onError(exception);\n        }\n      }\n    }, onProgress, onError);\n  },\n\n  parse(data) {\n    function isBinary(data) {\n      let expect; let face_size; let n_faces; let\n        reader;\n      reader = new DataView(data);\n      face_size = (32 / 8 * 3) + ((32 / 8 * 3) * 3) + (16 / 8);\n      n_faces = reader.getUint32(80, true);\n      expect = 80 + (32 / 8) + (n_faces * face_size);\n\n      if (expect === reader.byteLength) {\n        return true\n      }\n\n      // An ASCII STL data must begin with 'solid ' as the first six bytes.\n      // However, ASCII STLs lacking the SPACE after the 'd' are known to be\n      // plentiful.  So, check the first 5 bytes for 'solid'.\n\n      // Several encodings, such as UTF-8, precede the text with up to 5 bytes:\n      // https://en.wikipedia.org/wiki/Byte_order_mark#Byte_order_marks_by_encoding\n      // Search for \"solid\" to start anywhere after those prefixes.\n\n      // US-ASCII ordinal values for 's', 'o', 'l', 'i', 'd'\n\n      const solid = [115, 111, 108, 105, 100];\n\n      for (let off = 0; off < 5; off++) {\n        // If \"solid\" text is matched to the current offset, declare it to be an ASCII STL.\n\n        if (matchDataViewAt(solid, reader, off)) return false\n      }\n\n      // Couldn't find \"solid\" text at the beginning; it is binary STL.\n\n      return true\n    }\n\n    function matchDataViewAt(query, reader, offset) {\n      // Check if each byte in query matches the corresponding byte from the current offset\n\n      for (let i = 0, il = query.length; i < il; i++) {\n        if (query[i] !== reader.getUint8(offset + i, false)) return false\n      }\n\n      return true\n    }\n\n    function parseBinary(data) {\n      const reader = new DataView(data);\n      const faces = reader.getUint32(80, true);\n\n      let r; let g; let b; let hasColors = false; let\n        colors;\n      let defaultR; let defaultG; let defaultB; let\n        alpha;\n\n      // process STL header\n      // check for default color in header (\"COLOR=rgba\" sequence).\n\n      for (let index = 0; index < 80 - 10; index++) {\n        if ((reader.getUint32(index, false) == 0x434F4C4F /* COLO */)\n          && (reader.getUint8(index + 4) == 0x52 /* 'R' */)\n          && (reader.getUint8(index + 5) == 0x3D /* '=' */)) {\n          hasColors = true;\n          colors = [];\n\n          defaultR = reader.getUint8(index + 6) / 255;\n          defaultG = reader.getUint8(index + 7) / 255;\n          defaultB = reader.getUint8(index + 8) / 255;\n          alpha = reader.getUint8(index + 9) / 255;\n        }\n      }\n\n      const dataOffset = 84;\n      const faceLength = 12 * 4 + 2;\n\n      const geometry = new BufferGeometry();\n\n      const vertices = [];\n      const normals = [];\n\n      for (let face = 0; face < faces; face++) {\n        const start = dataOffset + face * faceLength;\n        const normalX = reader.getFloat32(start, true);\n        const normalY = reader.getFloat32(start + 4, true);\n        const normalZ = reader.getFloat32(start + 8, true);\n\n        if (hasColors) {\n          const packedColor = reader.getUint16(start + 48, true);\n\n          if ((packedColor & 0x8000) === 0) {\n            // facet has its own unique color\n\n            r = (packedColor & 0x1F) / 31;\n            g = ((packedColor >> 5) & 0x1F) / 31;\n            b = ((packedColor >> 10) & 0x1F) / 31;\n          } else {\n            r = defaultR;\n            g = defaultG;\n            b = defaultB;\n          }\n        }\n\n        for (let i = 1; i <= 3; i++) {\n          const vertexstart = start + i * 12;\n\n          vertices.push(reader.getFloat32(vertexstart, true));\n          vertices.push(reader.getFloat32(vertexstart + 4, true));\n          vertices.push(reader.getFloat32(vertexstart + 8, true));\n\n          normals.push(normalX, normalY, normalZ);\n\n          if (hasColors) {\n            colors.push(r, g, b);\n          }\n        }\n      }\n\n      geometry.addAttribute('position', new BufferAttribute(new Float32Array(vertices), 3));\n      geometry.addAttribute('normal', new BufferAttribute(new Float32Array(normals), 3));\n\n      if (hasColors) {\n        geometry.addAttribute('color', new BufferAttribute(new Float32Array(colors), 3));\n        geometry.hasColors = true;\n        geometry.alpha = alpha;\n      }\n\n      return geometry\n    }\n\n    function parseASCII(data) {\n      const geometry = new BufferGeometry();\n      const patternFace = /facet([\\s\\S]*?)endfacet/g;\n      let faceCounter = 0;\n\n      const patternFloat = /[\\s]+([+-]?(?:\\d*)(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/.source;\n      const patternVertex = new RegExp(`vertex${patternFloat}${patternFloat}${patternFloat}`, 'g');\n      const patternNormal = new RegExp(`normal${patternFloat}${patternFloat}${patternFloat}`, 'g');\n\n      const vertices = [];\n      const normals = [];\n\n      const normal = new Vector3();\n\n      let result;\n\n      while ((result = patternFace.exec(data)) !== null) {\n        let vertexCountPerFace = 0;\n        let normalCountPerFace = 0;\n\n        const text = result[0];\n\n        while ((result = patternNormal.exec(text)) !== null) {\n          normal.x = parseFloat(result[1]);\n          normal.y = parseFloat(result[2]);\n          normal.z = parseFloat(result[3]);\n          normalCountPerFace++;\n        }\n\n        while ((result = patternVertex.exec(text)) !== null) {\n          vertices.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n          normals.push(normal.x, normal.y, normal.z);\n          vertexCountPerFace++;\n        }\n\n        // every face have to own ONE valid normal\n\n        if (normalCountPerFace !== 1) {\n          console.error(`THREE.STLLoader: Something isn't right with the normal of face number ${faceCounter}`);\n        }\n\n        // each face have to own THREE valid vertices\n\n        if (vertexCountPerFace !== 3) {\n          console.error(`THREE.STLLoader: Something isn't right with the vertices of face number ${faceCounter}`);\n        }\n\n        faceCounter++;\n      }\n\n      geometry.addAttribute('position', new Float32BufferAttribute(vertices, 3));\n      geometry.addAttribute('normal', new Float32BufferAttribute(normals, 3));\n\n      return geometry\n    }\n\n    function ensureString(buffer) {\n      if (typeof buffer !== 'string') {\n        return LoaderUtils.decodeText(new Uint8Array(buffer))\n      }\n\n      return buffer\n    }\n\n    function ensureBinary(buffer) {\n      if (typeof buffer === 'string') {\n        const array_buffer = new Uint8Array(buffer.length);\n        for (let i = 0; i < buffer.length; i++) {\n          array_buffer[i] = buffer.charCodeAt(i) & 0xff; // implicitly assumes little-endian\n        }\n        return array_buffer.buffer || array_buffer\n      }\n\n      return buffer\n    }\n\n    // start\n\n    const binData = ensureBinary(data);\n\n    return isBinary(binData) ? parseBinary(binData) : parseASCII(ensureString(data))\n  },\n\n};\n\n/* global document */\n\n/**\n* Some handy static functions to do stuff that are not strictly related to the business of the project\n*/\nclass Tools {\n  /**\n   * Handy function to deal with option object we pass in argument of function.\n   * Allows the return of a default value if the `optionName` is not available in\n   * the `optionObj`\n   * @param {Object} optionObj - the object that contain the options\n   * @param {String} optionName - the name of the option desired, attribute of `optionObj`\n   * @param {any} optionDefaultValue - default values to be returned in case `optionName` is not an attribute of `optionObj`\n   */\n  static getOption(optionObj, optionName, optionDefaultValue) {\n    return (optionObj && optionName in optionObj) ? optionObj[optionName] : optionDefaultValue\n  }\n\n\n  /**\n   * @private\n   * Generate a cylinder with a starting point and en endpoint because\n   * THREEjs does not provide that\n   * @param {THREE.Vector3} vStart - the start position\n   * @param {THREE.Vector3} vEnd - the end position\n   * @param {Number} rStart - radius at the `vStart` position\n   * @param {Number} rEnd - radius at the `vEnd` position\n   * @param {Boolean} openEnd - cylinder has open ends if true, or closed ends if false\n   * @return {THREE.CylinderBufferGeometry} the mesh containing a cylinder\n   */\n  static makeCylinder(vStart, vEnd, rStart, rEnd, openEnd) {\n    const HALF_PI = Math.PI * 0.5;\n    const distance = vStart.distanceTo(vEnd);\n    const position = vEnd.clone().add(vStart).divideScalar(2);\n\n    const offsetPosition = new Matrix4();// a matrix to fix pivot position\n    offsetPosition.setPosition(position);\n\n    const cylinder = new CylinderBufferGeometry(rStart, rEnd, distance, 32, 1, openEnd);\n    const orientation = new Matrix4();// a new orientation matrix to offset pivot\n    orientation.multiply(offsetPosition); // test to add offset\n    const offsetRotation = new Matrix4();// a matrix to fix pivot rotation\n    orientation.lookAt(vStart, vEnd, new Vector3(0, 1, 0));// look at destination\n    offsetRotation.makeRotationX(HALF_PI);// rotate 90 degs on X\n    orientation.multiply(offsetRotation);// combine orientation with rotation transformations\n    cylinder.applyMatrix(orientation);\n    return cylinder\n  }\n\n\n  static triggerDownload(strData, filename) {\n    const link = document.createElement('a');\n    document.body.appendChild(link); // Firefox requires the link to be in the body\n    link.download = filename;\n    link.href = strData;\n    link.click();\n    document.body.removeChild(link); // remove the link when done\n  }\n}\n\n/*\n* Author   Jonathan Lurie - http://me.jonathanlurie.fr\n* License  MIT\n* Link     https://github.com/Pixpipe/quickvoxelcore\n* Lab      MCIN - Montreal Neurological Institute\n*/\n\n\n/**\n * The EventManager deals with events, create them, call them.\n * This class is mostly for being inherited from.\n */\nclass EventManager {\n  /**\n   * Constructor\n   */\n  constructor() {\n    this._events = {};\n  }\n\n\n  /**\n   * Define an event, with a name associated with a function\n   * @param  {String} eventName - Name to give to the event\n   * @param  {Function} callback - function associated to the even\n   */\n  on(eventName, callback) {\n    if (typeof callback === 'function') {\n      if (!(eventName in this._events)) {\n        this._events[eventName] = [];\n      }\n      this._events[eventName].push(callback);\n    } else {\n      console.warn('The callback must be of type Function');\n    }\n  }\n\n\n  emit(eventName, args = []) {\n    // the event must exist and be non null\n    if ((eventName in this._events) && (this._events[eventName].length > 0)) {\n      const events = this._events[eventName];\n      for (let i = 0; i < events.length; i += 1) {\n        events[i](...args);\n      }\n    } else {\n      console.warn(`No function associated to the event ${eventName}`);\n    }\n  }\n}\n\n// eslint thing\n/* global window requestAnimationFrame cancelAnimationFrame */\n\n\nconst DEFAULT_FOCUS_DISTANCE = 1000;\n\n/**\n * ThreeContext creates a WebGL context using THREEjs. It also handle mouse control.\n * A MorphologyPolyline instance is added to it.\n * An event can be associated to a ThreeContext instance: `onRaycast` with the method\n * `.on(\"onRaycast\", function(s){...})` where `s` is the section object being raycasted.\n */\nclass ThreeContext extends EventManager {\n  /**\n   * @param {DONObject} divObj - the div object as a DOM element.\n   * Will be used to host the WebGL context\n   * created by THREE\n   */\n  constructor(divObj = null) {\n    super();\n    const that = this;\n\n    if (!divObj) {\n      console.error('The ThreeContext needs a div object');\n      return\n    }\n\n    this._requestFrameId = null;\n\n    this._morphologyMeshCollection = {};\n    this._meshCollection = {};\n\n    // init camera\n    this._camera = new PerspectiveCamera(27, divObj.clientWidth / divObj.clientHeight, 1, 1000000);\n    this._camera.position.z = DEFAULT_FOCUS_DISTANCE;\n\n\n    // init scene\n    this._scene = new Scene();\n    this._scene.add(new AmbientLight(0x444444));\n\n    // let axesHelper = new THREE.AxesHelper( 1000 )\n    // this._scene.add( axesHelper )\n\n    // adding some light\n    const light1 = new DirectionalLight(0xffffff, 0.8);\n    //light1.position.set(0, 1000, 0)\n    // adding the light to the camera ensure a constant lightin of the model\n    this._scene.add(this._camera);\n    this._camera.add(light1);\n\n    this._renderer = new WebGLRenderer({ antialias: true, alpha: true, preserveDrawingBuffer: true });\n    this._renderer.setClearColor(0xffffff, 0);\n    this._renderer.setPixelRatio(window.devicePixelRatio);\n    this._renderer.setSize(divObj.clientWidth, divObj.clientHeight);\n    this._renderer.gammaInput = true;\n    this._renderer.gammaOutput = true;\n    divObj.appendChild(this._renderer.domElement);\n\n    // all the necessary for raycasting\n    this._raycaster = new Raycaster();\n    this._raycastMouse = new Vector2();\n\n    function onMouseMove(event) {\n      const elem = that._renderer.domElement;\n      const rect = elem.getBoundingClientRect();\n      const relX = event.clientX - rect.left;\n      const relY = event.clientY - rect.top;\n      that._raycastMouse.x = (relX / that._renderer.domElement.clientWidth) * 2 - 1;\n      that._raycastMouse.y = -(relY / that._renderer.domElement.clientHeight) * 2 + 1;\n    }\n\n    this._renderer.domElement.addEventListener('mousemove', onMouseMove, false);\n    this._renderer.domElement.addEventListener('dblclick', () => {\n      this._performRaycast();\n    }, false);\n\n    // mouse controls\n    this._controls = new TrackballControls(this._camera, this._renderer.domElement);\n    this._controls.rotateSpeed = 3;\n    this._controls.addEventListener('change', this._render.bind(this));\n\n    window.addEventListener('resize', () => {\n      that._camera.aspect = divObj.clientWidth / divObj.clientHeight;\n      that._camera.updateProjectionMatrix();\n      that._renderer.setSize(divObj.clientWidth, divObj.clientHeight);\n      that._controls.handleResize();\n      that._render();\n    }, false);\n\n    this._testObjMesh();\n\n    this._render();\n    this._animate();\n  }\n\n\n  _testObjMesh () {\n  }\n\n\n\n  /**\n   * Get the field of view angle of the camera, in degrees\n   * @return {Number}\n   */\n  getCameraFieldOfView() {\n    return this._camera.fov\n  }\n\n\n  /**\n   * Define the camera field of view, in degrees\n   * @param {Number} fov - the fov\n   */\n  setCameraFieldOfView(fov) {\n    this._camera.fov = fov;\n    this._camera.updateProjectionMatrix();\n    this._render();\n  }\n\n\n  /**\n   * Adds a mesh from its URL. The mesh has to encoded into the STL format\n   * @param {String} url - the url of the STL file\n   * @param {Object} options - the options object\n   * @param {String} options.name - optional name of this mesh (useful for further operations such as centering the view)\n   * @param {Boolean} options.focusOn - if true, the camera will focus on this added mesh. If false, the camera will not change\n   * @param {Number} options.opacity - the opacity of the mesh\n   * @param {Number} options.color - the color of the mesh\n   * @param {Number} options.wireframe - only the wireframe will display if true. If false, the regular mesh will show\n   * @param {Number} options.wireframe - only the wireframe will display if true. If false, the regular mesh will show\n   * @param {Function} options.onDone - callback to be called when the mesh is added. Called with the name of the mesh in argument\n   */\n  addStlToMeshCollection(url, options) {\n    const that = this;\n\n    // generate a random name in case none was provided\n    const name = Tools.getOption(options, 'name', `mesh_${Math.round(Math.random() * 1000000).toString()}`);\n    const focusOn = Tools.getOption(options, 'focusOn', true);\n\n    const loader = new STLLoader();\n    // loader.load( '../data/meshes/mask_smooth_simple.stl', function ( geometry ) {\n    loader.load(url, (geometry) => {\n      const material = this._buildMeshMaterialFromOptions(options);\n\n      geometry.computeBoundingSphere();\n\n      const mesh = new Mesh(\n        geometry,\n        material,\n      );\n\n      mesh.userData.name = name;\n\n      that._scene.add(mesh);\n      that._meshCollection[name] = mesh;\n\n      if (focusOn) that.focusOnMesh(name);\n\n      // call a callback if declared, with the name of the mesh in arg\n      const onDone = Tools.getOption(options, 'onDone', null);\n      if (onDone) {\n        onDone(name);\n      }\n      this._render();\n    });\n  }\n\n\n  /**\n   * @private\n   * Generates a phong material based on the options provided\n   */\n  _buildMeshMaterialFromOptions (options) {\n    const color = Tools.getOption(options, 'color', Math.floor(Math.random() * 0xFFFFFF));\n    const opacity = Tools.getOption(options, 'opacity', 0.15);\n    const wireframe = Tools.getOption(options, 'wireframe', false);\n    const shininess = Tools.getOption(options, 'shininess', 300);\n    const doubleSide = Tools.getOption(options, 'doubleSide', false);\n\n    const material = new MeshPhongMaterial({\n      specular: 0xffffff,\n      shininess,\n      side: doubleSide ? DoubleSide : FrontSide,\n      color,\n      transparent: true,\n      opacity,\n      wireframe,\n    });\n\n    return material\n  }\n\n\n  /**\n   * Add a OBJ mesh to the scene\n   * @param {String} objStr - string that comes from the obj file\n   * @param {Object} options - the options object\n   * @param {String} options.name - optional name of this mesh (useful for further operations such as centering the view)\n   * @param {Boolean} options.focusOn - if true, the camera will focus on this added mesh. If false, the camera will not change\n   * @param {Number} options.opacity - the opacity of the mesh\n   * @param {Number} options.color - the color of the mesh\n   * @param {Number} options.wireframe - only the wireframe will display if true. If false, the regular mesh will show\n   * @param {Number} options.wireframe - only the wireframe will display if true. If false, the regular mesh will show\n   * @param {Function} options.onDone - callback to be called when the mesh is added. Called with the name of the mesh in argument\n   */\n  addObjToMeshCollection (objStr, options) {\n    // generate a random name in case none was provided\n    const name = Tools.getOption(options, 'name', `mesh_${Math.round(Math.random() * 1000000).toString()}`);\n    const focusOn = Tools.getOption(options, 'focusOn', true);\n    let meshData = ObjParser( objStr );\n\n    // Usually 3 because polygons are triangle, but OBJ allows different\n    const verticesPerPolygon = meshData.cells[0].length;\n    let indices = new Uint32Array( verticesPerPolygon * meshData.cells.length );\n    let positions = new Float32Array( 3 * meshData.positions.length );\n\n    // flattening the indices\n    for (let i=0; i<meshData.cells.length; i += 1) {\n      let newIndex = i * verticesPerPolygon;\n      for (let ii=0; ii<verticesPerPolygon; ii += 1) {\n        indices[newIndex + ii] = meshData.cells[i][ii];\n      }\n    }\n\n    // flatening the positions\n    for (let p=0; p<meshData.positions.length; p += 1) {\n      let newIndex = p * 3;\n      positions[newIndex] = meshData.positions[p][0];\n      positions[newIndex+1] = meshData.positions[p][1];\n      positions[newIndex+2] = meshData.positions[p][2];\n    }\n\n    var geometry = new BufferGeometry();\n    geometry.setIndex( new BufferAttribute( indices, 1 ) );\n    geometry.addAttribute( 'position', new BufferAttribute( positions, verticesPerPolygon ) );\n    geometry.computeBoundingSphere();\n    geometry.computeVertexNormals();\n\n    // Allen atlas being inverted\n    geometry.rotateX(Math.PI);\n    geometry.rotateY(Math.PI);\n\n    let material = this._buildMeshMaterialFromOptions(options);\n\n    const mesh = new Mesh(\n      geometry,\n      material,\n    );\n\n    mesh.userData.name = name;\n    this._scene.add(mesh);\n    this._meshCollection[name] = mesh;\n\n    if (focusOn) this.focusOnMesh(name);\n\n    // call a callback if declared, with the name of the mesh in arg\n    const onDone = Tools.getOption(options, 'onDone', null);\n    if (onDone) {\n      onDone(name);\n    }\n    this._render();\n  }\n\n\n  /**\n   * @private\n   * deals with rendering and updating the controls\n   */\n  _animate() {\n    this._requestFrameId = requestAnimationFrame(this._animate.bind(this));\n    this._controls.update();\n  }\n\n  _render() {\n    this._renderer.render(this._scene, this._camera);\n  }\n\n\n  /**\n   * @private\n   * Throw a ray from the camera to the pointer, potentially intersect some sections.\n   * If so, emit the event `onRaycast` with the section instance as argument\n   */\n  _performRaycast() {\n    // update the picking ray with the camera and mouse position\n    this._raycaster.setFromCamera(this._raycastMouse, this._camera);\n\n    // calculate objects intersecting the picking ray\n    const intersects = this._raycaster.intersectObjects(this._scene.children, true);\n\n    if (intersects.length) {\n      // console.log(this._morphologyMeshCollection)\n      const sectionMesh = intersects[0].object;\n\n      // if it's the section of a morphology\n      if (\"sectionId\" in sectionMesh.userData) {\n        const { sectionId } = sectionMesh.userData;\n        const morphologyObj = sectionMesh.parent.getMorphology();\n        this.emit('onRaycast', [morphologyObj._sections[sectionId]]);\n\n      // If it's another mesh\n      } else if (\"name\" in sectionMesh.userData) {\n        this.emit('onRaycast', [sectionMesh.userData.name]);\n\n      // here we are raycasting something that is not identified\n      } else {\n        this.emit('onRaycast', [null]);\n      }\n    }\n  }\n\n\n  /**\n   * Add a MorphoPolyline object (which are ThreeJS Object3D) into the scene of this\n   * ThreeContext.\n   * @param {MorphoPolyline} morphoMesh - a MorphoPolyline instance\n   * @param {Object} options - the option object\n   * @param {String} options.name - the identifier to give to the MorphoPolyline instance within a local collection\n   * @param {Boolean} options.focusOn - if true, the camera will focus on this added morphology. If false, the camera will not change\n   * @param {Function} options.onDone - callback to be called when the morphology polyline is added. Called with the name of the morpho in argument\n   */\n  addMorphology(morphoMesh, options) {\n    // generate a random name in case none was provided\n    const name = options.name; // set before\n    const focusOn = Tools.getOption(options, 'focusOn', true);\n    const focusDistance = Tools.getOption(options, 'distance', DEFAULT_FOCUS_DISTANCE);\n\n    this._morphologyMeshCollection[name] = morphoMesh;\n    this._scene.add(morphoMesh);\n\n    if (focusOn) this.focusOnMorphology(name, focusDistance);\n\n    // call a callback if declared, with the name of the morphology in arg\n    const onDone = Tools.getOption(options, 'onDone');\n    if (onDone) {\n      onDone(name);\n    }\n\n    this._render();\n  }\n\n\n  /**\n   * Make the camera focus on a specific morphology\n   * @param {String|null} name - name of the morphology in the collection. If `null`, takes the first one\n   */\n  focusOnMorphology(name = null, distance = DEFAULT_FOCUS_DISTANCE) {\n    let morphoName = name;\n    // if no name of morphology is provided, we take the first one\n    if (!morphoName) {\n      const allNames = Object.keys(this._morphologyMeshCollection);\n      if (allNames.length) {\n        morphoName = allNames[0];\n      } else {\n        return\n      }\n    }\n\n    const morpho = this._morphologyMeshCollection[morphoName];\n    const targetPoint = morpho.getTargetPoint();\n    // we try to get pretty close to the soma, hence the averageSide/5\n    this._camera.position.set(targetPoint.x, targetPoint.y, targetPoint.z - distance);\n    this._camera.lookAt(targetPoint);\n    this._controls.target.copy(targetPoint);\n    this._render();\n  }\n\n\n  /**\n   * Focus on a mesh, given its name\n   * @param {string} name - name of the mesh to focus on\n   */\n  focusOnMesh(name) {\n    const mesh = this._meshCollection[name];\n    const boundingSphere = mesh.geometry.boundingSphere;\n\n    this._camera.position.set(boundingSphere.center.x - boundingSphere.radius * 3, boundingSphere.center.y, boundingSphere.center.z);\n    this._camera.lookAt(boundingSphere.center);\n    this._controls.target.copy(boundingSphere.center);\n    this._render();\n  }\n\n  /**\n   * Get the png image data as base64, in order to later, export as a file\n   */\n  getSnapshotData() {\n    const strMime = 'image/png';\n    // let strDownloadMime = \"image/octet-stream\"\n    const imgData = this._renderer.domElement.toDataURL(strMime);\n    // imgData.replace(strMime, strDownloadMime)\n    return imgData\n  }\n\n\n  /**\n   * Show the given mesh from the colelction\n   * @param {String} name - Name of the mesh\n   */\n  showMesh (name) {\n    if (name in this._meshCollection) {\n      this._meshCollection[name].material.visible = true;\n      this._render();\n    }\n  }\n\n\n  /**\n   * Hide the given mesh from the colelction\n   * @param {String} name - Name of the mesh\n   */\n  hideMesh (name) {\n    if (name in this._meshCollection) {\n      this._meshCollection[name].material.visible = false;\n      this._render();\n    }\n  }\n\n\n  /**\n   * Kills the scene, interaction, animation and reset all objects to null\n   */\n  destroy() {\n    this._controls.dispose();\n    cancelAnimationFrame(this._requestFrameId);\n    this._camera = null;\n    this._controls = null;\n    this._scene = null;\n    this._morphologyMeshCollection = null;\n    this._meshCollection = null;\n    this._renderer.domElement.remove();\n    this._renderer = null;\n  }\n}\n\n/*\n* @author Mugen87 / https://github.com/Mugen87\n*\n* Ported from: https://github.com/maurizzzio/quickhull3d/ by Mauricio Poppe (https://github.com/maurizzzio)\n*\n*/\n\n\nconst Visible = 0;\nconst Deleted = 1;\n\nfunction QuickHull() {\n  this.tolerance = -1;\n\n  this.faces = []; // the generated faces of the convex hull\n  this.newFaces = []; // this array holds the faces that are generated within a single iteration\n\n  // the vertex lists work as follows:\n  //\n  // let 'a' and 'b' be 'Face' instances\n  // let 'v' be points wrapped as instance of 'Vertex'\n  //\n  //     [v, v, ..., v, v, v, ...]\n  //      ^             ^\n  //      |             |\n  //  a.outside     b.outside\n  //\n  this.assigned = new VertexList();\n  this.unassigned = new VertexList();\n\n  this.vertices = []; // vertices of the hull (internal representation of given geometry data)\n}\n\nObject.assign(QuickHull.prototype, {\n\n  setFromPoints(points) {\n    if (Array.isArray(points) !== true) {\n      console.error('THREE.QuickHull: Points parameter is not an array.');\n    }\n\n    if (points.length < 4) {\n      console.error('THREE.QuickHull: The algorithm needs at least four points.');\n    }\n\n    this.makeEmpty();\n\n    for (let i = 0, l = points.length; i < l; i++) {\n      this.vertices.push(new VertexNode(points[i]));\n    }\n\n    this.compute();\n\n    return this\n  },\n\n  setFromObject(object) {\n    const points = [];\n\n    object.updateMatrixWorld(true);\n\n    object.traverse((node) => {\n      let i; let l; let\n        point;\n\n      const geometry = node.geometry;\n\n      if (geometry !== undefined) {\n        if (geometry.isGeometry) {\n          const vertices = geometry.vertices;\n\n          for (i = 0, l = vertices.length; i < l; i++) {\n            point = vertices[i].clone();\n            point.applyMatrix4(node.matrixWorld);\n\n            points.push(point);\n          }\n        } else if (geometry.isBufferGeometry) {\n          const attribute = geometry.attributes.position;\n\n          if (attribute !== undefined) {\n            for (i = 0, l = attribute.count; i < l; i++) {\n              point = new Vector3();\n\n              point.fromBufferAttribute(attribute, i).applyMatrix4(node.matrixWorld);\n\n              points.push(point);\n            }\n          }\n        }\n      }\n    });\n\n    return this.setFromPoints(points)\n  },\n\n  makeEmpty() {\n    this.faces = [];\n    this.vertices = [];\n\n    return this\n  },\n\n  // Adds a vertex to the 'assigned' list of vertices and assigns it to the given face\n\n  addVertexToFace(vertex, face) {\n    vertex.face = face;\n\n    if (face.outside === null) {\n      this.assigned.append(vertex);\n    } else {\n      this.assigned.insertBefore(face.outside, vertex);\n    }\n\n    face.outside = vertex;\n\n    return this\n  },\n\n  // Removes a vertex from the 'assigned' list of vertices and from the given face\n\n  removeVertexFromFace(vertex, face) {\n    if (vertex === face.outside) {\n      // fix face.outside link\n\n      if (vertex.next !== null && vertex.next.face === face) {\n        // face has at least 2 outside vertices, move the 'outside' reference\n\n        face.outside = vertex.next;\n      } else {\n        // vertex was the only outside vertex that face had\n\n        face.outside = null;\n      }\n    }\n\n    this.assigned.remove(vertex);\n\n    return this\n  },\n\n  // Removes all the visible vertices that a given face is able to see which are stored in the 'assigned' vertext list\n\n  removeAllVerticesFromFace(face) {\n    if (face.outside !== null) {\n      // reference to the first and last vertex of this face\n\n      const start = face.outside;\n      let end = face.outside;\n\n      while (end.next !== null && end.next.face === face) {\n        end = end.next;\n      }\n\n      this.assigned.removeSubList(start, end);\n\n      // fix references\n\n      start.prev = end.next = null;\n      face.outside = null;\n\n      return start\n    }\n  },\n\n  // Removes all the visible vertices that 'face' is able to see\n\n  deleteFaceVertices(face, absorbingFace) {\n    const faceVertices = this.removeAllVerticesFromFace(face);\n\n    if (faceVertices !== undefined) {\n      if (absorbingFace === undefined) {\n        // mark the vertices to be reassigned to some other face\n\n        this.unassigned.appendChain(faceVertices);\n      } else {\n        // if there's an absorbing face try to assign as many vertices as possible to it\n\n        let vertex = faceVertices;\n\n        do {\n          // we need to buffer the subsequent vertex at this point because the 'vertex.next' reference\n          // will be changed by upcoming method calls\n\n          const nextVertex = vertex.next;\n\n          const distance = absorbingFace.distanceToPoint(vertex.point);\n\n          // check if 'vertex' is able to see 'absorbingFace'\n\n          if (distance > this.tolerance) {\n            this.addVertexToFace(vertex, absorbingFace);\n          } else {\n            this.unassigned.append(vertex);\n          }\n\n          // now assign next vertex\n\n          vertex = nextVertex;\n        } while (vertex !== null)\n      }\n    }\n\n    return this\n  },\n\n  // Reassigns as many vertices as possible from the unassigned list to the new faces\n\n  resolveUnassignedPoints(newFaces) {\n    if (this.unassigned.isEmpty() === false) {\n      let vertex = this.unassigned.first();\n\n      do {\n        // buffer 'next' reference, see .deleteFaceVertices()\n\n        const nextVertex = vertex.next;\n\n        let maxDistance = this.tolerance;\n\n        let maxFace = null;\n\n        for (let i = 0; i < newFaces.length; i++) {\n          const face = newFaces[i];\n\n          if (face.mark === Visible) {\n            const distance = face.distanceToPoint(vertex.point);\n\n            if (distance > maxDistance) {\n              maxDistance = distance;\n              maxFace = face;\n            }\n\n            if (maxDistance > 1000 * this.tolerance) break\n          }\n        }\n\n        // 'maxFace' can be null e.g. if there are identical vertices\n\n        if (maxFace !== null) {\n          this.addVertexToFace(vertex, maxFace);\n        }\n\n        vertex = nextVertex;\n      } while (vertex !== null)\n    }\n\n    return this\n  },\n\n  // Computes the extremes of a simplex which will be the initial hull\n\n  computeExtremes() {\n    const min = new Vector3();\n    const max = new Vector3();\n\n    const minVertices = [];\n    const maxVertices = [];\n\n    let i; let l; let\n      j;\n\n    // initially assume that the first vertex is the min/max\n\n    for (i = 0; i < 3; i++) {\n      minVertices[i] = maxVertices[i] = this.vertices[0];\n    }\n\n    min.copy(this.vertices[0].point);\n    max.copy(this.vertices[0].point);\n\n    // compute the min/max vertex on all six directions\n\n    for (i = 0, l = this.vertices.length; i < l; i++) {\n      const vertex = this.vertices[i];\n      const point = vertex.point;\n\n      // update the min coordinates\n\n      for (j = 0; j < 3; j++) {\n        if (point.getComponent(j) < min.getComponent(j)) {\n          min.setComponent(j, point.getComponent(j));\n          minVertices[j] = vertex;\n        }\n      }\n\n      // update the max coordinates\n\n      for (j = 0; j < 3; j++) {\n        if (point.getComponent(j) > max.getComponent(j)) {\n          max.setComponent(j, point.getComponent(j));\n          maxVertices[j] = vertex;\n        }\n      }\n    }\n\n    // use min/max vectors to compute an optimal epsilon\n\n    this.tolerance = 3 * Number.EPSILON * (\n      Math.max(Math.abs(min.x), Math.abs(max.x))\n      + Math.max(Math.abs(min.y), Math.abs(max.y))\n      + Math.max(Math.abs(min.z), Math.abs(max.z))\n    );\n\n    return { min: minVertices, max: maxVertices }\n  },\n\n  // Computes the initial simplex assigning to its faces all the points\n  // that are candidates to form part of the hull\n\n  computeInitialHull: (function () {\n    let line3; let plane; let\n      closestPoint;\n\n    return function computeInitialHull() {\n      if (line3 === undefined) {\n        line3 = new Line3();\n        plane = new Plane();\n        closestPoint = new Vector3();\n      }\n\n      let vertex; const\n        vertices = this.vertices;\n      const extremes = this.computeExtremes();\n      const min = extremes.min;\n      const max = extremes.max;\n\n      let v0; let v1; let v2; let\n        v3;\n      let i; let l; let\n        j;\n\n      // 1. Find the two vertices 'v0' and 'v1' with the greatest 1d separation\n      // (max.x - min.x)\n      // (max.y - min.y)\n      // (max.z - min.z)\n\n      let distance; let\n        maxDistance = 0;\n      let index = 0;\n\n      for (i = 0; i < 3; i++) {\n        distance = max[i].point.getComponent(i) - min[i].point.getComponent(i);\n\n        if (distance > maxDistance) {\n          maxDistance = distance;\n          index = i;\n        }\n      }\n\n      v0 = min[index];\n      v1 = max[index];\n\n      // 2. The next vertex 'v2' is the one farthest to the line formed by 'v0' and 'v1'\n\n      maxDistance = 0;\n      line3.set(v0.point, v1.point);\n\n      for (i = 0, l = this.vertices.length; i < l; i++) {\n        vertex = vertices[i];\n\n        if (vertex !== v0 && vertex !== v1) {\n          line3.closestPointToPoint(vertex.point, true, closestPoint);\n\n          distance = closestPoint.distanceToSquared(vertex.point);\n\n          if (distance > maxDistance) {\n            maxDistance = distance;\n            v2 = vertex;\n          }\n        }\n      }\n\n      // 3. The next vertex 'v3' is the one farthest to the plane 'v0', 'v1', 'v2'\n\n      maxDistance = -1;\n      plane.setFromCoplanarPoints(v0.point, v1.point, v2.point);\n\n      for (i = 0, l = this.vertices.length; i < l; i++) {\n        vertex = vertices[i];\n\n        if (vertex !== v0 && vertex !== v1 && vertex !== v2) {\n          distance = Math.abs(plane.distanceToPoint(vertex.point));\n\n          if (distance > maxDistance) {\n            maxDistance = distance;\n            v3 = vertex;\n          }\n        }\n      }\n\n      const faces = [];\n\n      if (plane.distanceToPoint(v3.point) < 0) {\n        // the face is not able to see the point so 'plane.normal' is pointing outside the tetrahedron\n\n        faces.push(\n          Face.create(v0, v1, v2),\n          Face.create(v3, v1, v0),\n          Face.create(v3, v2, v1),\n          Face.create(v3, v0, v2),\n        );\n\n        // set the twin edge\n\n        for (i = 0; i < 3; i++) {\n          j = (i + 1) % 3;\n\n          // join face[ i ] i > 0, with the first face\n\n          faces[i + 1].getEdge(2).setTwin(faces[0].getEdge(j));\n\n          // join face[ i ] with face[ i + 1 ], 1 <= i <= 3\n\n          faces[i + 1].getEdge(1).setTwin(faces[j + 1].getEdge(0));\n        }\n      } else {\n        // the face is able to see the point so 'plane.normal' is pointing inside the tetrahedron\n\n        faces.push(\n          Face.create(v0, v2, v1),\n          Face.create(v3, v0, v1),\n          Face.create(v3, v1, v2),\n          Face.create(v3, v2, v0),\n        );\n\n        // set the twin edge\n\n        for (i = 0; i < 3; i++) {\n          j = (i + 1) % 3;\n\n          // join face[ i ] i > 0, with the first face\n\n          faces[i + 1].getEdge(2).setTwin(faces[0].getEdge((3 - i) % 3));\n\n          // join face[ i ] with face[ i + 1 ]\n\n          faces[i + 1].getEdge(0).setTwin(faces[j + 1].getEdge(1));\n        }\n      }\n\n      // the initial hull is the tetrahedron\n\n      for (i = 0; i < 4; i++) {\n        this.faces.push(faces[i]);\n      }\n\n      // initial assignment of vertices to the faces of the tetrahedron\n\n      for (i = 0, l = vertices.length; i < l; i++) {\n        vertex = vertices[i];\n\n        if (vertex !== v0 && vertex !== v1 && vertex !== v2 && vertex !== v3) {\n          maxDistance = this.tolerance;\n          let maxFace = null;\n\n          for (j = 0; j < 4; j++) {\n            distance = this.faces[j].distanceToPoint(vertex.point);\n\n            if (distance > maxDistance) {\n              maxDistance = distance;\n              maxFace = this.faces[j];\n            }\n          }\n\n          if (maxFace !== null) {\n            this.addVertexToFace(vertex, maxFace);\n          }\n        }\n      }\n\n      return this\n    }\n  }()),\n\n  // Removes inactive faces\n\n  reindexFaces() {\n    const activeFaces = [];\n\n    for (let i = 0; i < this.faces.length; i++) {\n      const face = this.faces[i];\n\n      if (face.mark === Visible) {\n        activeFaces.push(face);\n      }\n    }\n\n    this.faces = activeFaces;\n\n    return this\n  },\n\n  // Finds the next vertex to create faces with the current hull\n\n  nextVertexToAdd() {\n    // if the 'assigned' list of vertices is empty, no vertices are left. return with 'undefined'\n\n    if (this.assigned.isEmpty() === false) {\n      let eyeVertex; let\n        maxDistance = 0;\n\n      // grap the first available face and start with the first visible vertex of that face\n\n      const eyeFace = this.assigned.first().face;\n      let vertex = eyeFace.outside;\n\n      // now calculate the farthest vertex that face can see\n\n      do {\n        const distance = eyeFace.distanceToPoint(vertex.point);\n\n        if (distance > maxDistance) {\n          maxDistance = distance;\n          eyeVertex = vertex;\n        }\n\n        vertex = vertex.next;\n      } while (vertex !== null && vertex.face === eyeFace)\n\n      return eyeVertex\n    }\n  },\n\n  // Computes a chain of half edges in CCW order called the 'horizon'.\n  // For an edge to be part of the horizon it must join a face that can see\n  // 'eyePoint' and a face that cannot see 'eyePoint'.\n\n  computeHorizon(eyePoint, crossEdge, face, horizon) {\n    // moves face's vertices to the 'unassigned' vertex list\n\n    this.deleteFaceVertices(face);\n\n    face.mark = Deleted;\n\n    let edge;\n\n    if (crossEdge === null) {\n      edge = crossEdge = face.getEdge(0);\n    } else {\n      // start from the next edge since 'crossEdge' was already analyzed\n      // (actually 'crossEdge.twin' was the edge who called this method recursively)\n\n      edge = crossEdge.next;\n    }\n\n    do {\n      const twinEdge = edge.twin;\n      const oppositeFace = twinEdge.face;\n\n      if (oppositeFace.mark === Visible) {\n        if (oppositeFace.distanceToPoint(eyePoint) > this.tolerance) {\n          // the opposite face can see the vertex, so proceed with next edge\n\n          this.computeHorizon(eyePoint, twinEdge, oppositeFace, horizon);\n        } else {\n          // the opposite face can't see the vertex, so this edge is part of the horizon\n\n          horizon.push(edge);\n        }\n      }\n\n      edge = edge.next;\n    } while (edge !== crossEdge)\n\n    return this\n  },\n\n  // Creates a face with the vertices 'eyeVertex.point', 'horizonEdge.tail' and 'horizonEdge.head' in CCW order\n\n  addAdjoiningFace(eyeVertex, horizonEdge) {\n    // all the half edges are created in ccw order thus the face is always pointing outside the hull\n\n    const face = Face.create(eyeVertex, horizonEdge.tail(), horizonEdge.head());\n\n    this.faces.push(face);\n\n    // join face.getEdge( - 1 ) with the horizon's opposite edge face.getEdge( - 1 ) = face.getEdge( 2 )\n\n    face.getEdge(-1).setTwin(horizonEdge.twin);\n\n    return face.getEdge(0) // the half edge whose vertex is the eyeVertex\n  },\n\n  //  Adds 'horizon.length' faces to the hull, each face will be linked with the\n  //  horizon opposite face and the face on the left/right\n\n  addNewFaces(eyeVertex, horizon) {\n    this.newFaces = [];\n\n    let firstSideEdge = null;\n    let previousSideEdge = null;\n\n    for (let i = 0; i < horizon.length; i++) {\n      const horizonEdge = horizon[i];\n\n      // returns the right side edge\n\n      const sideEdge = this.addAdjoiningFace(eyeVertex, horizonEdge);\n\n      if (firstSideEdge === null) {\n        firstSideEdge = sideEdge;\n      } else {\n        // joins face.getEdge( 1 ) with previousFace.getEdge( 0 )\n\n        sideEdge.next.setTwin(previousSideEdge);\n      }\n\n      this.newFaces.push(sideEdge.face);\n      previousSideEdge = sideEdge;\n    }\n\n    // perform final join of new faces\n\n    firstSideEdge.next.setTwin(previousSideEdge);\n\n    return this\n  },\n\n  // Adds a vertex to the hull\n\n  addVertexToHull(eyeVertex) {\n    const horizon = [];\n\n    this.unassigned.clear();\n\n    // remove 'eyeVertex' from 'eyeVertex.face' so that it can't be added to the 'unassigned' vertex list\n\n    this.removeVertexFromFace(eyeVertex, eyeVertex.face);\n\n    this.computeHorizon(eyeVertex.point, null, eyeVertex.face, horizon);\n\n    this.addNewFaces(eyeVertex, horizon);\n\n    // reassign 'unassigned' vertices to the new faces\n\n    this.resolveUnassignedPoints(this.newFaces);\n\n    return this\n  },\n\n  cleanup() {\n    this.assigned.clear();\n    this.unassigned.clear();\n    this.newFaces = [];\n\n    return this\n  },\n\n  compute() {\n    let vertex;\n\n    this.computeInitialHull();\n\n    // add all available vertices gradually to the hull\n\n    while ((vertex = this.nextVertexToAdd()) !== undefined) {\n      this.addVertexToHull(vertex);\n    }\n\n    this.reindexFaces();\n\n    this.cleanup();\n\n    return this\n  },\n\n});\n\n//\n\nfunction Face() {\n  this.normal = new Vector3();\n  this.midpoint = new Vector3();\n  this.area = 0;\n\n  this.constant = 0; // signed distance from face to the origin\n  this.outside = null; // reference to a vertex in a vertex list this face can see\n  this.mark = Visible;\n  this.edge = null;\n}\n\nObject.assign(Face, {\n\n  create(a, b, c) {\n    const face = new Face();\n\n    const e0 = new HalfEdge(a, face);\n    const e1 = new HalfEdge(b, face);\n    const e2 = new HalfEdge(c, face);\n\n    // join edges\n\n    e0.next = e2.prev = e1;\n    e1.next = e0.prev = e2;\n    e2.next = e1.prev = e0;\n\n    // main half edge reference\n\n    face.edge = e0;\n\n    return face.compute()\n  },\n\n});\n\nObject.assign(Face.prototype, {\n\n  getEdge(i) {\n    let edge = this.edge;\n\n    while (i > 0) {\n      edge = edge.next;\n      i--;\n    }\n\n    while (i < 0) {\n      edge = edge.prev;\n      i++;\n    }\n\n    return edge\n  },\n\n  compute: (function () {\n    let triangle;\n\n    return function compute() {\n      if (triangle === undefined) triangle = new Triangle();\n\n      const a = this.edge.tail();\n      const b = this.edge.head();\n      const c = this.edge.next.head();\n\n      triangle.set(a.point, b.point, c.point);\n\n      triangle.getNormal(this.normal);\n      triangle.getMidpoint(this.midpoint);\n      this.area = triangle.getArea();\n\n      this.constant = this.normal.dot(this.midpoint);\n\n      return this\n    }\n  }()),\n\n  distanceToPoint(point) {\n    return this.normal.dot(point) - this.constant\n  },\n\n});\n\n// Entity for a Doubly-Connected Edge List (DCEL).\n\nfunction HalfEdge(vertex, face) {\n  this.vertex = vertex;\n  this.prev = null;\n  this.next = null;\n  this.twin = null;\n  this.face = face;\n}\n\nObject.assign(HalfEdge.prototype, {\n\n  head() {\n    return this.vertex\n  },\n\n  tail() {\n    return this.prev ? this.prev.vertex : null\n  },\n\n  length() {\n    const head = this.head();\n    const tail = this.tail();\n\n    if (tail !== null) {\n      return tail.point.distanceTo(head.point)\n    }\n\n    return -1\n  },\n\n  lengthSquared() {\n    const head = this.head();\n    const tail = this.tail();\n\n    if (tail !== null) {\n      return tail.point.distanceToSquared(head.point)\n    }\n\n    return -1\n  },\n\n  setTwin(edge) {\n    this.twin = edge;\n    edge.twin = this;\n\n    return this\n  },\n\n});\n\n// A vertex as a double linked list node.\n\nfunction VertexNode(point) {\n  this.point = point;\n  this.prev = null;\n  this.next = null;\n  this.face = null; // the face that is able to see this vertex\n}\n\n// A double linked list that contains vertex nodes.\n\nfunction VertexList() {\n  this.head = null;\n  this.tail = null;\n}\n\nObject.assign(VertexList.prototype, {\n\n  first() {\n    return this.head\n  },\n\n  last() {\n    return this.tail\n  },\n\n  clear() {\n    this.head = this.tail = null;\n\n    return this\n  },\n\n  // Inserts a vertex before the target vertex\n\n  insertBefore(target, vertex) {\n    vertex.prev = target.prev;\n    vertex.next = target;\n\n    if (vertex.prev === null) {\n      this.head = vertex;\n    } else {\n      vertex.prev.next = vertex;\n    }\n\n    target.prev = vertex;\n\n    return this\n  },\n\n  // Inserts a vertex after the target vertex\n\n  insertAfter(target, vertex) {\n    vertex.prev = target;\n    vertex.next = target.next;\n\n    if (vertex.next === null) {\n      this.tail = vertex;\n    } else {\n      vertex.next.prev = vertex;\n    }\n\n    target.next = vertex;\n\n    return this\n  },\n\n  // Appends a vertex to the end of the linked list\n\n  append(vertex) {\n    if (this.head === null) {\n      this.head = vertex;\n    } else {\n      this.tail.next = vertex;\n    }\n\n    vertex.prev = this.tail;\n    vertex.next = null; // the tail has no subsequent vertex\n\n    this.tail = vertex;\n\n    return this\n  },\n\n  // Appends a chain of vertices where 'vertex' is the head.\n\n  appendChain(vertex) {\n    if (this.head === null) {\n      this.head = vertex;\n    } else {\n      this.tail.next = vertex;\n    }\n\n    vertex.prev = this.tail;\n\n    // ensure that the 'tail' reference points to the last vertex of the chain\n\n    while (vertex.next !== null) {\n      vertex = vertex.next;\n    }\n\n    this.tail = vertex;\n\n    return this\n  },\n\n  // Removes a vertex from the linked list\n\n  remove(vertex) {\n    if (vertex.prev === null) {\n      this.head = vertex.next;\n    } else {\n      vertex.prev.next = vertex.next;\n    }\n\n    if (vertex.next === null) {\n      this.tail = vertex.prev;\n    } else {\n      vertex.next.prev = vertex.prev;\n    }\n\n    return this\n  },\n\n  // Removes a list of vertices whose 'head' is 'a' and whose 'tail' is b\n\n  removeSubList(a, b) {\n    if (a.prev === null) {\n      this.head = b.next;\n    } else {\n      a.prev.next = b.next;\n    }\n\n    if (b.next === null) {\n      this.tail = a.prev;\n    } else {\n      b.next.prev = a.prev;\n    }\n\n    return this\n  },\n\n  isEmpty() {\n    return this.head === null\n  },\n\n});\n\n/*\n* @author Mugen87 / https://github.com/Mugen87\n*/\n\n\n// ConvexGeometry\n\nfunction ConvexGeometry(points) {\n  Geometry.call(this);\n\n  this.fromBufferGeometry(new ConvexBufferGeometry(points));\n  this.mergeVertices();\n}\n\nConvexGeometry.prototype = Object.create(Geometry.prototype);\nConvexGeometry.prototype.constructor = ConvexGeometry;\n\n// ConvexBufferGeometry\n\nfunction ConvexBufferGeometry(points) {\n  BufferGeometry.call(this);\n\n  // buffers\n\n  const vertices = [];\n  const normals = [];\n\n  // execute QuickHull\n\n  if (QuickHull === undefined) {\n    console.error('THREE.ConvexBufferGeometry: ConvexBufferGeometry relies on THREE.QuickHull');\n  }\n\n  const quickHull = new QuickHull().setFromPoints(points);\n\n  // generate vertices and normals\n\n  const faces = quickHull.faces;\n\n  for (let i = 0; i < faces.length; i++) {\n    const face = faces[i];\n    let edge = face.edge;\n\n    // we move along a doubly-connected edge list to access all face points (see HalfEdge docs)\n\n    do {\n      const point = edge.head().point;\n\n      vertices.push(point.x, point.y, point.z);\n      normals.push(face.normal.x, face.normal.y, face.normal.z);\n\n      edge = edge.next;\n    } while (edge !== face.edge)\n  }\n\n  // build geometry\n\n  this.addAttribute('position', new Float32BufferAttribute(vertices, 3));\n  this.addAttribute('normal', new Float32BufferAttribute(normals, 3));\n}\n\nConvexBufferGeometry.prototype = Object.create(BufferGeometry.prototype);\nConvexBufferGeometry.prototype.constructor = ConvexBufferGeometry;\n\n/**\n * This is the base class for `MorphologyPolyline` and `MorphologyPolycylinder`.\n * It handles the common features, mainly related to soma creation\n */\nclass MorphologyShapeBase extends Object3D {\n  /**\n   * @constructor\n   * Builds a moprho as a polyline\n   * @param {Object} morpho - raw object that describes a morphology (usually straight from a JSON file)\n   * @param {object} options - the option object\n   * @param {Number} options.color - the color of the polyline.\n   * If provided, the whole neurone will be of the given color, if not provided,\n   * the axon will be green, the basal dendrite will be red and the apical dendrite will be green\n   */\n  constructor(morpho, options) {\n    super();\n\n    this.userData.morphologyName = options.name;\n    this._pointToTarget = null;\n    this._morpho = morpho;\n\n    // fetch the optional color\n    const color = Tools.getOption(options, 'color', null);\n\n    // simple color lookup, so that every section type is shown in a different color\n    this._sectionColors = {\n      axon: color || 0x1111ff,\n      basal_dendrite: color || 0xff1111,\n      apical_dendrite: color || 0xf442ad,\n    };\n  }\n\n\n  /**\n   * @private\n   * The method to build a soma mesh using the 'default' way, aka using simply the\n   * data from the soma.\n   * @return {THREE.Mesh} the soma mesh\n   */\n  _buildSomaDefault() {\n    const soma = this._morpho.getSoma();\n    const somaPoints = soma.getPoints();\n\n    // case when soma is a single point\n    if (somaPoints.length === 1) {\n      console.log('single point soma');\n      const somaSphere = new Mesh(\n        new SphereGeometry(soma.getRadius(), 32, 32),\n        new MeshPhongMaterial({ color: 0x555555, transparent: false, opacity: 1 }),\n      );\n\n      somaSphere.position.set(somaPoints[0][0], somaPoints[0][1], somaPoints[0][2]);\n      return somaSphere\n\n    // this is a 3-point soma, probably colinear\n    } if (somaPoints.length === 3) {\n      console.log('3 points soma');\n      /*\n      let radius = soma.getRadius()\n      let mat = new THREE.MeshPhongMaterial( {color: 0x000000, transparent: true, opacity:0.3} )\n\n      let c1 = Tools.makeCylinder(\n        new THREE.Vector3(...somaPoints[0]),\n        new THREE.Vector3(...somaPoints[1]),\n        radius,\n        radius,\n        false,\n        mat\n      )\n\n      let c2 = Tools.makeCylinder(\n        new THREE.Vector3(...somaPoints[1]),\n        new THREE.Vector3(...somaPoints[2]),\n        radius,\n        radius,\n        false,\n        mat\n      )\n\n      let somaCyl = new THREE.Object3D()\n      somaCyl.add(c1)\n      somaCyl.add(c2)\n      return somaCyl\n      */\n\n      const somaSphere = new Mesh(\n        new SphereGeometry(soma.getRadius(), 32, 32),\n        new MeshPhongMaterial({ color: 0x555555, transparent: false, opacity: 1 }),\n      );\n\n      somaSphere.position.set(somaPoints[0][0], somaPoints[0][1], somaPoints[0][2]);\n      return somaSphere\n\n\n    // when soma is multiple points\n    } if (somaPoints.length > 1) {\n      console.log('many point soma');\n      // compute the average of the points\n      const center = soma.getCenter();\n      const centerV = new Vector3(center[0], center[1], center[2]);\n      const geometry = new Geometry();\n\n      for (let i = 0; i < somaPoints.length; i += 1) {\n        geometry.vertices.push(\n          new Vector3(somaPoints[i][0], somaPoints[i][1], somaPoints[i][2]),\n          new Vector3(\n            somaPoints[(i + 1) % somaPoints.length][0],\n            somaPoints[(i + 1) % somaPoints.length][1],\n            somaPoints[(i + 1) % somaPoints.length][2],\n          ),\n          centerV,\n        );\n        geometry.faces.push(new Face3(3 * i, 3 * i + 1, 3 * i + 2));\n      }\n\n      const somaMesh = new Mesh(geometry, new MeshBasicMaterial({\n        color: 0x555555,\n        transparent: false,\n        opacity: 1,\n        side: DoubleSide,\n      }));\n      return somaMesh\n    }\n    console.warn('No soma defined');\n    return null\n  }\n\n\n  /**\n   * @private\n   * Here we build a soma convex polygon based on the 1st points of the orphan\n   * sections + the points available in the soma description\n   * @return {THREE.Mesh} the soma mesh\n   */\n  _buildSomaFromOrphanSections() {\n    const somaPoints = this._morpho.getSoma().getPoints();\n    let somaMesh = null;\n\n    try {\n      const somaPolygonPoints = this._morpho.getNeuriteStarts().map(p => new Vector3(...p));\n\n      // adding the points of the soma (adds values mostly if we a soma polygon)\n      for (let i = 0; i < somaPoints.length; i += 1) {\n        somaPolygonPoints.push(new Vector3(...somaPoints[i]));\n      }\n\n      const geometry = new ConvexBufferGeometry(somaPolygonPoints);\n      const material = new MeshPhongMaterial({\n        color: 0x555555,\n        transparent: true,\n        opacity: 0.7,\n        side: DoubleSide,\n      });\n      somaMesh = new Mesh(geometry, material);\n      return somaMesh\n    } catch (e) {\n      console.warn('Attempted to build a soma from orphan section points but failed. Back to the regular version.');\n      return this._buildSomaDefault()\n    }\n  }\n\n\n  /**\n   * @private\n   * Builds the soma. The type of soma depends on the option\n   * @param {Object} options - The option object\n   * @param {String|null} options.somaMode - \"default\" to display only the soma data or \"fromOrphanSections\" to build a soma using the orphan sections\n   */\n  _buildSoma(options) {\n    this._pointToTarget = this._morpho.getSoma().getCenter();\n    // can be 'default' or 'fromOrphanSections'\n    const buildMode = Tools.getOption(options, 'somaMode', null);\n    let somaMesh = null;\n\n    if (buildMode === 'fromOrphanSections') {\n      somaMesh = this._buildSomaFromOrphanSections();\n    } else {\n      somaMesh = this._buildSomaDefault();\n    }\n\n    return somaMesh\n  }\n\n\n  /**\n   * Get the point to target when using the method lookAt. If the soma is valid,\n   * this will be the center of the soma. If no soma is valid, it will be the\n   * center of the box\n   * @return {Array} center with the shape [x: Number, y: Number, z: Number]\n   */\n  getTargetPoint() {\n    if (this._pointToTarget) {\n      // rotate this because Allen needs it (just like the sections)\n      const lookat = new Vector3(this._pointToTarget[0], this._pointToTarget[1], this._pointToTarget[2]);\n      lookat.applyAxisAngle(new Vector3(1, 0, 0), Math.PI);\n      lookat.applyAxisAngle(new Vector3(0, 1, 0), Math.PI);\n      return lookat\n    }\n    const center = new Vector3();\n    this.box.getCenter(center);\n    return center\n  }\n\n\n  /**\n   * Get the morphology object tied to _this_ mesh\n   * @return {morphologycorejs.Morphology}\n   */\n  getMorphology() {\n    return this._morpho\n  }\n}\n\n/**\n * The MorphologyPolyline is the simplest 3D representation of a morphology, using\n * simple polylines.\n * Compared to its cylinder-based alternative (MorphologyPolycylinder), this one\n * is more suitable for displaying several morphologies (up to maybe a hundred,\n * depending on length and machine performance)\n * MorphologyPolyline extends from THREE.Object so that it's easy to integrate.\n * It's constructor\n */\nclass MorphologyPolyline extends MorphologyShapeBase {\n  /**\n   * @constructor\n   * Builds a moprho as a polyline\n   * @param {Morphology} morpho - raw object that describes a morphology (usually straight from a JSON file)\n   * @param {object} options - the option object\n   * @param {Number} options.color - the color of the polyline.\n   * If provided, the whole neurone will be of the given color, if not provided,\n   * the axon will be green, the basal dendrite will be red and the apical dendrite will be green\n   */\n  constructor(morpho, options) {\n    super(morpho, options);\n    const sections = this._morpho.getArrayOfSections();\n\n    // creating a polyline for each section\n    for (let i = 0; i < sections.length; i += 1) {\n      const sectionPolyline = this._buildSection(sections[i]);\n      this.add(sectionPolyline);\n    }\n\n    // adding the soma mesh, but sometimes, there is no soma\n    const somaData = this._morpho.getSoma();\n    if (somaData) {\n      const somaShape = this._buildSoma(options);\n      this.add(somaShape);\n    }\n\n    // this is because the Allen ref is not oriented the same way as WebGL\n    this.rotateX(Math.PI);\n    this.rotateY(Math.PI);\n\n    // compute the bounding box, useful for further camera targeting\n    this.box = new Box3().setFromObject(this);\n  }\n\n\n  /**\n   * @private\n   * Builds a single section from a raw segment description and returns it.\n   * A section is usually composed of multiple segments\n   * @param {Section} section - sub part of the morpho raw object thar deals with a single section\n   * @return {THREE.Line} the constructed polyline\n   */\n  _buildSection(section) {\n    const material = new LineBasicMaterial({\n      color: this._sectionColors[section.getTypename()],\n    });\n\n    const sectionPoints = section.getPoints();\n    const geometry = new Geometry();\n\n    for (let i = 0; i < sectionPoints.length; i += 1) {\n      geometry.vertices.push(new Vector3(\n        sectionPoints[i][0], // x\n        sectionPoints[i][1], // y\n        sectionPoints[i][2], // z\n      ));\n    }\n\n    const line = new Line(geometry, material);\n\n    // adding some metadata as it can be useful for raycasting\n    line.name = section.getId();\n    line.userData.sectionId = section.getId();\n    line.userData.typevalue = section.getTypevalue();\n    line.userData.typename = section.getTypename();\n\n    return line\n  }\n}\n\n/*\n * @author mrdoob / http://mrdoob.com/\n */\n\nconst BufferGeometryUtils = {\n\n  computeTangents(geometry) {\n    const index = geometry.index;\n    const attributes = geometry.attributes;\n\n    // based on http://www.terathon.com/code/tangent.html\n    // (per vertex tangents)\n\n    if (index === null\n       || attributes.position === undefined\n       || attributes.normal === undefined\n       || attributes.uv === undefined) {\n      console.warn('THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()');\n      return\n    }\n\n    const indices = index.array;\n    const positions = attributes.position.array;\n    const normals = attributes.normal.array;\n    const uvs = attributes.uv.array;\n\n    const nVertices = positions.length / 3;\n\n    if (attributes.tangent === undefined) {\n      geometry.addAttribute('tangent', new BufferAttribute(new Float32Array(4 * nVertices), 4));\n    }\n\n    const tangents = attributes.tangent.array;\n\n    const tan1 = []; const\n      tan2 = [];\n\n    for (var i = 0; i < nVertices; i++) {\n      tan1[i] = new Vector3();\n      tan2[i] = new Vector3();\n    }\n\n    const vA = new Vector3();\n\n\n    const vB = new Vector3();\n\n\n    const vC = new Vector3();\n\n\n    const uvA = new Vector2();\n\n\n    const uvB = new Vector2();\n\n\n    const uvC = new Vector2();\n\n\n    const sdir = new Vector3();\n\n\n    const tdir = new Vector3();\n\n    function handleTriangle(a, b, c) {\n      vA.fromArray(positions, a * 3);\n      vB.fromArray(positions, b * 3);\n      vC.fromArray(positions, c * 3);\n\n      uvA.fromArray(uvs, a * 2);\n      uvB.fromArray(uvs, b * 2);\n      uvC.fromArray(uvs, c * 2);\n\n      const x1 = vB.x - vA.x;\n      const x2 = vC.x - vA.x;\n\n      const y1 = vB.y - vA.y;\n      const y2 = vC.y - vA.y;\n\n      const z1 = vB.z - vA.z;\n      const z2 = vC.z - vA.z;\n\n      const s1 = uvB.x - uvA.x;\n      const s2 = uvC.x - uvA.x;\n\n      const t1 = uvB.y - uvA.y;\n      const t2 = uvC.y - uvA.y;\n\n      const r = 1.0 / (s1 * t2 - s2 * t1);\n\n      sdir.set(\n        (t2 * x1 - t1 * x2) * r,\n        (t2 * y1 - t1 * y2) * r,\n        (t2 * z1 - t1 * z2) * r,\n      );\n\n      tdir.set(\n        (s1 * x2 - s2 * x1) * r,\n        (s1 * y2 - s2 * y1) * r,\n        (s1 * z2 - s2 * z1) * r,\n      );\n\n      tan1[a].add(sdir);\n      tan1[b].add(sdir);\n      tan1[c].add(sdir);\n\n      tan2[a].add(tdir);\n      tan2[b].add(tdir);\n      tan2[c].add(tdir);\n    }\n\n    let groups = geometry.groups;\n\n    if (groups.length === 0) {\n      groups = [{\n        start: 0,\n        count: indices.length,\n      }];\n    }\n\n    for (var i = 0, il = groups.length; i < il; ++i) {\n      var group = groups[i];\n\n      var start = group.start;\n      var count = group.count;\n\n      for (var j = start, jl = start + count; j < jl; j += 3) {\n        handleTriangle(\n          indices[j + 0],\n          indices[j + 1],\n          indices[j + 2],\n        );\n      }\n    }\n\n    const tmp = new Vector3(); const\n      tmp2 = new Vector3();\n    const n = new Vector3(); const\n      n2 = new Vector3();\n    let w; let t; let\n      test;\n\n    function handleVertex(v) {\n      n.fromArray(normals, v * 3);\n      n2.copy(n);\n\n      t = tan1[v];\n\n      // Gram-Schmidt orthogonalize\n\n      tmp.copy(t);\n      tmp.sub(n.multiplyScalar(n.dot(t))).normalize();\n\n      // Calculate handedness\n\n      tmp2.crossVectors(n2, t);\n      test = tmp2.dot(tan2[v]);\n      w = (test < 0.0) ? -1.0 : 1.0;\n\n      tangents[v * 4] = tmp.x;\n      tangents[v * 4 + 1] = tmp.y;\n      tangents[v * 4 + 2] = tmp.z;\n      tangents[v * 4 + 3] = w;\n    }\n\n    for (var i = 0, il = groups.length; i < il; ++i) {\n      var group = groups[i];\n\n      var start = group.start;\n      var count = group.count;\n\n      for (var j = start, jl = start + count; j < jl; j += 3) {\n        handleVertex(indices[j + 0]);\n        handleVertex(indices[j + 1]);\n        handleVertex(indices[j + 2]);\n      }\n    }\n  },\n\n  /**\n   * @param  {Array<THREE.BufferGeometry>} geometries\n   * @return {THREE.BufferGeometry}\n   */\n  mergeBufferGeometries(geometries, useGroups) {\n    const isIndexed = geometries[0].index !== null;\n\n    const attributesUsed = new Set(Object.keys(geometries[0].attributes));\n    const morphAttributesUsed = new Set(Object.keys(geometries[0].morphAttributes));\n\n    const attributes = {};\n    const morphAttributes = {};\n\n    const mergedGeometry = new BufferGeometry();\n\n    let offset = 0;\n\n    for (var i = 0; i < geometries.length; ++i) {\n      const geometry = geometries[i];\n\n      // ensure that all geometries are indexed, or none\n\n      if (isIndexed !== (geometry.index !== null)) return null\n\n      // gather attributes, exit early if they're different\n\n      for (var name in geometry.attributes) {\n        if (!attributesUsed.has(name)) return null\n\n        if (attributes[name] === undefined) attributes[name] = [];\n\n        attributes[name].push(geometry.attributes[name]);\n      }\n\n      // gather morph attributes, exit early if they're different\n\n      for (var name in geometry.morphAttributes) {\n        if (!morphAttributesUsed.has(name)) return null\n\n        if (morphAttributes[name] === undefined) morphAttributes[name] = [];\n\n        morphAttributes[name].push(geometry.morphAttributes[name]);\n      }\n\n      // gather .userData\n\n      mergedGeometry.userData.mergedUserData = mergedGeometry.userData.mergedUserData || [];\n      mergedGeometry.userData.mergedUserData.push(geometry.userData);\n\n      if (useGroups) {\n        var count;\n\n        if (isIndexed) {\n          count = geometry.index.count;\n        } else if (geometry.attributes.position !== undefined) {\n          count = geometry.attributes.position.count;\n        } else {\n          return null\n        }\n\n        mergedGeometry.addGroup(offset, count, i);\n\n        offset += count;\n      }\n    }\n\n    // merge indices\n\n    if (isIndexed) {\n      let indexOffset = 0;\n      const mergedIndex = [];\n\n      for (var i = 0; i < geometries.length; ++i) {\n        const index = geometries[i].index;\n\n        for (var j = 0; j < index.count; ++j) {\n          mergedIndex.push(index.getX(j) + indexOffset);\n        }\n\n        indexOffset += geometries[i].attributes.position.count;\n      }\n\n      mergedGeometry.setIndex(mergedIndex);\n    }\n\n    // merge attributes\n\n    for (var name in attributes) {\n      const mergedAttribute = this.mergeBufferAttributes(attributes[name]);\n\n      if (!mergedAttribute) return null\n\n      mergedGeometry.addAttribute(name, mergedAttribute);\n    }\n\n    // merge morph attributes\n\n    for (var name in morphAttributes) {\n      const numMorphTargets = morphAttributes[name][0].length;\n\n      if (numMorphTargets === 0) break\n\n      mergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\n      mergedGeometry.morphAttributes[name] = [];\n\n      for (var i = 0; i < numMorphTargets; ++i) {\n        const morphAttributesToMerge = [];\n\n        for (var j = 0; j < morphAttributes[name].length; ++j) {\n          morphAttributesToMerge.push(morphAttributes[name][j][i]);\n        }\n\n        const mergedMorphAttribute = this.mergeBufferAttributes(morphAttributesToMerge);\n\n        if (!mergedMorphAttribute) return null\n\n        mergedGeometry.morphAttributes[name].push(mergedMorphAttribute);\n      }\n    }\n\n    return mergedGeometry\n  },\n\n  /**\n   * @param {Array<THREE.BufferAttribute>} attributes\n   * @return {THREE.BufferAttribute}\n   */\n  mergeBufferAttributes(attributes) {\n    let TypedArray;\n    let itemSize;\n    let normalized;\n    let arrayLength = 0;\n\n    for (var i = 0; i < attributes.length; ++i) {\n      const attribute = attributes[i];\n\n      if (attribute.isInterleavedBufferAttribute) return null\n\n      if (TypedArray === undefined) TypedArray = attribute.array.constructor;\n      if (TypedArray !== attribute.array.constructor) return null\n\n      if (itemSize === undefined) itemSize = attribute.itemSize;\n      if (itemSize !== attribute.itemSize) return null\n\n      if (normalized === undefined) normalized = attribute.normalized;\n      if (normalized !== attribute.normalized) return null\n\n      arrayLength += attribute.array.length;\n    }\n\n    const array = new TypedArray(arrayLength);\n    let offset = 0;\n\n    for (var i = 0; i < attributes.length; ++i) {\n      array.set(attributes[i].array, offset);\n\n      offset += attributes[i].array.length;\n    }\n\n    return new BufferAttribute(array, itemSize, normalized)\n  },\n\n};\n\n/**\n * The MorphologyPolycylinder is a tubular representation of a morphology, using cylinders.\n * this alternative to MorphologyPolyline is heavier on CPU and GPU so is more made when\n * displaying a small number of morphologies.\n * MorphologyPolycylinder extends from THREE.Object so that it's easy to integrate.\n * It's constructor\n */\nclass MorphologyPolycylinder extends MorphologyShapeBase {\n  /**\n   * @constructor\n   * Builds a moprho as a polyline\n   * @param {Object} morpho - raw object that describes a morphology (usually straight from a JSON file)\n   * @param {object} options - the option object\n   * @param {Number} options.color - the color of the polyline.\n   * If provided, the whole neurone will be of the given color, if not provided,\n   * the axon will be green, the basal dendrite will be red and the apical dendrite will be green\n   */\n  constructor(morpho, options) {\n    super(morpho, options);\n\n    this._sectionTubeMaterials = {\n      axon: new MeshPhongMaterial({ color: this._sectionColors.axon }),\n      basal_dendrite: new MeshPhongMaterial({ color: this._sectionColors.basal_dendrite }),\n      apical_dendrite: new MeshPhongMaterial({ color: this._sectionColors.apical_dendrite }),\n    };\n\n    const sections = this._morpho.getArrayOfSections();\n\n    // creating a polyline for each section\n    for (let i = 0; i < sections.length; i += 1) {\n      const section = this._buildSection(sections[i]);\n      if (section) this.add(section);\n    }\n\n    // adding the soma, but sometimes, there is no soma data...\n    const somaData = this._morpho.getSoma();\n    if (somaData) {\n      const somaShape = this._buildSoma(options);\n      this.add(somaShape);\n    }\n\n    // this is because the Allen ref is not oriented the same way as WebGL\n    this.rotateX(Math.PI);\n    this.rotateY(Math.PI);\n\n    // compute the bounding box, useful for further camera targeting\n    this.box = new Box3().setFromObject(this);\n  }\n\n\n  /**\n   * @private\n   * Builds a single section from a raw segment description and returns it.\n   * A section is usually composed of multiple segments\n   * @param {Section} sectionDescription - sub part of the morpho raw object thar deals with a single section\n   * @return {THREE.Line} the constructed polyline\n   */\n  _buildSection(section) {\n    console.log('section.getTypename()', section.getTypename());\n    // if (section.getTypename() === 'soma') {\n    //   console.log('soma section!')\n    //   return null\n    // }\n\n    const material = this._sectionTubeMaterials[section.getTypename()];\n    const sectionPoints = section.getPoints();\n    const sectionRadius = section.getRadiuses();\n    const parentSection = section.getParent();\n    // Since the first point is the last point from previous section,\n    // if the previous section is a soma, then we don't want the section\n    // to start with the same radius as the soma, so we just skip the point\n    const startIndex = parentSection && parentSection.getTypename() === 'soma' ? 1 : 0;\n\n    if ((sectionPoints.length - startIndex) < 2) return null\n\n    const arrayOfGeom = [];\n\n    for (let i = startIndex; i < sectionPoints.length - 1; i += 1) {\n      const cyl = Tools.makeCylinder(\n        new Vector3( // vStart\n          sectionPoints[i][0],\n          sectionPoints[i][1],\n          sectionPoints[i][2],\n        ),\n        new Vector3( // vEnd\n          sectionPoints[i + 1][0],\n          sectionPoints[i + 1][1],\n          sectionPoints[i + 1][2],\n        ),\n        sectionRadius[i], // rStart\n        sectionRadius[i + 1], // rEnd\n        false, // openEnd\n      );\n      arrayOfGeom.push(cyl);\n    }\n\n    // merging the buffer geometries to make things faster\n    const sectionGeom = BufferGeometryUtils.mergeBufferGeometries(arrayOfGeom);\n    const sectionMesh = new Mesh(sectionGeom, material);\n\n    // adding some metadata as it can be useful for raycasting\n    sectionMesh.name = section.getId();\n    sectionMesh.userData.sectionId = section.getId();\n    sectionMesh.userData.typevalue = section.getTypevalue();\n    sectionMesh.userData.typename = section.getTypename();\n\n    return sectionMesh\n  }\n}\n\n// inspired by https://github.com/mrdoob/three.js/blob/master/src/geometries/WormGeometry.js\n\n\n\n\n// WormBufferGeometry\n\nclass WormBufferGeometry extends BufferGeometry {\n  constructor(positions, radii, radialSegments = 32) {\n    super();\n    this.type = 'WormBufferGeometry';\n    const tubularSegments = positions.length - 1;\n\n    const frames = WormBufferGeometry.computeFrenetFrames(positions);\n    // expose internals\n\n    this.tangents = frames.tangents;\n    this.normals = frames.normals;\n    this.binormals = frames.binormals;\n\n    // helper variables\n    const vertex = new Vector3();\n    const normal = new Vector3();\n    const uv = new Vector2();\n    let P = new Vector3();\n\n    // buffer\n    const vertices = [];\n    const normals = [];\n    const uvs = [];\n    const indices = [];\n\n    // create buffer data\n\n    generateBufferData();\n\n    // build geometry\n    this.setIndex(indices);\n    this.addAttribute('position', new Float32BufferAttribute(vertices, 3));\n    this.addAttribute('normal', new Float32BufferAttribute(normals, 3));\n    this.addAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n    // functions\n\n    function generateBufferData() {\n      for (let i = 0; i < positions.length; i += 1) {\n        generateSegment(i);\n      }\n\n      // uvs are generated in a separate function.\n      // this makes it easy compute correct values for closed geometries\n      generateUVs();\n\n      // finally create faces\n      generateIndices();\n    }\n\n\n    function generateSegment(i) {\n      // we use getPointAt to sample evenly distributed points from the given path\n\n      // P = path.getPointAt( i / tubularSegments, P );\n      P = positions[i];\n\n      // retrieve corresponding normal and binormal\n      const N = frames.normals[i];\n      const B = frames.binormals[i];\n\n      // generate normals and vertices for the current segment\n      for (let j = 0; j <= radialSegments; j += 1) {\n        const v = j / radialSegments * Math.PI * 2;\n        const sin = Math.sin(v);\n        const cos = -Math.cos(v);\n\n        // normal\n        normal.x = (cos * N.x + sin * B.x);\n        normal.y = (cos * N.y + sin * B.y);\n        normal.z = (cos * N.z + sin * B.z);\n        normal.normalize();\n\n        normals.push(normal.x, normal.y, normal.z);\n\n        // vertex\n        vertex.x = P.x + radii[i] * normal.x;\n        vertex.y = P.y + radii[i] * normal.y;\n        vertex.z = P.z + radii[i] * normal.z;\n        vertices.push(vertex.x, vertex.y, vertex.z);\n      }\n    }\n\n\n    function generateIndices() {\n      for (let j = 1; j <= tubularSegments; j += 1) {\n        for (let i = 1; i <= radialSegments; i += 1) {\n          const a = (radialSegments + 1) * (j - 1) + (i - 1);\n          const b = (radialSegments + 1) * j + (i - 1);\n          const c = (radialSegments + 1) * j + i;\n          const d = (radialSegments + 1) * (j - 1) + i;\n\n          // faces\n          indices.push(a, b, d);\n          indices.push(b, c, d);\n        }\n      }\n    }\n\n\n    function generateUVs() {\n      for (let i = 0; i <= tubularSegments; i += 1) {\n        for (let j = 0; j <= radialSegments; j += 1) {\n          uv.x = i / tubularSegments;\n          uv.y = j / radialSegments;\n          uvs.push(uv.x, uv.y);\n        }\n      }\n    }\n  } // end constructor\n\n\n  static computeFrenetFrames(positions) {\n    const normals = [new Vector3()];\n    const binormals = [new Vector3()];\n\n    const tangents = positions.map((pos, i) => {\n      // general cases\n      let p1i = i - 1;\n      let p2i = i + 1;\n\n      // exceptions on both ends\n      if (i === 0) { // at start\n        p1i = 0;\n      } else if (i === positions.length - 1) { // at end\n        p2i = positions.length - 1;\n      }\n\n      const p1 = positions[p1i];\n      const p2 = positions[p2i];\n      const tangent = new Vector3();\n      tangent.copy(p2).sub(p1).normalize();\n      return tangent\n    });\n\n    // some temporary data holders\n    const normal = new Vector3();\n    const vec = new Vector3();\n    const mat = new Matrix4();\n\n    // the first point has a special treatment\n    let min = Number.MAX_VALUE;\n    const tx = Math.abs(tangents[0].x);\n    const ty = Math.abs(tangents[0].y);\n    const tz = Math.abs(tangents[0].z);\n\n    if (tx <= min) {\n      min = tx;\n      normal.set(1, 0, 0);\n    }\n\n    if (ty <= min) {\n      min = ty;\n      normal.set(0, 1, 0);\n    }\n\n    if (tz <= min) {\n      normal.set(0, 0, 1);\n    }\n\n    vec.crossVectors(tangents[0], normal).normalize();\n    normals[0].crossVectors(tangents[0], vec);\n    binormals[0].crossVectors(tangents[0], normals[0]);\n\n    // Then compute for the other points\n    for (let i = 1; i < positions.length; i += 1) {\n      normals[i] = normals[i - 1].clone();\n      binormals[i] = binormals[i - 1].clone();\n      vec.crossVectors(tangents[i - 1], tangents[i]);\n\n      if (vec.length() > Number.EPSILON) {\n        vec.normalize();\n        const theta = Math.acos(Math.max(-1, Math.min(1, tangents[i - 1].dot(tangents[i]))));\n        normals[i].applyMatrix4(mat.makeRotationAxis(vec, theta));\n      }\n      binormals[i].crossVectors(tangents[i], normals[i]);\n    }\n\n    return {\n      tangents,\n      normals,\n      binormals,\n    }\n  }\n\n}\n\n/*\n (c) 2013, Vladimir Agafonkin\n Simplify.js, a high-performance JS polyline simplification library\n mourner.github.io/simplify-js\n*/\n\n\n// to suit your point format, run search/replace for '[0]', '[1]' and '[2]';\n// (configurability would draw significant performance overhead)\n\n// square distance between 2 points\nfunction getSquareDistance(p1, p2) {\n\n    var dx = p1[0] - p2[0],\n        dy = p1[1] - p2[1],\n        dz = p1[2] - p2[2];\n\n    return dx * dx + dy * dy + dz * dz;\n}\n\n// square distance from a point to a segment\nfunction getSquareSegmentDistance(p, p1, p2) {\n\n    var x = p1[0],\n        y = p1[1],\n        z = p1[2],\n\n        dx = p2[0] - x,\n        dy = p2[1] - y,\n        dz = p2[2] - z;\n\n    if (dx !== 0 || dy !== 0 || dz !== 0) {\n\n        var t = ((p[0] - x) * dx + (p[1] - y) * dy + (p[2] - z) * dz) /\n                (dx * dx + dy * dy + dz * dz);\n\n        if (t > 1) {\n            x = p2[0];\n            y = p2[1];\n            z = p2[2];\n\n        } else if (t > 0) {\n            x += dx * t;\n            y += dy * t;\n            z += dz * t;\n        }\n    }\n\n    dx = p[0] - x;\n    dy = p[1] - y;\n    dz = p[2] - z;\n\n    return dx * dx + dy * dy + dz * dz;\n}\n// the rest of the code doesn't care for the point format\n\n// basic distance-based simplification\nfunction simplifyRadialDistance(points, sqTolerance) {\n\n    var prevPoint = points[0],\n        newPoints = [prevPoint],\n        point;\n\n    for (var i = 1, len = points.length; i < len; i++) {\n        point = points[i];\n\n        if (getSquareDistance(point, prevPoint) > sqTolerance) {\n            newPoints.push(point);\n            prevPoint = point;\n        }\n    }\n\n    if (prevPoint !== point) {\n        newPoints.push(point);\n    }\n\n    return newPoints;\n}\n\n// simplification using optimized Douglas-Peucker algorithm with recursion elimination\nfunction simplifyDouglasPeucker(points, sqTolerance) {\n\n    var len = points.length,\n        MarkerArray = typeof Uint8Array !== 'undefined' ? Uint8Array : Array,\n        markers = new MarkerArray(len),\n\n        first = 0,\n        last = len - 1,\n\n        stack = [],\n        newPoints = [],\n\n        i, maxSqDist, sqDist, index;\n\n    markers[first] = markers[last] = 1;\n\n    while (last) {\n\n        maxSqDist = 0;\n\n        for (i = first + 1; i < last; i++) {\n            sqDist = getSquareSegmentDistance(points[i], points[first], points[last]);\n\n            if (sqDist > maxSqDist) {\n                index = i;\n                maxSqDist = sqDist;\n            }\n        }\n\n        if (maxSqDist > sqTolerance) {\n            markers[index] = 1;\n            stack.push(first, index, index, last);\n        }\n\n        last = stack.pop();\n        first = stack.pop();\n    }\n\n    for (i = 0; i < len; i++) {\n        if (markers[i]) {\n            newPoints.push(points[i]);\n        }\n    }\n\n    // const firstOriginal = points[0]\n    // const firstSimplified = newPoints[0]\n    // if (firstOriginal[0] === firstSimplified[0] \n    // && firstOriginal[1] === firstSimplified[1]\n    // && firstOriginal[2] === firstSimplified[2] ) {\n    //   console.log('SAME')\n    // } else {\n    //   console.log('NOT SAME')\n    // }\n    // newPoints.unshift(points[0])\n    return newPoints;\n}\n\n// both algorithms combined for awesome performance\nfunction simplify(points, tolerance, highestQuality) {\n\n    var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;\n\n    points = highestQuality ? points : simplifyRadialDistance(points, sqTolerance);\n    points = simplifyDouglasPeucker(points, sqTolerance);\n\n    return points;\n}\n\n// const CELL_PART_NAMES = {\n//   AXON: 'axon',\n//   BASAL_DENDRITE: 'basal_dendrite',\n//   APICAL_DENDRITE: 'apical_dendrite',\n// }\n\n\n/**\n * This is the base class for `MorphologyPolyline` and `MorphologyPolycylinder`.\n * It handles the common features, mainly related to soma creation\n */\nclass MorphologyHybrid extends Object3D {\n  /**\n   * @constructor\n   * Builds a moprho as a polyline\n   * @param {Object} morpho - raw object that describes a morphology (usually straight from a JSON file)\n   * @param {object} options - the option object\n   * @param {Number} options.color - the color of the polyline.\n   * If provided, the whole neurone will be of the given color, if not provided,\n   * the axon will be green, the basal dendrite will be red and the apical dendrite will be green\n   */\n  constructor(morpho, options = {}) {\n    super();\n\n    this._smoothSections = new Object3D();\n    this._polylineSections = new Object3D();\n    this._polylineSimpleSections = new Object3D();\n    this._boundingSphere = null;\n\n    this.add(this._polylineSections);\n    this.add(this._smoothSections);\n    this.add(this._polylineSimpleSections);\n\n    this.userData.morphologyName = options.name;\n    this._morpho = morpho;\n    this._pointToTarget = this._morpho.getSoma().getCenter();\n    \n\n    // fetch the optional color\n    const color = options.color ? options.color : null;\n\n    // simple color lookup, so that every section type is shown in a different color\n    this._sectionColors = {\n      soma: color || 0x888888,\n      axon: color || 0x1111ff,\n      basal_dendrite: color || 0xff1111,\n      apical_dendrite: color || 0xf442ad,\n    };\n\n    const shininess = 100;\n    this._sectionTubeMaterials = {\n      soma: new MeshPhongMaterial({ color: this._sectionColors.soma, transparent: true, side: DoubleSide, shininess }),\n      axon: new MeshPhongMaterial({ color: this._sectionColors.axon, transparent: true, side: DoubleSide, shininess }),\n      basal_dendrite: new MeshPhongMaterial({ color: this._sectionColors.basal_dendrite, transparent: true, side: DoubleSide, shininess }),\n      apical_dendrite: new MeshPhongMaterial({ color: this._sectionColors.apical_dendrite, transparent: true, side: DoubleSide, shininess }),\n    };\n\n    if (options.neuriteMode) {\n      this.enableMode(options.neuriteMode);\n    } else {\n      this.enableMode('simple');\n    }\n\n    // adding the soma (even when there is no soma data)\n    this._somaFromModel = this._buildSomaFromModel();\n    this.add(this._somaFromModel);\n    this._somaFromOrphanSections = this._buildSomaFromOrphanSections();\n    this.add(this._somaFromOrphanSections);\n\n    if (options.somaMode) {\n      this.enableSomaMode(options.somaModel);\n    } else {\n      this.enableSomaMode('fromModel');\n    }\n    \n    // compute the bounding box, useful for further camera targeting\n    this.box = new Box3().setFromObject(this);\n  }\n\n\n  get boundingSphere() {\n    if (this._boundingSphere) {\n      return this._boundingSphere\n    }\n\n    let somaCenter = null;\n    try {\n      somaCenter = this._morpho.getSoma().getCenter();\n    } catch(e) {\n      return null\n    }\n    const maxDistance = this._morpho.getRadiusFromSoma();\n\n    this._boundingSphere = new Sphere(new Vector3(...somaCenter), maxDistance);\n    return this._boundingSphere\n  }\n\n\n  _createTubularSections() {\n    if (this._smoothSections.children.length > 0) {\n      return\n    }\n\n    const sections = this._morpho.getArrayOfSections();\n\n    // creating a tubular mesh for each section\n    for (let i = 0; i < sections.length; i += 1) {\n      const sectionSmooth = this._buildWormSection(sections[i]);\n      if (sectionSmooth) {\n        this._smoothSections.add(sectionSmooth);\n      }\n    }\n  }\n\n\n  _createPolylineSections() {\n    if (this._polylineSections.children.length > 0) {\n      return\n    }\n    \n    const sections = this._morpho.getArrayOfSections();\n\n    // creating a polyline for each section\n    for (let i = 0; i < sections.length; i += 1) { \n      const sectionPolyline = this._buildLineSection(sections[i]);\n      if (sectionPolyline) {\n        this._polylineSections.add(sectionPolyline);\n      }\n    }\n  }\n\n\n  _createSimplifiedSections() {\n    if (this._polylineSimpleSections.children.length > 0) {\n      return\n    }\n    \n    const sections = this._morpho.getArrayOfSections();\n\n    // creating a polyline for each section\n    for (let i = 0; i < sections.length; i += 1) { \n      const sectionSimplePolyline = this._buildSimpleLineSection(sections[i]);\n      if (sectionSimplePolyline) {\n        this._polylineSimpleSections.add(sectionSimplePolyline);\n      }\n    }\n    \n  }\n\n\n  /**\n   * @private\n   * The method to build a soma mesh using the 'default' way, aka using simply the\n   * data from the soma.\n   * @return {THREE.Mesh} the soma mesh\n   */\n  _buildSomaFromModel() {\n    const soma = this._morpho.getSoma();\n    const somaPoints = soma.getPoints();\n    const somaMaterial = new MeshPhongMaterial({ color: 0x000000, transparent: false, opacity: 1 });\n\n    // case when soma is a single point\n    if (somaPoints.length === 1 || somaPoints.length === 3) {\n      const somaSphere = new Mesh(\n        new SphereGeometry(soma.getRadius(), 32, 32),\n        somaMaterial,\n      );\n\n      somaSphere.position.set(somaPoints[0][0], somaPoints[0][1], somaPoints[0][2]);\n      return somaSphere\n\n    // this is a 3-point soma, probably colinear\n    }\n\n\n    // if more than three soma points, we display all the spheres\n    if (somaPoints.length > 1) {\n      const somaSphereContainer = new Object3D();\n      somaSphereContainer.name = 'somaSphereContainer';\n\n      this._morpho.getArrayOfSections()\n        .filter(s => s.getTypename() === 'soma')\n        .forEach((s) => {\n          const points = s.getPoints();\n          const radiuses = s.getRadiuses();\n\n          // building a sphere for each soma point\n          points.forEach((p, i) => {\n            const somaSphere = new Mesh(\n              new SphereGeometry(radiuses[i], 32, 32),\n              somaMaterial,\n            );\n            somaSphere.position.set(p[0], p[1], p[2]);\n            somaSphereContainer.add(somaSphere);\n          });\n        });\n\n      return somaSphereContainer\n    }\n    console.warn('No soma defined');\n    return null\n  }\n\n\n  /**\n   * @private\n   * Here we build a soma convex polygon based on the 1st points of the orphan\n   * sections + the points available in the soma description\n   * @return {THREE.Mesh} the soma mesh\n   */\n  _buildSomaFromOrphanSections() {\n    const somaPoints = this._morpho.getSoma().getPoints();\n    let somaMesh = null;\n\n    try {\n      // getting all the 1st points of orphan sections\n      const somaPolygonPoints = this._morpho.getNeuriteStarts().map(s => new Vector3(...s));\n\n      // adding the points of the soma (adds values mostly if we a soma polygon)\n      for (let i = 0; i < somaPoints.length; i += 1) {\n        somaPolygonPoints.push(new Vector3(...somaPoints[i]));\n      }\n\n      const geometry = new ConvexBufferGeometry(somaPolygonPoints);\n      const material = new MeshPhongMaterial({\n        color: 0x000000,\n        transparent: false,\n        opacity: 1,\n        side: DoubleSide,\n      });\n      somaMesh = new Mesh(geometry, material);\n      return somaMesh\n    } catch (e) {\n      console.warn('Attempted to build a soma from orphan section points but failed. Back to the regular version.', e.message);\n      return this._buildSomaDefault()\n    }\n  }\n\n\n  /**\n   * Get the point to target when using the method lookAt. If the soma is valid,\n   * this will be the center of the soma. If no soma is valid, it will be the\n   * center of the box\n   * @return {Array} center with the shape [x: Number, y: Number, z: Number]\n   */\n  getTargetPoint() {\n    if (this._pointToTarget) {\n      // rotate this because Allen needs it (just like the sections)\n      const lookat = new Vector3(this._pointToTarget[0], this._pointToTarget[1], this._pointToTarget[2]);\n      lookat.applyAxisAngle(new Vector3(1, 0, 0), Math.PI);\n      lookat.applyAxisAngle(new Vector3(0, 1, 0), Math.PI);\n      return lookat\n    }\n    const center = new Vector3();\n    this.box.getCenter(center);\n    return center\n  }\n\n\n  /**\n   * Get the morphology object tied to _this_ mesh\n   * @return {morphologycorejs.Morphology}\n   */\n  getMorphology() {\n    return this._morpho\n  }\n\n\n  _buildWormSection(section) {\n    // somas are not rendered as sections\n    if (section.getTypename() === 'soma') {\n      return null\n    }\n\n    const material = this._sectionTubeMaterials[section.getTypename()];\n    let sectionPoints = section.getPoints();\n    let sectionRadius = section.getRadiuses();\n    const startIndex = section.getParent() ? 0 : 1;\n\n    // if (section.getTypename() === 'axon') {\n    //   console.log('axon')\n    // }\n\n    const parentSection = section.getParent();\n    // Since the first point is the last point from previous section,\n    // if the previous section is a soma, then we don't want the section\n    // to start with the same radius as the soma, so we just skip the point\n    const parentIsSoma = parentSection && parentSection.getTypename() === 'soma';\n\n    if ((sectionPoints.length - startIndex) < 2) return null\n\n    // if the parent is of type soma, then we do not use the first point\n    if (parentIsSoma) {\n      // sectionPoints = sectionPoints.slice(1)\n      // instead of using the soma radius on the first point (which can be much bigger than the neurite's radius)\n      // we repeat the radius of the second point\n      sectionRadius = [sectionRadius[1]].concat(sectionRadius.slice(1));\n    }\n\n    const positions = sectionPoints.map(arr => new Vector3(arr[0], arr[1], arr[2]));\n\n    const sectionGeom = new WormBufferGeometry(positions, sectionRadius);\n    const sectionMesh = new Mesh(sectionGeom, material);\n\n    // adding some metadata as it can be useful for raycasting\n    sectionMesh.name = section.getId();\n    sectionMesh.userData.sectionId = section.getId();\n    sectionMesh.userData.typevalue = section.getTypevalue();\n    sectionMesh.userData.typename = section.getTypename();\n\n    return sectionMesh\n  }\n\n\n\n  /**\n   * @private\n   * Builds a single section from a raw segment description and returns it.\n   * A section is usually composed of multiple segments\n   * @param {Section} section - sub part of the morpho raw object thar deals with a single section\n   * @return {THREE.Line} the constructed polyline\n   */\n  _buildLineSection(section) {\n    const material = new LineBasicMaterial({\n      color: this._sectionColors[section.getTypename()],\n    });\n\n    const sectionPoints = section.getPoints();\n    const startIndex = section.getParent() ? 0 : 1;\n   \n    if ((sectionPoints.length - startIndex) < 2) return null\n\n    const geometry = new Geometry();\n\n    for (let i = 0; i < sectionPoints.length; i += 1) {\n      geometry.vertices.push(new Vector3(\n        sectionPoints[i][0], // x\n        sectionPoints[i][1], // y\n        sectionPoints[i][2], // z\n      ));\n    }\n\n    const line = new Line(geometry, material);\n\n    // adding some metadata as it can be useful for raycasting\n    line.name = section.getId();\n    line.userData.sectionId = section.getId();\n    line.userData.typevalue = section.getTypevalue();\n    line.userData.typename = section.getTypename();\n\n    return line\n  }\n\n\n  _buildSimpleLineSection(section) {\n    const material = new LineBasicMaterial({\n      color: this._sectionColors[section.getTypename()],\n    });\n\n    const simplifiedSection = simplify(section.getPoints(), 10, true);\n\n    if ((simplifiedSection.length) < 2) return null\n\n    const geometry = new Geometry();\n\n    for (let i = 0; i < simplifiedSection.length; i += 1) {\n      geometry.vertices.push(new Vector3(\n        simplifiedSection[i][0], // x\n        simplifiedSection[i][1], // y\n        simplifiedSection[i][2], // z\n      ));\n    }\n\n    const line = new Line(geometry, material);\n\n    // adding some metadata as it can be useful for raycasting\n    line.name = section.getId();\n    line.userData.sectionId = section.getId();\n    line.userData.typevalue = section.getTypevalue();\n    line.userData.typename = section.getTypename();\n\n    return line\n  }\n\n\n  setSmoothOpacity(a) {\n    this._smoothSections.children.forEach((mesh) => {\n      mesh.material.opacity = a;\n    });\n  }\n\n\n  setSmoothVisibility(v) {\n    this._smoothSections.visible = v;\n  }\n\n\n  setPolylineVisibility(v) {\n    this._polylineSections.visible = v;\n  }\n\n\n  /**\n   * Select the display mode for the neurite\n   * @param {string} mode - can be 'line' (or 'polyline') and 'smooth'\n   */\n  enableMode(mode) {\n    this._neuriteModeName = mode;\n    if (mode === 'smooth') {\n      this._createTubularSections();\n      this._smoothSections.visible = true;\n      this._polylineSections.visible = false;\n      this._polylineSimpleSections.visible = false;\n    } else if (mode === 'polyline' || mode === 'line') {\n      this._createPolylineSections();\n      this._smoothSections.visible = false;\n      this._polylineSections.visible = true;\n      this._polylineSimpleSections.visible = false;\n    } else if (mode === 'simple') {\n      this._createSimplifiedSections();\n      this._smoothSections.visible = false;\n      this._polylineSections.visible = false;\n      this._polylineSimpleSections.visible = true;\n    }\n  }\n\n  getNeuriteModename() {\n    return this._neuriteModeName\n  }\n\n  /**\n   * Select the display mode for the soma\n   * @param {sting} mode - can be 'fromOrphanSections', 'fromModel' or 'hidden'\n   */\n  enableSomaMode(mode) {\n    this._somaModeName = mode;\n    if (mode === 'fromOrphanSections') {\n      try { this._somaFromOrphanSections.visible = true; } catch (e) {}\n      try { this._somaFromModel.visible = false; } catch (e) {}\n    } else if (mode === 'fromModel') {\n      try { this._somaFromOrphanSections.visible = false; } catch (e) {}\n      try { this._somaFromModel.visible = true; } catch (e) {}\n    } else if (mode === 'hidden') {\n      try { this._somaFromOrphanSections.visible = false; } catch (e) {}\n      try { this._somaFromModel.visible = false; } catch (e) {}\n    }\n  }\n\n  getSomaModeName() {\n    return this._somaModeName\n  }\n}\n\n/**\n* The MorphoViewer class is the entry point object of the MorphoViewer project\n* and is the only object the user should be dealing with.\n*/\nclass MorphoViewer {\n  constructor(divObj = null) {\n    if (!divObj) {\n      console.error('MorphoViewer needs a div object to display WebGL context.');\n      return\n    }\n\n    this._threeContext = new ThreeContext(divObj);\n  }\n\n\n  /**\n   * Add a morphology to the collection so that it displays.\n   * @param {Object|morphologycorejs.Morphology} morphoObj - describes the morphology of a neuron.\n   * This data comes straight from the JSON file or it can also be a Morphology object from `morphologycorejs`\n   * @param {object} options - the optional values\n   * @param {String} options.name - The name to give to this morphology. Will be used as an identifier for several operations\n   * @param {Boolean} options.asPolyline - if true: shows a polyline view. false: shows a tubular view (default: true)\n   * @param {Boolean} options.focusOn - if true, the camera will focus on this added morphology. If false, the camera will not change\n   * @param {Number} options.color - the color of the polyline.\n   * If provided, the whole neurone will be of the given color, if not provided,\n   * the axon will be green, the basal dendrite will be red and the apical dendrite will be green\n   * @param {String} options.somaMode - \"default\" to display only the soma data or \"fromOrphanSections\" to build a soma using the orphan sections\n   * @param {Function} options.onDone - callback when the morphology is displayed. Called with the name (given or generated) of the morphology\n   * @param {Number} options.distance - the distance between the camera and the soma. Only relevant if `onFocus` is `true`\n   * @param {string} options.formFactor - can be 'tubular', 'polyline' or 'hybrid'\n   */\n  addMorphology(morphoObj, options) {\n    // create a morphology object from the raw object\n    let morphology = null;\n\n    // creates an auto name if none is giver\n    options.name = Tools.getOption(options, 'name', `morpho_${Math.round(Math.random() * 1000000).toString()}`);\n\n    if (morphoObj instanceof morphologycorejs.Morphology) {\n      morphology = morphoObj;\n    } else {\n      morphology = new morphologycorejs.Morphology();\n      morphology.buildFromRawMorphology(morphoObj);\n    }\n\n    morphology.setId(options.name);\n    const asPolyline = 'asPolyline' in options ? options.asPolyline : true;\n\n    let morphoMesh = null;\n\n    if (options.formFactor && options.formFactor === 'hybrid') {\n      morphoMesh = new MorphologyHybrid(morphology, options);\n    } else if ((options.formFactor && options.formFactor === 'polyline') || asPolyline) {\n      morphoMesh = new MorphologyPolyline(morphology, options);\n    } else if ((options.formFactor && options.formFactor === 'tubular') || !asPolyline) {\n      morphoMesh = new MorphologyPolycylinder(morphology, options);\n    }\n\n    this._threeContext.addMorphology(morphoMesh, options);\n    return morphoMesh\n  }\n\n\n  /**\n   * Adds a mesh from its URL. The mesh has to encoded into the STL format\n   * @param {String} url - the url of the STL file\n   * @param {Object} options - the options object\n   * @param {String} options.name - optional name of this mesh (useful for further operations such as centering the view)\n   * @param {Boolean} options.focusOn - if true, the camera will focus on this added mesh. If false, the camera will not change\n   * @param {Number} options.opacity - the opacity of the mesh\n   * @param {Number} options.color - the color of the mesh\n   * @param {Number} options.wireframe - only the wireframe will display if true. If false, the regular mesh will show\n   * @param {Number} options.wireframe - only the wireframe will display if true. If false, the regular mesh will show\n   * @param {Function} options.onDone - callback to be called when the mesh is added. Called with the name of the mesh in argument\n   */\n  addStlToMeshCollection(url, options) {\n    this._threeContext.addStlToMeshCollection(url, options);\n  }\n\n\n  /**\n   * Kill all to save up memory, stop the annimation, removes events, delete the canvas\n   */\n  destroy() {\n    this._threeContext.destroy();\n  }\n\n\n  /**\n   * Get the field of view angle of the camera, in degrees\n   * @return {Number}\n   */\n  getCameraFieldOfView() {\n    return this._threeContext.getCameraFieldOfView()\n  }\n\n\n  /**\n   * Define the camera field of view, in degrees\n   * @param {Number} fov - the fov\n   */\n  setCameraFieldOfView(fov) {\n    this._threeContext.setCameraFieldOfView(fov);\n  }\n\n\n  /**\n   * Make the camera look at the soma of a morphology (or the center of it's bounding box\n   * if the neuron does not have soma data)\n   * @param {String} name - the name of the neuron to focus on\n   * @param {Number} distance - distance from the soma center (in world space, most likely microns)\n   */\n  focusOnMorphology(name, distance) {\n    this._threeContext.focusOnMorphology(name, distance);\n  }\n\n\n  /**\n   * Make the camera focus on the given mesh\n   * @param {String} name - name of the mesh\n   */\n  focusOnMesh(name) {\n    this._threeContext.focusOnMesh(name);\n  }\n\n\n  /**\n   * Define a callback associated with clicking on a section. The callback function\n   * is called with the `morphologycorejs.Section` instance as arguments (or `undefined`)\n   */\n  onRaycast(cb) {\n    this._threeContext.on('onRaycast', cb);\n  }\n\n\n  /**\n   * Take a screenshot of the webgl context and dowload the png image\n   * @param {String} filename - name under which we want to dowload this file (optional)\n   */\n  takeScreenshot(filename = 'capture.png') {\n    const imageData = this._threeContext.getSnapshotData();\n    Tools.triggerDownload(imageData, filename);\n  }\n\n\n  /**\n   * Adds a OBJ mesh to the scene\n   * @param {String} objStr - the string from the OBJ file\n   * @param {Object} options - the options object\n   * @param {String} options.name - optional name of this mesh (useful for further operations such as centering the view)\n   * @param {Boolean} options.focusOn - if true, the camera will focus on this added mesh. If false, the camera will not change\n   * @param {Number} options.opacity - the opacity of the mesh\n   * @param {Number} options.color - the color of the mesh\n   * @param {Number} options.wireframe - only the wireframe will display if true. If false, the regular mesh will show\n   * @param {Number} options.wireframe - only the wireframe will display if true. If false, the regular mesh will show\n   * @param {Function} options.onDone - callback to be called when the mesh is added. Called with the name of the mesh in argument\n   */\n  addObjToMeshCollection (objStr, options) {\n    this._threeContext.addObjToMeshCollection(objStr, options);\n  }\n\n\n  /**\n   * Show the given mesh from the colelction\n   * @param {String} name - Name of the mesh\n   */\n  showMesh (name) {\n    this._threeContext.showMesh(name);\n  }\n\n\n  /**\n   * Hide the given mesh from the colelction\n   * @param {String} name - Name of the mesh\n   */\n  hideMesh (name) {\n    this._threeContext.hideMesh(name);\n  }\n\n\n\n}\n\nvar main = ({\n  MorphoViewer,\n})\n\nexport default main;\n//# sourceMappingURL=morphoviewer.js.map\n","'use strict';\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nfunction makeTable() {\n  var c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n}\n\n// Create table on load. Just 255 signed longs. Not a problem.\nvar crcTable = makeTable();\n\n\nfunction crc32(crc, buf, len, pos) {\n  var t = crcTable,\n      end = pos + len;\n\n  crc ^= -1;\n\n  for (var i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n}\n\n\nmodule.exports = crc32;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n/* eslint-disable space-unary-ops */\n\nvar utils = require('../utils/common');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//var Z_FILTERED          = 1;\n//var Z_HUFFMAN_ONLY      = 2;\n//var Z_RLE               = 3;\nvar Z_FIXED               = 4;\n//var Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nvar Z_BINARY              = 0;\nvar Z_TEXT                = 1;\n//var Z_ASCII             = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n/*============================================================================*/\n\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nvar STORED_BLOCK = 0;\nvar STATIC_TREES = 1;\nvar DYN_TREES    = 2;\n/* The three kinds of block type */\n\nvar MIN_MATCH    = 3;\nvar MAX_MATCH    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\n\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nvar D_CODES       = 30;\n/* number of distance codes */\n\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\n\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\n\nvar MAX_BITS      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nvar MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nvar END_BLOCK   = 256;\n/* end of block literal code */\n\nvar REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nvar REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nvar REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nvar extra_lbits =   /* extra bits for each length code */\n  [0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];\n\nvar extra_dbits =   /* extra bits for each distance code */\n  [0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];\n\nvar extra_blbits =  /* extra bits for each bit length code */\n  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];\n\nvar bl_order =\n  [16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nvar DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nvar static_ltree  = new Array((L_CODES + 2) * 2);\nzero(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nvar static_dtree  = new Array(D_CODES * 2);\nzero(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nvar _dist_code    = new Array(DIST_CODE_LEN);\nzero(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nvar _length_code  = new Array(MAX_MATCH - MIN_MATCH + 1);\nzero(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nvar base_length   = new Array(LENGTH_CODES);\nzero(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nvar base_dist     = new Array(D_CODES);\nzero(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nvar static_l_desc;\nvar static_d_desc;\nvar static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nfunction d_code(dist) {\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n}\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nfunction put_short(s, w) {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n}\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nfunction send_bits(s, value, length) {\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n}\n\n\nfunction send_code(s, c, tree) {\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n}\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nfunction bi_reverse(code, len) {\n  var res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nfunction bi_flush(s) {\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n}\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nfunction gen_bitlen(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n{\n  var tree            = desc.dyn_tree;\n  var max_code        = desc.max_code;\n  var stree           = desc.stat_desc.static_tree;\n  var has_stree       = desc.stat_desc.has_stree;\n  var extra           = desc.stat_desc.extra_bits;\n  var base            = desc.stat_desc.extra_base;\n  var max_length      = desc.stat_desc.max_length;\n  var h;              /* heap index */\n  var n, m;           /* iterate over the tree elements */\n  var bits;           /* bit length */\n  var xbits;          /* extra bits */\n  var f;              /* frequency */\n  var overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Trace((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nfunction gen_codes(tree, max_code, bl_count)\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n{\n  var next_code = new Array(MAX_BITS + 1); /* next code value for each bit length */\n  var code = 0;              /* running code value */\n  var bits;                  /* bit index */\n  var n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS; bits++) {\n    next_code[bits] = code = (code + bl_count[bits - 1]) << 1;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    var len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n}\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nfunction tr_static_init() {\n  var n;        /* iterates over tree elements */\n  var bits;     /* bit counter */\n  var length;   /* length value */\n  var code;     /* code value */\n  var dist;     /* distance index */\n  var bl_count = new Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES, MAX_BITS);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES, MAX_BL_BITS);\n\n  //static_init_done = true;\n}\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nfunction init_block(s) {\n  var n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.last_lit = s.matches = 0;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nfunction bi_windup(s)\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n}\n\n/* ===========================================================================\n * Copy a stored block, storing first the length and its\n * one's complement if requested.\n */\nfunction copy_block(s, buf, len, header)\n//DeflateState *s;\n//charf    *buf;    /* the input data */\n//unsigned len;     /* its length */\n//int      header;  /* true if block header must be written */\n{\n  bi_windup(s);        /* align on byte boundary */\n\n  if (header) {\n    put_short(s, len);\n    put_short(s, ~len);\n  }\n//  while (len--) {\n//    put_byte(s, *buf++);\n//  }\n  utils.arraySet(s.pending_buf, s.window, buf, len, s.pending);\n  s.pending += len;\n}\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nfunction smaller(tree, n, m, depth) {\n  var _n2 = n * 2;\n  var _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n}\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nfunction pqdownheap(s, tree, k)\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n{\n  var v = s.heap[k];\n  var j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n}\n\n\n// inlined manually\n// var SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nfunction compress_block(s, ltree, dtree)\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n{\n  var dist;           /* distance of matched string */\n  var lc;             /* match length or unmatched char (if dist == 0) */\n  var lx = 0;         /* running index in l_buf */\n  var code;           /* the code to send */\n  var extra;          /* number of extra bits to send */\n\n  if (s.last_lit !== 0) {\n    do {\n      dist = (s.pending_buf[s.d_buf + lx * 2] << 8) | (s.pending_buf[s.d_buf + lx * 2 + 1]);\n      lc = s.pending_buf[s.l_buf + lx];\n      lx++;\n\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n      //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n      //       \"pendingBuf overflow\");\n\n    } while (lx < s.last_lit);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n}\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nfunction build_tree(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n{\n  var tree     = desc.dyn_tree;\n  var stree    = desc.stat_desc.static_tree;\n  var has_stree = desc.stat_desc.has_stree;\n  var elems    = desc.stat_desc.elems;\n  var n, m;          /* iterate over heap elements */\n  var max_code = -1; /* largest code with non zero frequency */\n  var node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n}\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nfunction scan_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nfunction send_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nfunction build_bl_tree(s) {\n  var max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n}\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nfunction send_all_trees(s, lcodes, dcodes, blcodes)\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n{\n  var rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n}\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"black list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nfunction detect_data_type(s) {\n  /* black_mask is the bit mask of black-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  var black_mask = 0xf3ffc07f;\n  var n;\n\n  /* Check for non-textual (\"black-listed\") bytes. */\n  for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n    if ((black_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"white-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"black-listed\" or \"white-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n}\n\n\nvar static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nfunction _tr_init(s)\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n}\n\n\n/* ===========================================================================\n * Send a stored block\n */\nfunction _tr_stored_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  copy_block(s, buf, stored_len, true); /* with header */\n}\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nfunction _tr_align(s) {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n}\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nfunction _tr_flush_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  var opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  var max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->last_lit));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n}\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nfunction _tr_tally(s, dist, lc)\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n{\n  //var out_length, in_length, dcode;\n\n  s.pending_buf[s.d_buf + s.last_lit * 2]     = (dist >>> 8) & 0xff;\n  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n\n  s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n  s.last_lit++;\n\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n\n//#ifdef TRUNCATE_BLOCK\n//  /* Try to guess if it is profitable to stop the current block here */\n//  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n//    /* Compute an upper bound for the compressed length */\n//    out_length = s.last_lit*8;\n//    in_length = s.strstart - s.block_start;\n//\n//    for (dcode = 0; dcode < D_CODES; dcode++) {\n//      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n//    }\n//    out_length >>>= 3;\n//    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n//    //       s->last_lit, in_length, out_length,\n//    //       100L - out_length*100L/in_length));\n//    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n//      return true;\n//    }\n//  }\n//#endif\n\n  return (s.last_lit === s.lit_bufsize - 1);\n  /* We avoid equality with lit_bufsize because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n}\n\nexports._tr_init  = _tr_init;\nexports._tr_stored_block = _tr_stored_block;\nexports._tr_flush_block  = _tr_flush_block;\nexports._tr_tally = _tr_tally;\nexports._tr_align = _tr_align;\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  //Z_MEM_ERROR:     -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n","// @ts-nocheck\nimport * as THREE from 'three';\nvar CAMERA_DISTANCE_OFFSET = 1; // This is a temporary fix\n// THIS CODE IS MEANT TO BE REMOVED\n// that addresses focus problems in the morphoviewer library\n// this higher order function patches a morphoviewer instance\n// with a working focus funciton.\n// https://discourse.threejs.org/t/camera-zoom-to-fit-object/936/24\n\nvar withFixedFocusOnMorphology = function withFixedFocusOnMorphology(morphoViewer) {\n  morphoViewer._threeContext.getMorphoFromCollection = function () {\n    var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var morphoName = name; // if no name of morphology is provided, we take the first one\n\n    if (!morphoName) {\n      var allNames = Object.keys(this._morphologyMeshCollection);\n\n      if (allNames.length) {\n        morphoName = allNames[0];\n      } else {\n        return;\n      }\n    }\n\n    var morphoMesh = this._morphologyMeshCollection[morphoName];\n    return morphoMesh;\n  };\n\n  morphoViewer.isInterneuron = function () {\n    // Interneurons do not have an apical dendrite, the pinkish colored dendrites\n    var morphoMesh = this._threeContext.getMorphoFromCollection();\n\n    return !morphoMesh.children.find(function (child) {\n      var _child$userData;\n\n      return (child === null || child === void 0 ? void 0 : (_child$userData = child.userData) === null || _child$userData === void 0 ? void 0 : _child$userData.typename) === 'apical_dendrite';\n    });\n  };\n\n  morphoViewer._threeContext.getSomaChildren = function () {\n    var morphoMesh = this.getMorphoFromCollection();\n    return morphoMesh.children.filter(function (object) {\n      return object.userData.typename === 'soma';\n    });\n  };\n\n  morphoViewer._threeContext.getOrphanedSomaChildren = function () {\n    // it looks like the orphaned soma construction doesn't have a name\n    // we can use that to reliably get the orphaned soma\n    var morphoMesh = this.getMorphoFromCollection();\n    return morphoMesh.children.filter(function (object) {\n      return object.name === '';\n    })[0];\n  };\n\n  morphoViewer._threeContext.removeOrphanedSomaChildren = function () {\n    // it looks like the orphaned soma construction doesn't have a name\n    // we can use that to reliably get the orphaned soma\n    var morphoMesh = this.getMorphoFromCollection();\n    var orphanedSoma = this.getOrphanedSomaChildren();\n    morphoMesh.remove(orphanedSoma);\n  };\n\n  morphoViewer._threeContext.getTargetPointFromSoma = function () {\n    var morphoMesh = this.getMorphoFromCollection(); // Get the coordinates for the center of the soma\n    // This will be the point we want the camera to focus on!\n    // NOTE: this function falls back to bounding box center even if soma is generated\n    // via orphaned sections\n\n    var targetPoint = morphoMesh.getTargetPoint(); // Does the soma exist or was it automatically generated?\n\n    var somaCenterTargetExists = !!morphoMesh._pointToTarget; // If soma was generated using orphaned sections\n    // then we need to get the soma mesh and use the coordintates from that\n\n    if (!somaCenterTargetExists) {\n      // in the case where the soma was automatically generated\n      // by guessing the shape from the orphaned sections\n      // the soma will be added to the Morphology Object3D last\n      var soma = morphoMesh.children[morphoMesh.children.length - 1];\n      var somaBoundingBox = new THREE.Box3();\n      somaBoundingBox.expandByObject(soma); // set the new target point from the soma's bounding box\n      // instead of the entire neuron bounding box\n\n      targetPoint = somaBoundingBox.getCenter(new THREE.Vector3());\n    }\n\n    return targetPoint;\n  };\n\n  morphoViewer._threeContext.getCameraHeightAtMorpho = function () {\n    var targetPoint = this.getTargetPointFromSoma();\n\n    this._camera.updateMatrixWorld();\n\n    var cameraPosVector = this._camera.position.clone();\n\n    var distance = cameraPosVector.distanceTo(targetPoint); // Calculate the visible height (the height of camera frustrum)\n    // at the point it intersects with the morphology soma\n\n    var vFOV = this._camera.fov * Math.PI / 180; // convert vertical fov to radians\n\n    var height = 2 * Math.tan(vFOV / 2) * distance; // visible height\n\n    return height;\n  };\n\n  morphoViewer._threeContext.focusOnMorphology = function () {\n    var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var morphoMesh = this.getMorphoFromCollection(name);\n    var fitOffset = CAMERA_DISTANCE_OFFSET;\n    var box = new THREE.Box3();\n    box.expandByObject(morphoMesh);\n    var size = box.getSize(new THREE.Vector3());\n    var maxSize = Math.max(size.x, size.y, size.z);\n    var fitHeightDistance = maxSize / (2 * Math.atan(Math.PI * this._camera.fov / 360));\n    var fitWidthDistance = fitHeightDistance / this._camera.aspect;\n    var distance = fitOffset * Math.max(fitHeightDistance, fitWidthDistance);\n\n    var direction = this._controls.target.clone().sub(this._camera.position).normalize().multiplyScalar(distance);\n\n    this._controls.maxDistance = distance * 10;\n    var targetPoint = this.getTargetPointFromSoma(); // Look at our new center point\n\n    this._camera.lookAt(targetPoint); // apply soma center coordinates as OrbitControls target\n    // this will center the controls around it for rotation\n\n\n    this._controls.target.copy(targetPoint);\n\n    this._camera.near = distance / 100;\n    this._camera.far = distance * 100;\n\n    this._camera.updateProjectionMatrix();\n\n    this._camera.position.copy(this._controls.target).sub(direction);\n\n    this._camera.rotation.set(new THREE.Vector3());\n\n    this._controls.update();\n\n    this._render();\n  };\n\n  return morphoViewer;\n};\n\nexport default withFixedFocusOnMorphology;","export var removeChildren = function removeChildren(div) {\n  while (div.lastChild) {\n    div.removeChild(div.lastChild);\n  }\n};","import * as THREE from 'three';\nexport var createTextCanvas = function createTextCanvas(text, textProps) {\n  var _textProps$fontSize = textProps.fontSize,\n      fontSize = _textProps$fontSize === void 0 ? 48 : _textProps$fontSize,\n      _textProps$font = textProps.font,\n      font = _textProps$font === void 0 ? 'monospace' : _textProps$font,\n      _textProps$align = textProps.align,\n      align = _textProps$align === void 0 ? 'center' : _textProps$align,\n      _textProps$baseline = textProps.baseline,\n      baseline = _textProps$baseline === void 0 ? 'middle' : _textProps$baseline,\n      _textProps$color = textProps.color,\n      color = _textProps$color === void 0 ? 'black' : _textProps$color;\n  var canvas = document.createElement('canvas');\n  var ctx = canvas.getContext('2d');\n\n  if (!ctx) {\n    return;\n  } // Prepare the font to be able to measure\n\n\n  ctx.font = \"\".concat(fontSize, \"px \").concat(font);\n  var textMetrics = ctx.measureText(text);\n  var width = textMetrics.width;\n  var height = fontSize; // Resize canvas to match text size\n\n  canvas.width = width;\n  canvas.height = height;\n  canvas.style.width = width + 'px';\n  canvas.style.height = height + 'px'; // Re-apply font since canvas is resized.\n\n  ctx.font = \"\".concat(fontSize, \"px \").concat(font);\n  ctx.textAlign = align;\n  ctx.textBaseline = baseline; // Make the canvas transparent for simplicity\n\n  ctx.fillStyle = 'transparent';\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  ctx.fillStyle = color;\n  ctx.fillText(text, width / 2, height / 2);\n  return canvas;\n};\nexport var makeText = function makeText(text, textProps) {\n  var _textProps$apparentFo = textProps.apparentFontSize,\n      apparentFontSize = _textProps$apparentFo === void 0 ? 5 : _textProps$apparentFo;\n  var canvas = createTextCanvas(text, textProps);\n\n  if (!canvas) {\n    console.warn('no canvas found when making text');\n    return;\n  }\n\n  var texture = new THREE.Texture(canvas);\n  texture.magFilter = THREE.NearestFilter;\n  texture.needsUpdate = true;\n  var material = new THREE.SpriteMaterial({\n    map: texture\n  });\n  var sprite = new THREE.Sprite(material);\n  var textObject = new THREE.Object3D();\n  sprite.scale.set(canvas.width / canvas.height * apparentFontSize, apparentFontSize, 1);\n  sprite.position.set(0, 1.5, 0);\n  textObject.add(sprite);\n  return textObject;\n};","import _classCallCheck from \"/Users/getta/dev/portals/hippocampus-model-portal/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/getta/dev/portals/hippocampus-model-portal/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"/Users/getta/dev/portals/hippocampus-model-portal/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport * as THREE from 'three';\nimport { removeChildren } from './dom';\nimport { makeText } from './text';\nvar AXES_HELPER_SCALE = 15;\n\nvar createOrientationHelper = function createOrientationHelper() {\n  var orientationHelper = new THREE.Object3D();\n  var colors = ['red', 'green', 'blue'];\n  var axes = ['X', 'Y', 'Z']; // We need to swap Y for Z\n  // because three.js uses an uncommon orientation format\n  // therefore we will generate the Axes Helper ourselves\n\n  var positions = [[AXES_HELPER_SCALE, 0, 0], [0, 0, AXES_HELPER_SCALE], [0, AXES_HELPER_SCALE, 0]];\n\n  for (var i = 0; i <= 2; i++) {\n    var color = colors[i];\n    var position = new THREE.Vector3(positions[i][0], positions[i][1], positions[i][2]);\n    var geometry = new THREE.Geometry();\n    geometry.vertices.push(position, new THREE.Vector3(0, 0, 0));\n    var material = new THREE.LineBasicMaterial({\n      color: color,\n      linewidth: 1\n    });\n    var line = new THREE.LineSegments(geometry, material);\n    var label = axes[i];\n    var axisLabel = makeText(label, {\n      color: color\n    }); // Make sure the label has a little margin\n\n    var labelPosition = position.clone().multiplyScalar(1.2);\n    axisLabel === null || axisLabel === void 0 ? void 0 : axisLabel.position.set(labelPosition.x, labelPosition.y, labelPosition.z);\n    axisLabel && orientationHelper.add(axisLabel, line);\n  }\n\n  return orientationHelper;\n};\n\nvar OrientationViewer = /*#__PURE__*/function () {\n  function OrientationViewer(div) {\n    var _this = this;\n\n    _classCallCheck(this, OrientationViewer);\n\n    this.div = div;\n\n    _defineProperty(this, \"renderer\", void 0);\n\n    _defineProperty(this, \"scene\", void 0);\n\n    _defineProperty(this, \"camera\", void 0);\n\n    _defineProperty(this, \"orientationHelper\", void 0);\n\n    _defineProperty(this, \"requestedAnimationFrameID\", 0);\n\n    _defineProperty(this, \"followCamera\", null);\n\n    var canvas = document.createElement('canvas');\n    div.appendChild(canvas);\n    var context = canvas.getContext('webgl2', {\n      // preserveDrawingBuffer: true,\n      alpha: true,\n      antialias: true\n    });\n    this.renderer = new THREE.WebGLRenderer({\n      canvas: canvas,\n      context: context || undefined\n    });\n    this.renderer.setClearColor(0xffffff, 0);\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.renderer.setSize(div.clientWidth, div.clientHeight);\n    this.scene = new THREE.Scene();\n    this.camera = new THREE.PerspectiveCamera(27, div.clientWidth / div.clientHeight, 1, 50000);\n    var camPos = {\n      x: 0,\n      y: 0,\n      z: 100\n    };\n    this.camera.lookAt(new THREE.Vector3(0, 0, 0));\n    this.camera.position.x = camPos.x;\n    this.camera.position.y = camPos.y;\n    this.camera.position.z = camPos.z;\n    this.scene.add(this.camera);\n    this.orientationHelper = createOrientationHelper();\n    this.scene.add(this.orientationHelper);\n    window.addEventListener('resize', function () {\n      var _this$renderer;\n\n      (_this$renderer = _this.renderer) === null || _this$renderer === void 0 ? void 0 : _this$renderer.setSize(div.clientWidth, div.clientHeight);\n    });\n    this.animate();\n  }\n\n  _createClass(OrientationViewer, [{\n    key: \"setFollowCamera\",\n    value: function setFollowCamera(camera) {\n      this.followCamera = camera;\n    }\n  }, {\n    key: \"animate\",\n    value: function animate() {\n      this.requestedAnimationFrameID = requestAnimationFrame(this.animate.bind(this));\n      this.render();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.followCamera) {\n        var _this$camera;\n\n        (_this$camera = this.camera) === null || _this$camera === void 0 ? void 0 : _this$camera.lookAt(this.orientationHelper.position.clone());\n        this.orientationHelper.rotation.copy(this.followCamera.rotation.clone()); // Invert the orientation of the object\n        // because the camera is inverted (see MorphologyViewer.tsx)\n\n        this.orientationHelper.scale.x = -1;\n        this.orientationHelper.scale.y = -1;\n        this.orientationHelper.scale.z = -1;\n      }\n\n      if (this.scene && this.camera && this.renderer) {\n        this.renderer.render(this.scene, this.camera);\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      removeChildren(this.div);\n      cancelAnimationFrame(this.requestedAnimationFrameID);\n      this.scene = null;\n      this.renderer = null;\n      this.camera = null;\n    }\n  }]);\n\n  return OrientationViewer;\n}();\n\nexport { OrientationViewer as default };","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","export var slice = Array.prototype.slice;\n","export default function(x) {\n  return x;\n}\n","import {slice} from \"./array.js\";\nimport identity from \"./identity.js\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + x + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + y + \")\";\n}\n\nfunction number(scale) {\n  return d => +scale(d);\n}\n\nfunction center(scale, offset) {\n  offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;\n  if (scale.round()) offset = Math.round(offset);\n  return d => +scale(d) + offset;\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      offset = typeof window !== \"undefined\" && window.devicePixelRatio > 1 ? 0 : 0.5,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = +range[0] + offset,\n        range1 = +range[range.length - 1] + offset,\n        position = (scale.bandwidth ? center : number)(scale.copy(), offset),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"currentColor\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"currentColor\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"currentColor\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d + offset) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform((p && isFinite(p = p(d)) ? p : position(d)) + offset); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient === right\n            ? (tickSizeOuter ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H\" + offset + \"V\" + range1 + \"H\" + k * tickSizeOuter : \"M\" + offset + \",\" + range0 + \"V\" + range1)\n            : (tickSizeOuter ? \"M\" + range0 + \",\" + k * tickSizeOuter + \"V\" + offset + \"H\" + range1 + \"V\" + k * tickSizeOuter : \"M\" + range0 + \",\" + offset + \"H\" + range1));\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d) + offset); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = slice.call(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : slice.call(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : slice.call(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  axis.offset = function(_) {\n    return arguments.length ? (offset = +_, axis) : offset;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","export default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    var group = select.apply(this, arguments);\n    return group == null ? [] : array(group);\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return this.children;\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport array from \"../array.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = array(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(selection) {\n  if (!(selection instanceof Selection)) throw new Error(\"invalid merge\");\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {pointer, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nconst {abs, max, min} = Math;\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name __brush rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection) {\n    if (group.tween) {\n      group\n          .on(\"start.brush\", function(event) { emitter(this, arguments).beforestart().start(event); })\n          .on(\"interrupt.brush end.brush\", function(event) { emitter(this, arguments).end(event); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start().brush().end();\n          });\n    }\n  };\n\n  brush.clear = function(group) {\n    brush.move(group, null);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    var emit = that.__brush.emitter;\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\n  }\n\n  function Emitter(that, args, clean) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n    this.clean = clean;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function(event, mode) {\n      if (this.starting) this.starting = false, this.emit(\"start\", event, mode);\n      else this.emit(\"brush\", event);\n      return this;\n    },\n    brush: function(event, mode) {\n      this.emit(\"brush\", event, mode);\n      return this;\n    },\n    end: function(event, mode) {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\", event, mode);\n      return this;\n    },\n    emit: function(type, event, mode) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new BrushEvent(type, {\n          sourceEvent: event,\n          target: brush,\n          selection: dim.output(this.state.selection),\n          mode,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function started(event) {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        points = Array.from(event.touches || [event], t => {\n          const i = t.identifier;\n          t = pointer(t, that);\n          t.point0 = t.slice();\n          t.identifier = i;\n          return t;\n        });\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      const pts = [points[0], points[1] || points[0]];\n      state.selection = selection = [[\n          w0 = dim === Y ? W : min(pts[0][0], pts[1][0]),\n          n0 = dim === X ? N : min(pts[0][1], pts[1][1])\n        ], [\n          e0 = dim === Y ? E : max(pts[0][0], pts[1][0]),\n          s0 = dim === X ? S : max(pts[0][1], pts[1][1])\n        ]];\n      if (points.length > 1) move();\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    interrupt(that);\n    var emit = emitter(that, arguments, true).beforestart();\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    redraw.call(that);\n    emit.start(event, mode.name);\n\n    function moved(event) {\n      for (const p of event.changedTouches || [event]) {\n        for (const d of points)\n          if (d.identifier === p.identifier) d.cur = pointer(p, that);\n      }\n      if (shifting && !lockX && !lockY && points.length === 1) {\n        const point = points[0];\n        if (abs(point.cur[0] - point[0]) > abs(point.cur[1] - point[1]))\n          lockY = true;\n        else\n          lockX = true;\n      }\n      for (const point of points)\n        if (point.cur) point[0] = point.cur[0], point[1] = point.cur[1];\n      moving = true;\n      noevent(event);\n      move(event);\n    }\n\n    function move(event) {\n      const point = points[0], point0 = point.point0;\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = max(W - w0, min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = max(N - n0, min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (points[1]) {\n            if (signX) w1 = max(W, min(E, points[0][0])), e1 = max(W, min(E, points[1][0])), signX = 1;\n            if (signY) n1 = max(N, min(S, points[0][1])), s1 = max(N, min(S, points[1][1])), signY = 1;\n          } else {\n            if (signX < 0) dx = max(W - w0, min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n            else if (signX > 0) dx = max(W - e0, min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = max(N - n0, min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n            else if (signY > 0) dy = max(N - s0, min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          }\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = max(W, min(E, w0 - dx * signX)), e1 = max(W, min(E, e0 + dx * signX));\n          if (signY) n1 = max(N, min(S, n0 - dy * signY)), s1 = max(N, min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush(event, mode.name);\n      }\n    }\n\n    function ended(event) {\n      nopropagation(event);\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end(event, mode.name);\n    }\n\n    function keydowned(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move();\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move();\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n\n    function keyupped(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move();\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move();\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move();\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n  }\n\n  function touchmoved(event) {\n    emitter(this, arguments).moved(event);\n  }\n\n  function touchended(event) {\n    emitter(this, arguments).ended(event);\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled)\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wont trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        currentTarget = event.currentTarget,\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","import _classCallCheck from \"/Users/getta/dev/portals/hippocampus-model-portal/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/getta/dev/portals/hippocampus-model-portal/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"/Users/getta/dev/portals/hippocampus-model-portal/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport * as d3 from 'd3';\nimport { removeChildren } from './dom';\nvar min = 0;\n\nvar ScaleViewer = /*#__PURE__*/function () {\n  function ScaleViewer(div, max) {\n    _classCallCheck(this, ScaleViewer);\n\n    this.div = div;\n\n    _defineProperty(this, \"svg\", void 0);\n\n    _defineProperty(this, \"scale\", void 0);\n\n    _defineProperty(this, \"axis\", void 0);\n\n    var _div = div,\n        width = _div.clientWidth,\n        height = _div.clientHeight;\n    var margins = {\n      top: 20,\n      bottom: 20\n    };\n    var data = [min, max];\n    this.svg = d3.select(div).append('svg').attr('width', width).attr('height', height);\n    this.scale = d3.scaleLinear().range([height - margins.top, margins.bottom]).domain([d3.min(data) || min, d3.max(data) || max]);\n    this.axis = d3.axisRight(this.scale);\n    this.svg.append('g').call(this.axis);\n    this.onScaleChange(max);\n  }\n\n  _createClass(ScaleViewer, [{\n    key: \"onScaleChange\",\n    value: function onScaleChange(max) {\n      this.scale.domain([min, max]);\n      this.svg.call(d3.axisRight(this.scale).tickFormat(function (x) {\n        return \"\".concat(x, \" \\u03BCm\");\n      }));\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.svg.remove();\n      removeChildren(this.div);\n    }\n  }]);\n\n  return ScaleViewer;\n}();\n\nexport { ScaleViewer as default };","import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React from 'react'; // import './morpho-legend.css';\n\nvar MorphoLegend = function MorphoLegend(_ref) {\n  var isInterneuron = _ref.isInterneuron,\n      hasApproximatedSoma = _ref.hasApproximatedSoma;\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: \"morpho-legend\",\n    children: /*#__PURE__*/_jsxs(\"ul\", {\n      children: [/*#__PURE__*/_jsxs(\"li\", {\n        className: \"soma\",\n        children: [\"Soma \", hasApproximatedSoma && '(Approximated)']\n      }), /*#__PURE__*/_jsx(\"li\", {\n        className: \"axon\",\n        children: \"Axon\"\n      }), // Interneurons don't have a distinction between Basal / Apical Dendrites\n      isInterneuron ? /*#__PURE__*/_jsx(\"li\", {\n        className: \"basal-dendrites\",\n        children: \"Dendrites\"\n      }) : /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"li\", {\n          className: \"basal-dendrites\",\n          children: \"Basal Dendrites\"\n        }), /*#__PURE__*/_jsx(\"li\", {\n          className: \"apical-dendrites\",\n          children: \"Apical Dendrites\"\n        })]\n      })]\n    })\n  });\n};\n\nexport default MorphoLegend;","import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"/Users/getta/dev/portals/hippocampus-model-portal/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/getta/dev/portals/hippocampus-model-portal/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport withFixedFocusOnMorphology from './withFixedFocusOnMorphology';\nimport OrientationViewer from './libs/OrientationViewer';\nimport ScaleViewer from './libs/ScaleViewer';\nimport MorphoLegend from './MorphoLegend'; // import './morpho-viewer.css';\n// TODO update morphoviewer library with typings\n\nvar morphoviewer = require('morphoviewer')[\"default\"];\n\nvar swcmorphologyparser = require('swcmorphologyparser')[\"default\"];\n\nexport var MorphologyViewer = function MorphologyViewer(_ref) {\n  var data = _ref.data,\n      options = _ref.options;\n  var ref = React.useRef(null);\n  var orientationRef = React.useRef(null);\n  var scaleRef = React.useRef(null);\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      mv = _React$useState2[0],\n      setMorphoViewer = _React$useState2[1];\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      orientationViewer = _React$useState4[0],\n      setOrientationViewer = _React$useState4[1];\n\n  var _React$useState5 = React.useState(null),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      scaleViewer = _React$useState6[0],\n      setScaleViewer = _React$useState6[1];\n\n  React.useEffect(function () {\n    if (!mv) {\n      return;\n    }\n\n    if (!mv.hasSomaData) {\n      // Change soma color to black\n      var somaMesh = mv._threeContext.getOrphanedSomaChildren();\n\n      somaMesh === null || somaMesh === void 0 ? void 0 : somaMesh.material.color.setHex(0x000000);\n    }\n\n    if (mv.hasSomaData && !options.asPolyline) {\n      // remove orphaned soma because real one exists, but two are shown\n      // this is a bug with morphoviewer and will be fixed\n      // TODO update morphoviewer and remove this code.\n      mv._threeContext.removeOrphanedSomaChildren(); // Change soma color to black\n\n\n      mv._threeContext.getSomaChildren().forEach(function (somaMesh) {\n        somaMesh === null || somaMesh === void 0 ? void 0 : somaMesh.material.color.setHex(0x000000);\n      });\n\n      mv._threeContext._render();\n    }\n  }, [mv && mv._threeContext]);\n  React.useEffect(function () {\n    var morphoViewer;\n\n    if (!ref.current) {\n      return;\n    }\n\n    try {\n      var swcParser = new swcmorphologyparser.SwcParser();\n      swcParser.parse(data);\n      var parsedFile = swcParser.getRawMorphology();\n      var hasSomaData = parsedFile.soma.points.length > 1;\n      morphoViewer = withFixedFocusOnMorphology(new morphoviewer.MorphoViewer(ref.current));\n      morphoViewer.hasSomaData = hasSomaData;\n\n      morphoViewer._threeContext._camera.up.negate();\n\n      setMorphoViewer(morphoViewer);\n\n      var morphoViewerOptions = _objectSpread({\n        name: 'morphology'\n      }, options);\n\n      morphoViewer.addMorphology(parsedFile, morphoViewerOptions);\n    } catch (error) {\n      throw new Error(\"Morphology parsing error: \".concat(error.message));\n    }\n\n    return function () {\n      morphoViewer && morphoViewer.destroy();\n    };\n  }, [ref, data, options]); // Orientation Viewer Operations\n\n  React.useEffect(function () {\n    if (!orientationRef.current) {\n      return;\n    }\n\n    if (!orientationViewer) {\n      setOrientationViewer(new OrientationViewer(orientationRef.current));\n    }\n\n    if (mv && orientationViewer) {\n      orientationViewer.setFollowCamera(mv._threeContext._camera);\n    }\n\n    return function () {\n      orientationViewer === null || orientationViewer === void 0 ? void 0 : orientationViewer.destroy();\n      setOrientationViewer(null);\n    };\n  }, [orientationRef, mv, options]); // Scale Axis Operations\n\n  React.useEffect(function () {\n    var controlEventListenerChangedEvent = null;\n\n    if (!scaleRef.current) {\n      return;\n    }\n\n    if (!scaleViewer) {\n      setScaleViewer(new ScaleViewer(scaleRef.current, 0));\n    }\n\n    if (mv && scaleViewer) {\n      scaleViewer.onScaleChange(mv._threeContext.getCameraHeightAtMorpho());\n\n      controlEventListenerChangedEvent = function controlEventListenerChangedEvent() {\n        scaleViewer.onScaleChange(mv._threeContext.getCameraHeightAtMorpho());\n      };\n\n      mv._threeContext._controls.addEventListener('change', controlEventListenerChangedEvent);\n    }\n\n    return function () {\n      var _mv$_threeContext, _mv$_threeContext$_co;\n\n      scaleViewer === null || scaleViewer === void 0 ? void 0 : scaleViewer.destroy();\n      setScaleViewer(null);\n      mv === null || mv === void 0 ? void 0 : (_mv$_threeContext = mv._threeContext) === null || _mv$_threeContext === void 0 ? void 0 : (_mv$_threeContext$_co = _mv$_threeContext._controls) === null || _mv$_threeContext$_co === void 0 ? void 0 : _mv$_threeContext$_co.removeEventListener('change', controlEventListenerChangedEvent);\n    };\n  }, [scaleRef, mv, options]);\n\n  var handleOrientationClick = function handleOrientationClick() {\n    mv === null || mv === void 0 ? void 0 : mv._threeContext._controls.reset();\n    mv === null || mv === void 0 ? void 0 : mv._threeContext._camera.up.negate();\n    mv === null || mv === void 0 ? void 0 : mv._threeContext.focusOnMorphology();\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(MorphoLegend, {\n      isInterneuron: !!(mv !== null && mv !== void 0 && mv.isInterneuron()),\n      hasApproximatedSoma: !(mv !== null && mv !== void 0 && mv.hasSomaData)\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"morpho-viewer\",\n        ref: ref\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"scale\",\n        ref: scaleRef,\n        onClick: handleOrientationClick\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"orientation\",\n        ref: orientationRef,\n        onClick: handleOrientationClick\n      })]\n    })]\n  });\n};\nexport default MorphologyViewer;","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport { Button } from 'antd';\nimport MorphologyViewer from './MorphologyViewer'; // import './morpho-wrapper.css';\n\nvar MorphoWrapper = function MorphoWrapper(_ref) {\n  var loading = _ref.loading,\n      error = _ref.error,\n      data = _ref.data,\n      options = _ref.options,\n      onPolylineClick = _ref.onPolylineClick;\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: loading ? 'morpho-wrapper loading' : 'morpho-wrapper',\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"actions\",\n      children: /*#__PURE__*/_jsx(Button, {\n        size: \"small\",\n        disabled: loading,\n        onClick: onPolylineClick,\n        children: options.asPolyline ? 'Show as Geometry' : 'Show as Lines'\n      })\n    }), error && /*#__PURE__*/_jsx(\"p\", {\n      children: error.message\n    }), data && !error && /*#__PURE__*/_jsx(MorphologyViewer, {\n      data: data,\n      options: options\n    })]\n  });\n};\n\nexport default MorphoWrapper;","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"/Users/getta/dev/portals/hippocampus-model-portal/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/getta/dev/portals/hippocampus-model-portal/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport MorphoWrapper from './MorphoWrapper';\n\nvar MorphoViewerContainer = function MorphoViewerContainer(_ref) {\n  var path = _ref.path;\n\n  var _React$useState = React.useState({\n    loading: true,\n    error: null,\n    data: null\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      _React$useState2$ = _React$useState2[0],\n      loading = _React$useState2$.loading,\n      error = _React$useState2$.error,\n      data = _React$useState2$.data,\n      setData = _React$useState2[1];\n\n  var _React$useState3 = React.useState({\n    asPolyline: true,\n    focusOn: true,\n    somaMode: 'fromOrphanSections'\n  }),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      options = _React$useState4[0],\n      setOptions = _React$useState4[1];\n\n  React.useEffect(function () {\n    fetch(path).then(function (res) {\n      return res.text();\n    }).then(function (data) {\n      return setData({\n        data: data,\n        error: null,\n        loading: false\n      });\n    })[\"catch\"](function (error) {\n      return setData({\n        error: error,\n        data: null,\n        loading: false\n      });\n    });\n  }, [path]);\n\n  var handleAsPolyline = function handleAsPolyline() {\n    setOptions(_objectSpread(_objectSpread({}, options), {}, {\n      asPolyline: !options.asPolyline\n    }));\n  };\n\n  return /*#__PURE__*/_jsx(MorphoWrapper, _objectSpread({}, {\n    loading: loading,\n    error: error,\n    data: data,\n    options: options,\n    onPolylineClick: handleAsPolyline\n  }));\n};\n\nexport default MorphoViewerContainer;","\n\nfunction parse(str) {\n  if(typeof buf !== 'string') {\n    str = str.toString();\n  }\n\n  var lines = str.trim().split('\\n');\n\n  var positions = [];\n  var cells = [];\n  var vertexUVs = [];\n  var vertexNormals = [];\n  var faceUVs = [];\n  var faceNormals = [];\n  var name = null;\n\n  for(var i=0; i<lines.length; i++) {\n    var line = lines[i];\n\n    if(line[0] === '#') continue;\n\n    var parts = line\n      .trim()\n      .replace(/ +/g, ' ')\n      .split(' ');\n\n    switch(parts[0]) {\n      case 'o':\n        name = parts.slice(1).join(' ');\n        break;\n      case 'v':\n        var position = parts.slice(1).map(Number).slice(0, 3);\n        positions.push(position);\n        break;\n      case 'vt':\n        var uv = parts.slice(1).map(Number);\n        vertexUVs.push(uv);\n        break;\n      case 'vn':\n        var normal = parts.slice(1).map(Number);\n        vertexNormals.push(normal);\n        break;\n      case 'f':\n        var positionIndices = [];\n        var uvIndices = [];\n        var normalIndices = [];\n\n        parts\n          .slice(1)\n          .forEach(function(part) {\n            var indices = part\n              .split('/')\n              .map(function(index) {\n                if(index === '') {\n                  return NaN;\n                }\n                return Number(index);\n              })\n\n            positionIndices.push(convertIndex(indices[0], positions.length));\n\n            if(indices.length > 1) {\n              if(!isNaN(indices[1])) {\n                uvIndices.push(convertIndex(indices[1], vertexUVs.length));\n              }\n              if(!isNaN(indices[2])) {\n                normalIndices.push(convertIndex(indices[2], vertexNormals.length));\n              }\n            }\n\n          });\n\n          cells.push(positionIndices);\n\n          if(uvIndices.length > 0) {\n            faceUVs.push(uvIndices);\n          }\n          if(normalIndices.length > 0) {\n            faceNormals.push(normalIndices);\n          }\n          \n        break;\n      default:\n        // skip\n    }\n\n  }\n\n  var mesh = {\n    positions: positions,\n    cells: cells\n  };\n\n  if(vertexUVs.length > 0) {\n    mesh.vertexUVs = vertexUVs;\n  }\n\n  if(faceUVs.length > 0) { \n    mesh.faceUVs = faceUVs;\n  }\n\n  if(vertexNormals.length > 0) {\n    mesh.vertexNormals = vertexNormals;\n  }\n\n  if(faceNormals.length > 0) {\n    mesh.faceNormals = faceNormals;\n  }\n\n  if(name !== null) {\n    mesh.name = name;\n  }\n\n  return mesh;\n}\n\nfunction convertIndex(objIndex, arrayLength) {\n  return objIndex > 0 ? objIndex - 1 : objIndex + arrayLength;\n}\n\nmodule.exports = parse;\n","'use strict';\n\n\nvar zlib_deflate = require('./zlib/deflate');\nvar utils        = require('./utils/common');\nvar strings      = require('./utils/strings');\nvar msg          = require('./zlib/messages');\nvar ZStream      = require('./zlib/zstream');\n\nvar toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nvar Z_NO_FLUSH      = 0;\nvar Z_FINISH        = 4;\n\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_SYNC_FLUSH    = 2;\n\nvar Z_DEFAULT_COMPRESSION = -1;\n\nvar Z_DEFAULT_STRATEGY    = 0;\n\nvar Z_DEFLATED  = 8;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array|Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param)  or if you\n * push a chunk with explicit flush (call [[Deflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate(options) {\n  if (!(this instanceof Deflate)) return new Deflate(options);\n\n  this.options = utils.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status = zlib_deflate.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  if (opt.header) {\n    zlib_deflate.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    var dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = zlib_deflate.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK) {\n      throw new Error(msg[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Deflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the compression context.\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * array format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var status, _mode;\n\n  if (this.ended) { return false; }\n\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? Z_FINISH : Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n    status = zlib_deflate.deflate(strm, _mode);    /* no bad return value */\n\n    if (status !== Z_STREAM_END && status !== Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n    if (strm.avail_out === 0 || (strm.avail_in === 0 && (_mode === Z_FINISH || _mode === Z_SYNC_FLUSH))) {\n      if (this.options.to === 'string') {\n        this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output, strm.next_out)));\n      } else {\n        this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n      }\n    }\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== Z_STREAM_END);\n\n  // Finalize on the last chunk.\n  if (_mode === Z_FINISH) {\n    status = zlib_deflate.deflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === Z_SYNC_FLUSH) {\n    this.onEnd(Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , data = Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate(input, options) {\n  var deflator = new Deflate(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || msg[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate(input, options);\n}\n\n\nexports.Deflate = Deflate;\nexports.deflate = deflate;\nexports.deflateRaw = deflateRaw;\nexports.gzip = gzip;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils = require('../utils/common');\n\nvar MAXBITS = 15;\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\nvar lbase = [ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n];\n\nvar lext = [ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n];\n\nvar dbase = [ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n];\n\nvar dext = [ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n];\n\nmodule.exports = function inflate_table(type, lens, lens_index, codes, table, table_index, work, opts)\n{\n  var bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  var len = 0;               /* a code's length in bits */\n  var sym = 0;               /* index of code symbols */\n  var min = 0, max = 0;          /* minimum and maximum code lengths */\n  var root = 0;              /* number of index bits for root table */\n  var curr = 0;              /* number of index bits for current table */\n  var drop = 0;              /* code bits to drop for sub-table */\n  var left = 0;                   /* number of prefix codes available */\n  var used = 0;              /* code entries in table used */\n  var huff = 0;              /* Huffman code */\n  var incr;              /* for incrementing code, index */\n  var fill;              /* index for replicating entries */\n  var low;               /* low bits for current root entry */\n  var mask;              /* mask for low root bits */\n  var next;             /* next available space in table */\n  var base = null;     /* base value table to use */\n  var base_index = 0;\n//  var shoextra;    /* extra bits table to use */\n  var end;                    /* use base and extra for symbol > end */\n  var count = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  var offs = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  var extra = null;\n  var extra_index = 0;\n\n  var here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES) {\n    base = extra = work;    /* dummy value--not used */\n    end = 19;\n\n  } else if (type === LENS) {\n    base = lbase;\n    base_index -= 257;\n    extra = lext;\n    extra_index -= 257;\n    end = 256;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    end = -1;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS && used > ENOUGH_LENS) ||\n    (type === DISTS && used > ENOUGH_DISTS)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] < end) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] > end) {\n      here_op = extra[extra_index + work[sym]];\n      here_val = base[base_index + work[sym]];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS && used > ENOUGH_LENS) ||\n        (type === DISTS && used > ENOUGH_DISTS)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n","'use strict';\n\n\nvar zlib_inflate = require('./zlib/inflate');\nvar utils        = require('./utils/common');\nvar strings      = require('./utils/strings');\nvar c            = require('./zlib/constants');\nvar msg          = require('./zlib/messages');\nvar ZStream      = require('./zlib/zstream');\nvar GZheader     = require('./zlib/gzheader');\n\nvar toString = Object.prototype.toString;\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param) or if you\n * push a chunk with explicit flush (call [[Inflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate(options) {\n  if (!(this instanceof Inflate)) return new Inflate(options);\n\n  this.options = utils.assign({\n    chunkSize: 16384,\n    windowBits: 0,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status  = zlib_inflate.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== c.Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  this.header = new GZheader();\n\n  zlib_inflate.inflateGetHeader(this.strm, this.header);\n\n  // Setup dictionary\n  if (opt.dictionary) {\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      opt.dictionary = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      opt.dictionary = new Uint8Array(opt.dictionary);\n    }\n    if (opt.raw) { //In raw mode we need to set the dictionary early\n      status = zlib_inflate.inflateSetDictionary(this.strm, opt.dictionary);\n      if (status !== c.Z_OK) {\n        throw new Error(msg[status]);\n      }\n    }\n  }\n}\n\n/**\n * Inflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Inflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the decompression context.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var dictionary = this.options.dictionary;\n  var status, _mode;\n  var next_out_utf8, tail, utf8str;\n\n  // Flag to properly process Z_BUF_ERROR on testing inflate call\n  // when we check that all output data was flushed.\n  var allowBufError = false;\n\n  if (this.ended) { return false; }\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? c.Z_FINISH : c.Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // Only binary strings can be decompressed on practice\n    strm.input = strings.binstring2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = zlib_inflate.inflate(strm, c.Z_NO_FLUSH);    /* no bad return value */\n\n    if (status === c.Z_NEED_DICT && dictionary) {\n      status = zlib_inflate.inflateSetDictionary(this.strm, dictionary);\n    }\n\n    if (status === c.Z_BUF_ERROR && allowBufError === true) {\n      status = c.Z_OK;\n      allowBufError = false;\n    }\n\n    if (status !== c.Z_STREAM_END && status !== c.Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === c.Z_STREAM_END || (strm.avail_in === 0 && (_mode === c.Z_FINISH || _mode === c.Z_SYNC_FLUSH))) {\n\n        if (this.options.to === 'string') {\n\n          next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          tail = strm.next_out - next_out_utf8;\n          utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) { utils.arraySet(strm.output, strm.output, next_out_utf8, tail, 0); }\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n        }\n      }\n    }\n\n    // When no more input data, we should check that internal inflate buffers\n    // are flushed. The only way to do it when avail_out = 0 - run one more\n    // inflate pass. But if output data not exists, inflate return Z_BUF_ERROR.\n    // Here we set flag to process this error properly.\n    //\n    // NOTE. Deflate does not return error in this case and does not needs such\n    // logic.\n    if (strm.avail_in === 0 && strm.avail_out === 0) {\n      allowBufError = true;\n    }\n\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== c.Z_STREAM_END);\n\n  if (status === c.Z_STREAM_END) {\n    _mode = c.Z_FINISH;\n  }\n\n  // Finalize on the last chunk.\n  if (_mode === c.Z_FINISH) {\n    status = zlib_inflate.inflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === c.Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === c.Z_SYNC_FLUSH) {\n    this.onEnd(c.Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === c.Z_OK) {\n    if (this.options.to === 'string') {\n      // Glue & convert here, until we teach pako to send\n      // utf8 aligned strings to onData\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , input = pako.deflate([1,2,3,4,5,6,7,8,9])\n *   , output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err)\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate(input, options) {\n  var inflator = new Inflate(options);\n\n  inflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) { throw inflator.msg || msg[inflator.err]; }\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nexports.Inflate = Inflate;\nexports.inflate = inflate;\nexports.inflateRaw = inflateRaw;\nexports.ungzip  = inflate;\n","// String encode/decode helpers\n'use strict';\n\n\nvar utils = require('./common');\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nvar STR_APPLY_OK = true;\nvar STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, [ 0 ]); } catch (__) { STR_APPLY_OK = false; }\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nvar _utf8len = new utils.Buf8(256);\nfor (var q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nexports.string2buf = function (str) {\n  var buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new utils.Buf8(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper (used in 2 places)\nfunction buf2binstring(buf, len) {\n  // On Chrome, the arguments in a function call that are allowed is `65534`.\n  // If the length of the buffer is smaller than that, we can use this optimization,\n  // otherwise we will take a slower path.\n  if (len < 65534) {\n    if ((buf.subarray && STR_APPLY_UIA_OK) || (!buf.subarray && STR_APPLY_OK)) {\n      return String.fromCharCode.apply(null, utils.shrinkBuf(buf, len));\n    }\n  }\n\n  var result = '';\n  for (var i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n}\n\n\n// Convert byte array to binary string\nexports.buf2binstring = function (buf) {\n  return buf2binstring(buf, buf.length);\n};\n\n\n// Convert binary string (typed, when possible)\nexports.binstring2buf = function (str) {\n  var buf = new utils.Buf8(str.length);\n  for (var i = 0, len = buf.length; i < len; i++) {\n    buf[i] = str.charCodeAt(i);\n  }\n  return buf;\n};\n\n\n// convert array to string\nexports.buf2string = function (buf, max) {\n  var i, out, c, c_len;\n  var len = max || buf.length;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  var utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nexports.utf8border = function (buf, max) {\n  var pos;\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nvar BAD = 30;       /* got a data error -- remain here until reset */\nvar TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nmodule.exports = function inflate_fast(strm, start) {\n  var state;\n  var _in;                    /* local strm.input */\n  var last;                   /* have enough input while in < last */\n  var _out;                   /* local strm.output */\n  var beg;                    /* inflate()'s initial strm.output */\n  var end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  var dmax;                   /* maximum distance from zlib header */\n//#endif\n  var wsize;                  /* window size or zero if not using window */\n  var whave;                  /* valid bytes in the window */\n  var wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  var s_window;               /* allocated sliding window, if wsize != 0 */\n  var hold;                   /* local strm.hold */\n  var bits;                   /* local strm.bits */\n  var lcode;                  /* local strm.lencode */\n  var dcode;                  /* local strm.distcode */\n  var lmask;                  /* mask for first level of length codes */\n  var dmask;                  /* mask for first level of distance codes */\n  var here;                   /* retrieved table entry */\n  var op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  var len;                    /* match length, unused bytes */\n  var dist;                   /* match distance */\n  var from;                   /* where to copy match from */\n  var from_source;\n\n\n  var input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nmodule.exports = GZheader;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nmodule.exports = ZStream;\n","import morphologycorejs from 'morphologycorejs';\n\n/*\n * Defines the SWC standard types as in http://www.neuronland.org/NLMorphologyConverter/MorphologyFormats/SWC/Spec.html\n */\nvar SWC_TYPES = {\n  UNDEFINED: 0,\n  SOMA: 1,\n  AXON: 2,\n  BASAL_DENDRITE: 3,\n  APICAL_DENDRITE: 4,\n  CUSTOM: 5,\n};\n\n/**\n * A TreeNode instance represent a point from the SWC file. It has a 3D coordinate,\n * an ID, a type, a radius, a reference to a parent (which is also a TreeNode\n * instance) and a list of children (also TreeNode instances).\n *\n * **Ressources**\n * - [SWC Spec](http://www.neuronland.org/NLMorphologyConverter/MorphologyFormats/SWC/Spec.html)\n */\nclass TreeNode {\n  /**\n   * @param {Number} id - the id of the point\n   * @param {Number} type - type of structure this point comes from (cf. SWC spec)\n   * @param {Number} x - x component of the 3D coordinates\n   * @param {Number} y - y component of the 3D coordinates\n   * @param {Number} z - z component of the 3D coordinates\n   * @param {Number} r - radius at this given point\n   */\n  constructor(id, type, x, y, z, r) {\n    this._id = id;\n    this._type = type;\n    this._position = [x, y, z];\n    this._radius = r;\n\n    this._parent = null;\n    this._parentId = null;\n    this._children = [];\n  }\n\n  /**\n   * Get the ID of _this_ node\n   * @return {Number}\n   */\n  getId() {\n    return this._id\n  }\n\n  /**\n   * Get the type as a number (according to the SWC spec)\n   * @return {Number}\n   */\n  getType() {\n    return this._type\n  }\n\n  /**\n   * @return {Boolean} true if this node is a soma, false if not\n   */\n  isSoma() {\n    return (this._type === SWC_TYPES.SOMA)\n  }\n\n  /**\n   * Get teh radius of _this_ node\n   * @return {Number}\n   */\n  getRadius() {\n    return this._radius\n  }\n\n  /**\n   * Get the 3D coordinates of this node\n   */\n  getPosition() {\n    return this._position\n  }\n\n  /**\n   * Define the parent of _this_ node\n   * @param {TreeNode} parent - the parent node\n   */\n  setParent(pNode) {\n    this._parent = pNode;\n    pNode._addChild(this);\n  }\n\n  /**\n   * Get the parent node of _this_ one\n   * @return {TreeNode}\n   */\n  getParent() {\n    return this._parent\n  }\n\n\n  /**\n   * Set the id of the parent node.\n   * This is mainly used as a temporary data before the parent object is actually set.\n   * @param {Number} id\n   */\n  setParentId(id) {\n    this._parentId = id;\n  }\n\n\n  /**\n   * Get the id of the parent.\n   * This is mainly used as a temporary data before the parent object is actually set.\n   * @return {Number}\n   */\n  getParentId() {\n    return this._parentId\n  }\n\n\n  /**\n   * @private\n   * Add a child to _this_ node\n   * @param {TreeNode} cNode - a node to add as a child of _this_\n   */\n  _addChild(cNode) {\n    if (!this.doesAlreadyHaveChild(cNode)) {\n      this._children.push(cNode);\n    }\n  }\n\n\n  /**\n   * Get all the chidren\n   * @return {Array} array of TreeNode instances\n   */\n  getChildren() {\n    return this._children\n  }\n\n  /**\n   * Get all the children that are not soma points.\n   * @return {Array} array of TreeNode instances\n   */\n  getNonSomaChildren() {\n    return this._children.filter(c => !c.isSoma())\n  }\n\n\n  /**\n   * Check is _this_ node already has the given child amond its list of children\n   * @param {TreeNode} cNode - some node to test, most likely a potential child\n   * @return {Boolean} true if this child is already present, false if not\n   */\n  doesAlreadyHaveChild(cNode) {\n    for (let i = 0; i < this._children.length; i += 1) {\n      if (this._children[i].getId() === cNode.getId()) { return true }\n    }\n    return false\n  }\n\n  /**\n   * Dive into the TreeNode connection by following the children. Builds a list\n   * all along. Stops when:\n   * - a node has no more children (end of branch)\n   * - a node has two children or more (forking point)\n   * - a point is of another type as the starting one (eg. dendrite becomes axon)\n   * What is returned in the end is an array that can be empty (if end of branch)\n   * or with two or more TreeNode instance being the forking direction\n   * @param {Array} nodeList - contains the previous TreeNode (parent, grand parents, etc.)\n   * this array is only pushed to, nothing is taken or read from it.\n   * @return {Array} of TreeNodes that are forking direction.\n   */\n  dive(nodeList) {\n    // adding the current node on the list\n    nodeList.push(this);\n\n    const children = this.getChildren();\n\n    // this current node is in the middle of a sections, we go on...\n    if (children.length === 1 && children[0].getType() === this._type) {\n      return children[0].dive(nodeList)\n    }\n\n    return children\n  }\n}\n\n/**\n * A TreeNodeCollection instance builds all the TreeNode instances from the raw\n * points list from the SWC file. As a second step, it builds the parent/children\n * relations between the nodes and as a third step, define a list of sections.\n */\nclass TreeNodeCollection {\n  /**\n   * @param {Array} points - every points of the array is itself an Array of form:\n   * [\n   *     pointId: Number,\n   *     pointType: Number,\n   *     x: Number,\n   *     y: Number,\n   *     z: Number,\n   *     radius: Number,\n   *     parentId: Number\n   *   ]\n   */\n  constructor(points) {\n    this._nodes = {};\n    this._rawSoma = null;\n    this._rawSections = null;\n    this._rawMorphology = null;\n    this._morphology = null;\n    this._initCollection(points);\n    this._buildSections();\n    this._buildMorphologyObjects();\n  }\n\n  /**\n   * Get the raw morphology flat tree\n   * @return {Object} the soma and all the sections at the same level.\n   * Still, all the info about parent/children are present\n   */\n  getRawMorphology() {\n    return this._rawMorphology\n  }\n\n  /**\n   * Get the morphology object, which is much easier to query than the raw morphology\n   * @return {morphologycorejs.Morphology}\n   *\n   */\n  getMorphology() {\n    return this._morphology\n  }\n\n  /**\n   * @private\n   * Makes the list of nodes\n   */\n  _initCollection(points) {\n    const somaNodes = [];\n\n    for (let i = 0; i < points.length; i += 1) {\n      const aNode = new TreeNode(\n        points[i][0], // id\n        points[i][1], // type\n        points[i][2], // x\n        points[i][3], // y\n        points[i][4], // z\n        points[i][5], // radius\n      );\n\n      this._nodes[points[i][0]] = aNode;\n\n      // The soma nodes: in addition to put them in the regular collection,\n      // we also put them in a small collection we keep on the side\n      if (points[i][1] === SWC_TYPES.SOMA) {\n        somaNodes.push(aNode);\n      }\n\n      // In the SWC, a node/point seems to be always described after its parent,\n      // so we can makes the parent/children links in the same loop\n      const parentId = points[i][6];\n\n      // the first point of the soma has no parent\n      if (parentId === -1) {\n        // eslint-disable-next-line no-continue\n        continue\n      }\n\n      // just setting the parent id because the parent object might be declared later on the list\n      // and thus not exist yet as an object.\n      aNode.setParentId(parentId);\n    }\n\n    // setting the parent node object happens in a second pass to ensure all the node are\n    // created before any node association is done.\n    Object.values(this._nodes).forEach((n) => {\n      const parentId = n.getParentId();\n\n      if (parentId === null) {\n        return\n      }\n\n      n.setParent(this._nodes[parentId]);\n    });\n\n    // build the soma if we have some soma points\n    if (somaNodes.length) {\n      this._rawSoma = {\n        id: 0, // just to have the same format as the NeuroM converter\n        type: 'soma',\n        // the radius are usually all the same, but just in case, we take the largest one\n        radius: Math.max(...somaNodes.map(n => n.getRadius())),\n        points: somaNodes.map(n => ({ position: n.getPosition() })),\n      };\n    }\n  }\n\n  /**\n   * @private\n   * Reconstruct all the section from the nodes, give them IDs and establish the\n   * parent/children relationship\n   */\n  _buildSections() {\n    let currentSectionId = 0;\n    const sections = [];\n\n    // adding all the the orphan nodes as starting points of sections\n    // (there should be only one, but we know things can go wrong)\n    const starterNodes = Object.values(this._nodes).filter(n => n.getParent() === null);\n    const stack = [];\n\n    starterNodes.forEach((n) => {\n      stack.push({\n        node: n,\n        parentSectionId: null,\n      });\n    });\n\n    function buildRawSection(startingNode, parentSectionId) {\n      // the nodeList is the list of node for the section we are building.\n      // Let's say it's just a simpler version of the future section object\n      const nodeList = [];\n\n      // for each starting node, we actually have to start by adding its parent\n      // to start the branch from its very basis\n      if (startingNode.getParent()) {\n        nodeList.push(startingNode.getParent());\n      }\n\n      const nextNodes = startingNode.dive(nodeList);\n\n      const points = nodeList.map(n => ({\n        position: n.getPosition(),\n        radius: n.getRadius(),\n      }));\n\n      // if the first point is a soma point, we dont keep the first radius\n      // because it's the radius of the soma\n      // if (parentSectionId === null && points.length) {\n      //   points[0].radius = 0\n      // }\n\n      // now nodeList is full of nodes\n      const section = {\n        typevalue: startingNode.getType(),\n        points,\n        id: currentSectionId,\n        children: [],\n        parent: parentSectionId,\n      };\n\n      // adding this section as a child of its parent\n      if (parentSectionId !== null) {\n        sections[parentSectionId].children.push(currentSectionId);\n      }\n\n      // adding the next nodes as new section starting points\n      for (let i = 0; i < nextNodes.length; i += 1) {\n        stack.push({\n          node: nextNodes[i],\n          parentSectionId: currentSectionId,\n        });\n      }\n\n      currentSectionId += 1;\n      return section\n    }\n\n    // popping the stack\n    while (stack.length) {\n      const stackElem = stack.pop();\n      const section = buildRawSection(stackElem.node, stackElem.parentSectionId);\n      sections.push(section);\n      sections[section.id] = section;\n    }\n\n    if (sections.length) {\n      this._rawSections = sections;\n    }\n  }\n\n  /**\n   * @private\n   * Performs some verification and then assemble the raw morphology\n   */\n  _buildMorphologyObjects() {\n    // it's ok to not have any section\n    if (!this._rawSections) {\n      console.warn('This morphology has no section to export');\n    }\n\n    // it's ok to not have a soma\n    if (!this._rawSoma) {\n      console.warn('This morphology has no soma to show');\n    }\n\n    // but it's not ok to have nothing at all\n    if (!this._rawSections && !this._rawSoma) {\n      console.warn('No valid morphology data.');\n      return\n    }\n\n    this._rawMorphology = {\n      soma: this._rawSoma,\n      sections: this._rawSections,\n    };\n\n    this._morphology = new morphologycorejs.Morphology();\n    this._morphology.buildFromRawMorphology(this._rawMorphology);\n  }\n}\n\n/**\n * An instance of SwcParser is made to parse SWC files with\n * [the given specification](http://www.neuronland.org/NLMorphologyConverter/MorphologyFormats/SWC/Spec.html).\n * The data output by this parser is a Javascript object representing a the tree\n * structure of the morphology. Each node of the tree is a section that contain a reference\n * to its parent section and references to its children sections.\n * The tree is given flat, meaning all the sections are at the same hierarchy\n * level within the JS object and every section is identified by an arbitrary ID.\n */\nclass SwcParser {\n  constructor() {\n    this._morphology = null;\n    this._rawMorphology = null;\n  }\n\n\n  /**\n   * Parses a SWC string. This SWC string is simply the text content of an SWC file.\n   * This method does not return any reult (use one of the getters for that)\n   * @param {String} swcStr - the string that comes from the SWC file\n   */\n  parse(swcStr) {\n    this._morphology = null;\n    this._rawMorphology = null;\n    const rawPoints = SwcParser.extractPoints(swcStr);\n    const treeNodeCollection = new TreeNodeCollection(rawPoints);\n    this._morphology = treeNodeCollection.getMorphology();\n    this._rawMorphology = treeNodeCollection.getRawMorphology();\n    const type2Nodes = Object.values(treeNodeCollection._nodes).filter(n => n._type === 2);\n    let aType2Node = type2Nodes[0];\n    while (aType2Node._parent) {\n      aType2Node = aType2Node._parent;\n    }\n  }\n\n\n  /**\n   * Get the raw morphology flat tree\n   * @return {Object} the soma and all the sections at the same level.\n   * Still, all the info about parent/children are present\n   */\n  getRawMorphology() {\n    return this._rawMorphology\n  }\n\n  /**\n   * Get the morphology object, which is much easier to query than the raw morphology\n   * @return {morphologycorejs.Morphology}\n   *\n   */\n  getMorphology() {\n    return this._morphology\n  }\n\n  /**\n   * @private\n   * build an Array of points from the SWC string.\n   * Each element of the array is itself an Array representing a point and it's metadata.\n   * A single point is an Array of form:\n   *   [\n   *     pointId: Number,\n   *     pointType: Number,\n   *     x: Number,\n   *     y: Number,\n   *     z: Number,\n   *     radius: Number,\n   *     parentId: Number\n   *   ]\n   * @param {String} swcStr - the string from the SWC file\n   * @return {Array} all the points\n   */\n  static extractPoints(swcStr) {\n    // remove header/comments from SWC\n    let result = swcStr.replace(/\\s*#.*?$/mg, '');\n    // remove empty lines and empty last line\n    result = result.trim().replace(/^\\s*$/mg, '');\n\n    // store the data in memory-efficient typed arrays\n    const lines = result.split('\\n');\n    const swcPoints = [];\n\n    for (let i = 0; i < lines.length; i += 1) {\n      const row = lines[i].replace(/^\\s+/m, '').replace(/\\s+$/m, '').split(/[\\s,]+/);\n      if (row.length >= 7) {\n        // allow for sloppy SWC that contains integers written as floats\n        swcPoints[i] = [\n          Math.round(parseFloat(row[0])),\n          Math.round(parseFloat(row[1])),\n          parseFloat(row[2]),\n          parseFloat(row[3]),\n          parseFloat(row[4]),\n          parseFloat(row[5]),\n          Math.round(parseFloat(row[6])),\n        ];\n      }\n    }\n    return swcPoints\n  }\n}\n\nvar index = ({\n  SwcParser,\n});\n\nexport default index;\n//# sourceMappingURL=swcmorphologyparser.js.map\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils         = require('../utils/common');\nvar adler32       = require('./adler32');\nvar crc32         = require('./crc32');\nvar inflate_fast  = require('./inffast');\nvar inflate_table = require('./inftrees');\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\n//var Z_NO_FLUSH      = 0;\n//var Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\n//var Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\nvar Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\nvar Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nvar    HEAD = 1;       /* i: waiting for magic header */\nvar    FLAGS = 2;      /* i: waiting for method and flags (gzip) */\nvar    TIME = 3;       /* i: waiting for modification time (gzip) */\nvar    OS = 4;         /* i: waiting for extra flags and operating system (gzip) */\nvar    EXLEN = 5;      /* i: waiting for extra length (gzip) */\nvar    EXTRA = 6;      /* i: waiting for extra bytes (gzip) */\nvar    NAME = 7;       /* i: waiting for end of file name (gzip) */\nvar    COMMENT = 8;    /* i: waiting for end of comment (gzip) */\nvar    HCRC = 9;       /* i: waiting for header crc (gzip) */\nvar    DICTID = 10;    /* i: waiting for dictionary check value */\nvar    DICT = 11;      /* waiting for inflateSetDictionary() call */\nvar        TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\nvar        TYPEDO = 13;    /* i: same, but skip check to exit inflate on new block */\nvar        STORED = 14;    /* i: waiting for stored size (length and complement) */\nvar        COPY_ = 15;     /* i/o: same as COPY below, but only first time in */\nvar        COPY = 16;      /* i/o: waiting for input or output to copy stored block */\nvar        TABLE = 17;     /* i: waiting for dynamic block table lengths */\nvar        LENLENS = 18;   /* i: waiting for code length code lengths */\nvar        CODELENS = 19;  /* i: waiting for length/lit and distance code lengths */\nvar            LEN_ = 20;      /* i: same as LEN below, but only first time in */\nvar            LEN = 21;       /* i: waiting for length/lit/eob code */\nvar            LENEXT = 22;    /* i: waiting for length extra bits */\nvar            DIST = 23;      /* i: waiting for distance code */\nvar            DISTEXT = 24;   /* i: waiting for distance extra bits */\nvar            MATCH = 25;     /* o: waiting for output space to copy string */\nvar            LIT = 26;       /* o: waiting for output space to write literal */\nvar    CHECK = 27;     /* i: waiting for 32-bit check value */\nvar    LENGTH = 28;    /* i: waiting for 32-bit length (gzip) */\nvar    DONE = 29;      /* finished check, done -- remain here until reset */\nvar    BAD = 30;       /* got a data error -- remain here until reset */\nvar    MEM = 31;       /* got an inflate() memory error -- remain here until reset */\nvar    SYNC = 32;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_WBITS = MAX_WBITS;\n\n\nfunction zswap32(q) {\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n}\n\n\nfunction InflateState() {\n  this.mode = 0;             /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib) */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new utils.Buf16(320); /* temporary storage for code lengths */\n  this.work = new utils.Buf16(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new utils.Buf32(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\nfunction inflateResetKeep(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new utils.Buf32(ENOUGH_LENS);\n  state.distcode = state.distdyn = new utils.Buf32(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK;\n}\n\nfunction inflateReset(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n}\n\nfunction inflateReset2(strm, windowBits) {\n  var wrap;\n  var state;\n\n  /* get the state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 1;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n}\n\nfunction inflateInit2(strm, windowBits) {\n  var ret;\n  var state;\n\n  if (!strm) { return Z_STREAM_ERROR; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.window = null/*Z_NULL*/;\n  ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n}\n\nfunction inflateInit(strm) {\n  return inflateInit2(strm, DEF_WBITS);\n}\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nvar virgin = true;\n\nvar lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\nfunction fixedtables(state) {\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    var sym;\n\n    lenfix = new utils.Buf32(512);\n    distfix = new utils.Buf32(32);\n\n    /* literal/length table */\n    sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inflate_table(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inflate_table(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n}\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nfunction updatewindow(strm, src, end, copy) {\n  var dist;\n  var state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new utils.Buf8(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    utils.arraySet(state.window, src, end - state.wsize, state.wsize, 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    utils.arraySet(state.window, src, end - copy, dist, state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      utils.arraySet(state.window, src, end - copy, copy, 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n}\n\nfunction inflate(strm, flush) {\n  var state;\n  var input, output;          // input/output buffers\n  var next;                   /* next input INDEX */\n  var put;                    /* next output INDEX */\n  var have, left;             /* available input and output */\n  var hold;                   /* bit buffer */\n  var bits;                   /* bits in bit buffer */\n  var _in, _out;              /* save starting available input and output */\n  var copy;                   /* number of stored or match bytes to copy */\n  var from;                   /* where to copy match bytes from */\n  var from_source;\n  var here = 0;               /* current decoding table entry */\n  var here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //var last;                   /* parent table entry */\n  var last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  var len;                    /* length to copy for repeats, bits to drop */\n  var ret;                    /* return code */\n  var hbuf = new utils.Buf8(4);    /* buffer for gzip header crc calculation */\n  var opts;\n\n  var n; // temporary var for NEED_BITS\n\n  var order = /* permutation of code lengths */\n    [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ];\n\n\n  if (!strm || !strm.state || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        state.flags = 0;           /* expect zlib header */\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        else if (len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD;\n          break;\n        }\n        state.dmax = 1 << len;\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if (state.flags & 0x0200) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Array(state.head.extra_len);\n              }\n              utils.arraySet(\n                state.head.extra,\n                input,\n                next,\n                // extra field is limited to 65536 bytes\n                // - no need for additional size check\n                copy,\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if (state.flags & 0x0200) {\n              state.check = crc32(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE;\n        /* falls through */\n      case TYPE:\n        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          utils.arraySet(output, input, next, copy, put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inflate_table(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inflate_fast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if (_out) {\n            strm.adler = state.check =\n                /*UPDATE(state.check, put - _out, _out);*/\n                (state.flags ? crc32(state.check, output, _out, put - _out) : adler32(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END;\n        break inf_leave;\n      case BAD:\n        ret = Z_DATA_ERROR;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) {\n      state.mode = MEM;\n      return Z_MEM_ERROR;\n    }\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if (state.wrap && _out) {\n    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32(state.check, output, _out, strm.next_out - _out) : adler32(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH) && ret === Z_OK) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n}\n\nfunction inflateEnd(strm) {\n\n  if (!strm || !strm.state /*|| strm->zfree == (free_func)0*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  var state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK;\n}\n\nfunction inflateGetHeader(strm, head) {\n  var state;\n\n  /* check state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK;\n}\n\nfunction inflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var state;\n  var dictid;\n  var ret;\n\n  /* check state */\n  if (!strm /* == Z_NULL */ || !strm.state /* == Z_NULL */) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK;\n}\n\nexports.inflateReset = inflateReset;\nexports.inflateReset2 = inflateReset2;\nexports.inflateResetKeep = inflateResetKeep;\nexports.inflateInit = inflateInit;\nexports.inflateInit2 = inflateInit2;\nexports.inflate = inflate;\nexports.inflateEnd = inflateEnd;\nexports.inflateGetHeader = inflateGetHeader;\nexports.inflateSetDictionary = inflateSetDictionary;\nexports.inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nexports.inflateCopy = inflateCopy;\nexports.inflateGetDictionary = inflateGetDictionary;\nexports.inflateMark = inflateMark;\nexports.inflatePrime = inflatePrime;\nexports.inflateSync = inflateSync;\nexports.inflateSyncPoint = inflateSyncPoint;\nexports.inflateUndermine = inflateUndermine;\n*/\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils   = require('../utils/common');\nvar trees   = require('./trees');\nvar adler32 = require('./adler32');\nvar crc32   = require('./crc32');\nvar msg     = require('./messages');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\nvar Z_NO_FLUSH      = 0;\nvar Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\nvar Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\n//var Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\n//var Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\n//var Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n\n/* compression levels */\n//var Z_NO_COMPRESSION      = 0;\n//var Z_BEST_SPEED          = 1;\n//var Z_BEST_COMPRESSION    = 9;\nvar Z_DEFAULT_COMPRESSION = -1;\n\n\nvar Z_FILTERED            = 1;\nvar Z_HUFFMAN_ONLY        = 2;\nvar Z_RLE                 = 3;\nvar Z_FIXED               = 4;\nvar Z_DEFAULT_STRATEGY    = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\n//var Z_BINARY              = 0;\n//var Z_TEXT                = 1;\n//var Z_ASCII               = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n/*============================================================================*/\n\n\nvar MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_MEM_LEVEL = 8;\n\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nvar D_CODES       = 30;\n/* number of distance codes */\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nvar MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar MIN_MATCH = 3;\nvar MAX_MATCH = 258;\nvar MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nvar PRESET_DICT = 0x20;\n\nvar INIT_STATE = 42;\nvar EXTRA_STATE = 69;\nvar NAME_STATE = 73;\nvar COMMENT_STATE = 91;\nvar HCRC_STATE = 103;\nvar BUSY_STATE = 113;\nvar FINISH_STATE = 666;\n\nvar BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nvar BS_BLOCK_DONE     = 2; /* block flush performed */\nvar BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nvar BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nvar OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nfunction err(strm, errorCode) {\n  strm.msg = msg[errorCode];\n  return errorCode;\n}\n\nfunction rank(f) {\n  return ((f) << 1) - ((f) > 4 ? 9 : 0);\n}\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output goes\n * through this function so some applications may wish to modify it\n * to avoid allocating a large strm->output buffer and copying into it.\n * (See also read_buf()).\n */\nfunction flush_pending(strm) {\n  var s = strm.state;\n\n  //_tr_flush_bits(s);\n  var len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  utils.arraySet(strm.output, s.pending_buf, s.pending_out, len, strm.next_out);\n  strm.next_out += len;\n  s.pending_out += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n}\n\n\nfunction flush_block_only(s, last) {\n  trees._tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n}\n\n\nfunction put_byte(s, b) {\n  s.pending_buf[s.pending++] = b;\n}\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nfunction putShortMSB(s, b) {\n//  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n}\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nfunction read_buf(strm, buf, start, size) {\n  var len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  utils.arraySet(buf, strm.input, strm.next_in, len, start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n}\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nfunction longest_match(s, cur_match) {\n  var chain_length = s.max_chain_length;      /* max hash chain length */\n  var scan = s.strstart; /* current string */\n  var match;                       /* matched string */\n  var len;                           /* length of current match */\n  var best_len = s.prev_length;              /* best match length so far */\n  var nice_match = s.nice_match;             /* stop if match long enough */\n  var limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  var _win = s.window; // shortcut\n\n  var wmask = s.w_mask;\n  var prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  var strend = s.strstart + MAX_MATCH;\n  var scan_end1  = _win[scan + best_len - 1];\n  var scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n}\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nfunction fill_window(s) {\n  var _w_size = s.w_size;\n  var p, n, m, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      utils.arraySet(s.window, s.window, _w_size, _w_size, 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n\n      /* Slide the hash table (could be avoided with 32 bit values\n       at the expense of memory usage). We slide even when level == 0\n       to keep the hash table consistent if we switch back to level > 0\n       later. (Using level 0 permanently is not an optimal usage of\n       zlib, so we don't care about this pathological case.)\n       */\n\n      n = s.hash_size;\n      p = n;\n      do {\n        m = s.head[--p];\n        s.head[p] = (m >= _w_size ? m - _w_size : 0);\n      } while (--n);\n\n      n = _w_size;\n      p = n;\n      do {\n        m = s.prev[--p];\n        s.prev[p] = (m >= _w_size ? m - _w_size : 0);\n        /* If n is not on any hash chain, prev[n] is garbage but\n         * its value will never be used.\n         */\n      } while (--n);\n\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + 1]) & s.hash_mask;\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    var curr = s.strstart + s.lookahead;\n//    var init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n}\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n * This function does not insert new strings in the dictionary since\n * uncompressible data is probably not useful. This function is used\n * only for the level=0 compression option.\n * NOTE: this function should be optimized to avoid extra copying from\n * window to pending_buf.\n */\nfunction deflate_stored(s, flush) {\n  /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n   * to pending_buf_size, and each stored block has a 5 byte header:\n   */\n  var max_block_size = 0xffff;\n\n  if (max_block_size > s.pending_buf_size - 5) {\n    max_block_size = s.pending_buf_size - 5;\n  }\n\n  /* Copy as much as possible from input to output: */\n  for (;;) {\n    /* Fill the window as much as possible: */\n    if (s.lookahead <= 1) {\n\n      //Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n      //  s->block_start >= (long)s->w_size, \"slide too late\");\n//      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n//        s.block_start >= s.w_size)) {\n//        throw  new Error(\"slide too late\");\n//      }\n\n      fill_window(s);\n      if (s.lookahead === 0 && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n\n      if (s.lookahead === 0) {\n        break;\n      }\n      /* flush the current block */\n    }\n    //Assert(s->block_start >= 0L, \"block gone\");\n//    if (s.block_start < 0) throw new Error(\"block gone\");\n\n    s.strstart += s.lookahead;\n    s.lookahead = 0;\n\n    /* Emit a stored block if pending_buf will be full: */\n    var max_start = s.block_start + max_block_size;\n\n    if (s.strstart === 0 || s.strstart >= max_start) {\n      /* strstart == 0 is possible when wraparound on 16-bit machine */\n      s.lookahead = s.strstart - max_start;\n      s.strstart = max_start;\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n\n    }\n    /* Flush if we may have to slide, otherwise block_start may become\n     * negative and the data will be gone:\n     */\n    if (s.strstart - s.block_start >= (s.w_size - MIN_LOOKAHEAD)) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n\n  s.insert = 0;\n\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n\n  if (s.strstart > s.block_start) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_NEED_MORE;\n}\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nfunction deflate_fast(s, flush) {\n  var hash_head;        /* head of the hash chain */\n  var bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + 1]) & s.hash_mask;\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nfunction deflate_slow(s, flush) {\n  var hash_head;          /* head of hash chain */\n  var bflush;              /* set if current block must be flushed */\n\n  var max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = trees._tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n}\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nfunction deflate_rle(s, flush) {\n  var bflush;            /* set if current block must be flushed */\n  var prev;              /* byte at distance one to match */\n  var scan, strend;      /* scan goes up to strend for length of run */\n\n  var _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nfunction deflate_huff(s, flush) {\n  var bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nvar configuration_table;\n\nconfiguration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nfunction lm_init(s) {\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n}\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new utils.Buf16(HEAP_SIZE * 2);\n  this.dyn_dtree  = new utils.Buf16((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new utils.Buf16((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new utils.Buf16(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new utils.Buf16(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new utils.Buf16(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.l_buf = 0;          /* buffer index for literals or lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.last_lit = 0;      /* running index in l_buf */\n\n  this.d_buf = 0;\n  /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n   * the same number of elements. To use different lengths, an extra flag\n   * array would be necessary.\n   */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\nfunction deflateResetKeep(strm) {\n  var s;\n\n  if (!strm || !strm.state) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status = (s.wrap ? INIT_STATE : BUSY_STATE);\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = Z_NO_FLUSH;\n  trees._tr_init(s);\n  return Z_OK;\n}\n\n\nfunction deflateReset(strm) {\n  var ret = deflateResetKeep(strm);\n  if (ret === Z_OK) {\n    lm_init(strm.state);\n  }\n  return ret;\n}\n\n\nfunction deflateSetHeader(strm, head) {\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  if (strm.state.wrap !== 2) { return Z_STREAM_ERROR; }\n  strm.state.gzhead = head;\n  return Z_OK;\n}\n\n\nfunction deflateInit2(strm, level, method, windowBits, memLevel, strategy) {\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR;\n  }\n  var wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  var s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new utils.Buf8(s.w_size * 2);\n  s.head = new utils.Buf16(s.hash_size);\n  s.prev = new utils.Buf16(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n\n  //overlay = (ushf *) ZALLOC(strm, s->lit_bufsize, sizeof(ush)+2);\n  //s->pending_buf = (uchf *) overlay;\n  s.pending_buf = new utils.Buf8(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->d_buf = overlay + s->lit_bufsize/sizeof(ush);\n  s.d_buf = 1 * s.lit_bufsize;\n\n  //s->l_buf = s->pending_buf + (1+sizeof(ush))*s->lit_bufsize;\n  s.l_buf = (1 + 2) * s.lit_bufsize;\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n}\n\nfunction deflateInit(strm, level) {\n  return deflateInit2(strm, level, Z_DEFLATED, MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY);\n}\n\n\nfunction deflate(strm, flush) {\n  var old_flush, s;\n  var beg, val; // for gzip header write only\n\n  if (!strm || !strm.state ||\n    flush > Z_BLOCK || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n\n  if (!strm.output ||\n      (!strm.input && strm.avail_in !== 0) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR : Z_STREAM_ERROR);\n  }\n\n  s.strm = strm; /* just in case */\n  old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Write the header */\n  if (s.status === INIT_STATE) {\n\n    if (s.wrap === 2) { // GZIP header\n      strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n      put_byte(s, 31);\n      put_byte(s, 139);\n      put_byte(s, 8);\n      if (!s.gzhead) { // s->gzhead == Z_NULL\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, OS_CODE);\n        s.status = BUSY_STATE;\n      }\n      else {\n        put_byte(s, (s.gzhead.text ? 1 : 0) +\n                    (s.gzhead.hcrc ? 2 : 0) +\n                    (!s.gzhead.extra ? 0 : 4) +\n                    (!s.gzhead.name ? 0 : 8) +\n                    (!s.gzhead.comment ? 0 : 16)\n        );\n        put_byte(s, s.gzhead.time & 0xff);\n        put_byte(s, (s.gzhead.time >> 8) & 0xff);\n        put_byte(s, (s.gzhead.time >> 16) & 0xff);\n        put_byte(s, (s.gzhead.time >> 24) & 0xff);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, s.gzhead.os & 0xff);\n        if (s.gzhead.extra && s.gzhead.extra.length) {\n          put_byte(s, s.gzhead.extra.length & 0xff);\n          put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n        }\n        if (s.gzhead.hcrc) {\n          strm.adler = crc32(strm.adler, s.pending_buf, s.pending, 0);\n        }\n        s.gzindex = 0;\n        s.status = EXTRA_STATE;\n      }\n    }\n    else // DEFLATE header\n    {\n      var header = (Z_DEFLATED + ((s.w_bits - 8) << 4)) << 8;\n      var level_flags = -1;\n\n      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n        level_flags = 0;\n      } else if (s.level < 6) {\n        level_flags = 1;\n      } else if (s.level === 6) {\n        level_flags = 2;\n      } else {\n        level_flags = 3;\n      }\n      header |= (level_flags << 6);\n      if (s.strstart !== 0) { header |= PRESET_DICT; }\n      header += 31 - (header % 31);\n\n      s.status = BUSY_STATE;\n      putShortMSB(s, header);\n\n      /* Save the adler32 of the preset dictionary: */\n      if (s.strstart !== 0) {\n        putShortMSB(s, strm.adler >>> 16);\n        putShortMSB(s, strm.adler & 0xffff);\n      }\n      strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    }\n  }\n\n//#ifdef GZIP\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n\n      while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            break;\n          }\n        }\n        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n        s.gzindex++;\n      }\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (s.gzindex === s.gzhead.extra.length) {\n        s.gzindex = 0;\n        s.status = NAME_STATE;\n      }\n    }\n    else {\n      s.status = NAME_STATE;\n    }\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.gzindex = 0;\n        s.status = COMMENT_STATE;\n      }\n    }\n    else {\n      s.status = COMMENT_STATE;\n    }\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.status = HCRC_STATE;\n      }\n    }\n    else {\n      s.status = HCRC_STATE;\n    }\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n      }\n      if (s.pending + 2 <= s.pending_buf_size) {\n        put_byte(s, strm.adler & 0xff);\n        put_byte(s, (strm.adler >> 8) & 0xff);\n        strm.adler = 0; //crc32(0L, Z_NULL, 0);\n        s.status = BUSY_STATE;\n      }\n    }\n    else {\n      s.status = BUSY_STATE;\n    }\n  }\n//#endif\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH && s.status !== FINISH_STATE)) {\n    var bstate = (s.strategy === Z_HUFFMAN_ONLY) ? deflate_huff(s, flush) :\n      (s.strategy === Z_RLE ? deflate_rle(s, flush) :\n        configuration_table[s.level].func(s, flush));\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        trees._tr_align(s);\n      }\n      else if (flush !== Z_BLOCK) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        trees._tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK;\n      }\n    }\n  }\n  //Assert(strm->avail_out > 0, \"bug2\");\n  //if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n\n  if (flush !== Z_FINISH) { return Z_OK; }\n  if (s.wrap <= 0) { return Z_STREAM_END; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK : Z_STREAM_END;\n}\n\nfunction deflateEnd(strm) {\n  var status;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  status = strm.state.status;\n  if (status !== INIT_STATE &&\n    status !== EXTRA_STATE &&\n    status !== NAME_STATE &&\n    status !== COMMENT_STATE &&\n    status !== HCRC_STATE &&\n    status !== BUSY_STATE &&\n    status !== FINISH_STATE\n  ) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;\n}\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nfunction deflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var s;\n  var str, n;\n  var wrap;\n  var avail;\n  var next;\n  var input;\n  var tmpDict;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n  wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    tmpDict = new utils.Buf8(s.w_size);\n    utils.arraySet(tmpDict, dictionary, dictLength - s.w_size, s.w_size, 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  avail = strm.avail_in;\n  next = strm.next_in;\n  input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    str = s.strstart;\n    n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK;\n}\n\n\nexports.deflateInit = deflateInit;\nexports.deflateInit2 = deflateInit2;\nexports.deflateReset = deflateReset;\nexports.deflateResetKeep = deflateResetKeep;\nexports.deflateSetHeader = deflateSetHeader;\nexports.deflate = deflate;\nexports.deflateEnd = deflateEnd;\nexports.deflateSetDictionary = deflateSetDictionary;\nexports.deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nexports.deflateBound = deflateBound;\nexports.deflateCopy = deflateCopy;\nexports.deflateParams = deflateParams;\nexports.deflatePending = deflatePending;\nexports.deflatePrime = deflatePrime;\nexports.deflateTune = deflateTune;\n*/\n","/*\n* Author   Jonathan Lurie - http://me.jonathanlurie.fr\n* License  Apache License 2.0\n* Lab      Blue Brain Project, EPFL\n*/\n\n\n/*\nStandardized swc files (www.neuromorpho.org)\n0 - undefined\n1 - soma\n2 - axon\n3 - (basal) dendrite\n4 - apical dendrite\n5+ - custom\n*/\nconst TYPEVALUE_2_TYPENAME = {\n  0: 'undefined',\n  1: 'soma',\n  2: 'axon',\n  3: 'basal_dendrite',\n  4: 'apical_dendrite',\n  5: 'custom',\n};\n\nconst SECTION_TYPECODES = {\n  undefined: 0,\n  soma: 1,\n  axon: 2,\n  basal_dendrite: 3,\n  apical_dendrite: 4,\n  custom: 5,\n};\n\n\n/**\n * A section is a list of 3D points and some metadata. A section can have one parent\n * and multiple children when the dendrite or axone divide into mutliple dendrites\n * and axons.\n * A section instance can be built from scratch of it can be built using a raw object,\n * usually from a JSON description.\n */\nclass Section {\n  /**\n   * To construct a section, we need a reference to the morphology instance that\n   * 'hosts' them. This may seem a bit a bit counter intuitive to have a reference\n   * in that direction but it can be very convenient, when knowing a section, to\n   * know to which morphology it belongs (i.e. raycasting a section)\n   * @param {Morphology} morphology - the Morphology instance that host _this_ section\n   */\n  constructor(morphology = null) {\n    this._id = null;\n    this._parent = null;\n    this._children = [];\n    this._typename = null;\n    this._typevalue = null;\n    this._points = null;\n    this._radiuses = null;\n    this._morphology = morphology;\n  }\n\n\n  /**\n   * Defines the id of this seciton.\n   * Note: should probably not be used after `initWithRawSection` because then\n   * sections already have ids and chance to messup the id game are pretty high.\n   * @param {String|Number} id - the id\n   */\n  setId(id) {\n    this._id = id;\n  }\n\n\n  /**\n   * Get the id of _this_ section\n   * @return {String|Number}\n   */\n  getId() {\n    return this._id\n  }\n\n\n  /**\n   * Define the typename, like in the SWC spec. Must be one of:\n   *  - \"undefined\"\n   *  - \"soma\" (even though this one should be used to build a Soma instance)\n   *  - \"axon\"\n   *  - \"basal_dendrite\"\n   *  - \"apical_dendrite\"\n   *  - \"custom\"\n   * Not that this method automaically sets the typevalue accordingly.\n   * For more info, go to http://www.neuronland.org/NLMorphologyConverter/MorphologyFormats/SWC/Spec.html\n   * @param {String} tn - the typename\n   */\n  setTypename(tn) {\n    if (tn in SECTION_TYPECODES) {\n      this._typename = tn;\n      this._typevalue = SECTION_TYPECODES[tn];\n    } else {\n      console.warn(`The typename must be one of ${Object.key(SECTION_TYPECODES).join(' ')}`);\n    }\n  }\n\n\n  /**\n   * Get the typename as a String\n   * @return {String}\n   */\n  getTypename() {\n    return this._typename\n  }\n\n\n  /**\n   * Defnies the typevalue, which is the integer that goes in pair with the type name.\n   * According to SWC spec. Must be one of:\n   * - 0, for undefined\n   * - 1, for soma (even though this one should be used to build a Soma instance)\n   * - 2, for axon\n   * - 3, for basal dendrite\n   * - 4, for apical dendrite\n   * - 5, for custom\n   * Note that defining the type value will automatically set the type name accordingly.\n   * @param {Number} tv - the type value\n   */\n  setTypeValue(tv) {\n    this._typevalue = tv;\n  }\n\n\n  /**\n   * Get the type value\n   * @return {Number}\n   */\n  getTypevalue() {\n    return this._typevalue\n  }\n\n  getTypeValue() {\n    return this._typevalue\n  }\n\n  /**\n   * Add a point to _this_ current section\n   * @param {Number} x - the x coordinate of the point to add\n   * @param {Number} y - the y coordinate of the point to add\n   * @param {Number} z - the z coordinate of the point to add\n   * @param {Number} r - the radius at the point to add. (default: 1)\n   */\n  addPoint(x, y, z, r = 1) {\n    this._points.push([x, y, z]);\n    this._radiuses.push(r);\n  }\n\n\n  /**\n   * Get all the points of _this_ section as an array\n   * @return {Array} each element are of form [x: Number, y: Number, y: Number]\n   */\n  getPoints() {\n    return this._points\n  }\n\n\n  /**\n   * Get all the radiuses of the point in _this_ section\n   * @return {Array}\n   */\n  getRadiuses() {\n    return this._radiuses\n  }\n\n\n  /**\n   * Build a section using a raw section object.\n   * @param {Object} rawSection - usually comes from a JSON file\n   */\n  initWithRawSection(rawSection) {\n    this._id = rawSection.id;\n\n    this._points = rawSection.points.map(p => p.position);\n    this._radiuses = rawSection.points.map(p => p.radius);\n\n    // in some cases, we have only the typename or the typevalue, in this case we perform  a lookup\n    if (rawSection.typename || rawSection.typevalue) {\n      this._typename = rawSection.typename || TYPEVALUE_2_TYPENAME[rawSection.typevalue];\n      this._typevalue = rawSection.typevalue || SECTION_TYPECODES[rawSection.typename];\n    }\n\n    return this._id\n  }\n\n\n  /**\n   * Define the parent section of _this_ section, as an object reference.\n   * The only verification perfomed by this method is that a section is not added\n   * as its own parent.\n   * @param {Section} section - the section that is the parent of this one\n   * @return {Boolean} true if parent was successfully defined, false if not.\n   */\n  setParent(section) {\n    if (section && section.getId() !== this._id) {\n      this._parent = section;\n      return true\n    }\n\n    console.warn('A section cannot be the parent of itself.');\n    return false\n  }\n\n\n  /**\n   * Get the parent section of _this_ section\n   * @return {Section} the parent\n   */\n  getParent() {\n    return this._parent\n  }\n\n\n  /**\n   * Make a given section the child of _this_ one.\n   * Two verifications are perfomed before: ids must be diferent so that we are\n   * not allowing a section to be the child of itself, and that _this_ section\n   * does not already have the given section as a children (=> avoid doublons)\n   * @param {Section} section - The section to add as a child\n   * @return {Boolean} true if successfully added (of if already has the given child),\n   * false if the candidate cannot be a child\n   */\n  addChild(section) {\n    if (section.getId() !== this._id) {\n      if (this.hasChild(section)) {\n        console.warn('The given section is already one of the child to this one.');\n      } else {\n        this._children.push(section);\n      }\n      return true\n    }\n    console.warn('A section cannot be the child of itself.');\n    return false\n  }\n\n\n  /**\n   * Checks if a given section is already one of the children of _this_ section\n   * @param {Section} section - a section to test\n   * @return {Boolean} true if the given section is already a child of _this_ section, false if not.\n   */\n  hasChild(section) {\n    if (!this._children) return false\n\n    const candidateId = section.getId();\n\n    for (let i = 0; i < this._children.length; i += 1) {\n      if (this._children[i].getId() === candidateId) return true\n    }\n    return false\n  }\n\n\n  /**\n   * Get the size of _this_ section\n   * @return {Number}\n   */\n  getSize() {\n    let sum = 0;\n    for (let i = 0; i < this._points.length - 1; i += 1) {\n      const p1 = this._points[i];\n      const p2 = this._points[i + 1];\n      const dx = p1[0] - p2[0];\n      const dy = p1[1] - p2[1];\n      const dz = p1[2] - p2[2];\n      sum += Math.sqrt(dx * dx + dy * dy + dz * dz);\n    }\n\n    return sum\n  }\n\n\n  /**\n   * Get the morphology object that contains this section\n   * @return {Morphology}\n   */\n  getMorphology() {\n    return this._morphology\n  }\n\n\n  /**\n   * Get all the children as an Array\n   * @return {Array}\n   */\n  getChildren() {\n    return this._children\n  }\n}\n\n/*\n* Author   Jonathan Lurie - http://me.jonathanlurie.fr\n* License  Apache License 2.0\n* Lab      Blue Brain Project, EPFL\n*/\n\n\n/**\n * The soma is the cell body of a neurone and thus is sort of a simplified version\n * of a Section, in term of datastructure.\n * A soma can be made of a single point (then it's just a center point) or of several,\n * then it's a more accurate description of a soma. When described with several points,\n * the representation is usually as a 2D polygon (even though it's in a 3D space)\n */\nclass Soma {\n  constructor() {\n    this._id = null;\n    this._typename = 'soma';\n    this._typevalue = 1;\n    this._points = [];\n    this._radius = null;\n  }\n\n  /**\n   * Defines the id of this soma.\n   * Note: should probably not be used after `initWithRawSection` because then\n   * sections already have ids and chance to messup the id game are pretty high.\n   * @param {String|Number} id - the id\n   */\n  setId(id) {\n    this._id = id;\n  }\n\n\n  /**\n   * Get the id of _this_ soma\n   * @return {String|Number}\n   */\n  getId() {\n    return this._id\n  }\n\n\n  /**\n   * Add a point to the soma description\n   * @param {Number} x - the x coordinate of the point to add\n   * @param {Number} y - the y coordinate of the point to add\n   * @param {Number} z - the z coordinate of the point to add\n   */\n  addPoint(x, y, z) {\n    this._points.push([x, y, z]);\n  }\n\n\n  /**\n   * Get all the points of the soma\n   * @return {Array} each element of the array if of form [x: Number, y: Number, z: Number]\n   */\n  getPoints() {\n    return this._points\n  }\n\n\n  /**\n   * Define the radius of the soma\n   * @param {Number} r - the radius\n   */\n  setRadius(r) {\n    this._radius = r;\n  }\n\n\n  /**\n   * Get the radius of the soma.\n   * @return {Number}\n   */\n  getRadius() {\n    return this._radius\n  }\n\n\n  /**\n   * Return the center of the soma.\n   * If the soma is made of a single point and a radius, this method returns the\n   * single point. If the soma is made of several points, this method returns the\n   * average.\n   * @return {Array|null} coordinate of the center as [x: Number, y: Number, z: Number]\n   */\n  getCenter() {\n    const nbPoints = this._points.length;\n\n    if (nbPoints === 1) {\n      return this._points[0].slice()\n    }\n\n    if (nbPoints > 1) {\n      const average = [0, 0, 0];\n      for (let i = 0; i < nbPoints; i += 1) {\n        average[0] += this._points[i][0];\n        average[1] += this._points[i][1];\n        average[2] += this._points[i][2];\n      }\n      average[0] /= nbPoints;\n      average[1] /= nbPoints;\n      average[2] /= nbPoints;\n      return average\n    }\n    return null\n  }\n\n\n  /**\n   * Build a soma using a raw soma object.\n   * @param {Object} rawSoma - usually comes from a JSON file\n   */\n  initWithRawSection(rawSoma) {\n    if (!rawSoma) {\n      console.warn('Cannot init the Soma instance, no soma data provided in raw morphology.');\n      return null\n    }\n\n    this._id = rawSoma.id;\n    this._points = rawSoma.points.map(p => p.position);\n    this._radius = rawSoma.radius;\n\n    return this._id\n  }\n}\n\n/*\n* Author   Jonathan Lurie - http://me.jonathanlurie.fr\n* License  Apache License 2.0\n* Lab      Blue Brain Project, EPFL\n*/\n\n\n/**\n * A morphology is the data representation of a neurone's anatomy. It is composed\n * of one soma (cell body) and sections. Sections can be axons, dendrites, etc.\n * A Morphology instance can be built from scratch (though it can be a bit tedious)\n * but will generally be built using a JSON description.\n */\nclass Morphology {\n  constructor() {\n    this._id = null;\n    this._sections = {};\n    this._soma = null;\n    this._radiusFromSoma = null;\n\n    // these are catgories of sections that we may need. Look at `getOrphanSections`\n    // and `_findSpecialSection`\n    this._specialSections = {};\n  }\n\n\n  /**\n   * Set the ID of _this_ morphology\n   * @param {String|Number} id - the id\n   */\n  setId(id) {\n    this._id = id;\n  }\n\n\n  /**\n   * Get the ID of _this_ morphology\n   * @return {String|Number}\n   */\n  getId() {\n    return this._id\n  }\n\n\n  /**\n   * Build a morphology from a raw dataset, that usually comes from a JSON file.\n   * Note that some files do not provide any data about the soma. In this case, the Soma\n   * instance remains `null`\n   * @param {Object} rawMorphology - a flat tree description of a morphology\n   */\n  buildFromRawMorphology(rawMorphology) {\n    // Sometimes, we have no data about the soma\n    if (rawMorphology.soma) {\n      this._soma = new Soma();\n      this._soma.initWithRawSection(rawMorphology.soma);\n    }\n\n    // Build the Section instances.\n    // This first step does not define parents nor children\n    for (let i = 0; i < rawMorphology.sections.length; i += 1) {\n      const s = new Section(this);\n      const sId = s.initWithRawSection(rawMorphology.sections[i]);\n      this._sections[sId] = s;\n    }\n\n    // Now we define parent and children\n    for (let i = 0; i < rawMorphology.sections.length; i += 1) {\n      const currentRawSection = rawMorphology.sections[i];\n      const currentSection = this._sections[currentRawSection.id];\n\n      // adding a parent if there is one\n      // can be 0 but cannot be null (in JS, 0 and null are diff)\n      if (currentRawSection.parent !== null) {\n        const parent = this._sections[currentRawSection.parent];\n        currentSection.setParent(parent);\n      }\n\n      const children = currentRawSection.children.map(c => this._sections[c]);\n      for (let c = 0; c < children.length; c += 1) {\n        currentSection.addChild(children[c]);\n      }\n    }\n  }\n\n\n  /**\n   * Retrieve the total number of section in this morphology\n   * @return {Number}\n   */\n  getNumberOfSections() {\n    return Object.keys(this._sections)\n  }\n\n\n  /**\n   * Get a section, given its id\n   * @param {String|Number} id - the id of a section\n   * @return {Section|null} the requested section or null if the id is invalid\n   */\n  getSection(id) {\n    if (id in this._sections) {\n      return this._sections[id]\n    }\n    return null\n  }\n\n\n  /**\n   * Get all the sections of _this_ morphology as an array, because sometimes it's\n   * more convenient for iterating.\n   * @return {Array} array of Section instances\n   */\n  getArrayOfSections() {\n    return Object.values(this._sections)\n  }\n\n\n  /**\n   * Get the soma Object\n   * @return {Soma}\n   */\n  getSoma() {\n    return this._soma\n  }\n\n\n  /**\n   * Get all the section with no parent (_parent = null)\n   * Those are directly tied to the soma\n   * @param {Boolean} force - if true, the fetching among the sections will be done again\n   * @return {Array} array of Sections\n   */\n  getOrphanSections(force = false) {\n    console.error('This method is deprecated. In order to get neurite starting point, use `.getNeuriteStarts()` instead.');\n\n    const speciality = 'orphans';\n\n    // extract, if not done before\n    this._findSpecialSection(\n      'orphans',\n      s => !s.getParent(),\n      force,\n    );\n\n    return this._specialSections[speciality]\n  }\n\n\n  /**\n   * @private\n   * Helper function to build a subset of Sections based on the selections perfomed by `selector`\n   * @param {String} specialityName - name of the spaciality\n   * @param {Function} selector - function that takes a Section and returns a boolean.\n   * if true is return, a section will be selected\n   * @param {Boolean} force - if true: rebuild the list, if false:\n   * just return the list previously build\n   */\n  _findSpecialSection(specialityName, selector, force = false) {\n    if (!(specialityName in this._specialSections)) {\n      this._specialSections[specialityName] = null;\n    }\n\n    if (force || !this._specialSections[specialityName]) {\n      this._specialSections[specialityName] = [];\n      const allSections = Object.values(this._sections);\n      for (let i = 0; i < allSections.length; i += 1) {\n        if (selector(allSections[i])) {\n          this._specialSections[specialityName].push(allSections[i]);\n        }\n      }\n    }\n    return this._specialSections[specialityName]\n  }\n\n\n  /**\n   * Find the points that are starting the neurites, juste after the soma.\n   * Those point can be used to create a polygon that would represent the soma\n   * @return {Array} of points, where each point is an Array [x, y, z]\n   */\n  getNeuriteStarts() {\n    // get the soma section\n    const allSections = Object.values(this._sections);\n    const somaSections = allSections.filter(s => s.getTypeValue() === SECTION_TYPECODES.soma);\n\n    if (somaSections.length === 0) {\n      return null\n    }\n    \n    // find the first point of each child non-soma section of a soma section\n    const points = [];\n    somaSections.forEach((s) => {\n      s.getChildren()\n        .filter(cs => cs.getTypeValue() !== SECTION_TYPECODES.soma) // cs = child section\n        .forEach((cs) => {\n          const csPoints = cs.getPoints();\n          // since this section has a parent (a soma section), then the first point of \n          // the child section is taken from the parent and is not realy the start of the child section.\n          // This is why we take point 1 and not point 0\n          if (csPoints.length > 1) {\n            points.push(csPoints[1]);\n          }\n        });\n    });\n    return points\n  }\n\n\n  /**\n   * Get the distance between the soma and the furthest point from the soma.\n   * This can be useful to compute a bounding sphere centered on the soma\n   * @return {number} the distance\n   */\n  getRadiusFromSoma() {\n    if (this._radiusFromSoma !== null) {\n      return this._radiusFromSoma\n    }\n\n    const c = this._soma.getCenter();\n    let maxDistance = 0;\n    const allSections = Object.values(this._sections);\n\n    for (let i = 0; i< allSections.length; i += 1) {\n      const sectionPoints = allSections[i].getPoints();\n      for (let j = 0; j < sectionPoints.length; j+= 1) {\n        const p = sectionPoints[j];\n        const d = Math.sqrt((p[0] - c[0]) ** 2 + (p[1] - c[1]) ** 2 + (p[2] - c[2]) ** 2);\n        if (d > maxDistance) {\n          maxDistance = d;\n        }\n      }\n    }\n\n    this._radiusFromSoma = maxDistance;\n    return maxDistance\n  }\n}\n\nvar index = ({\n  Morphology,\n});\n\n\n// export default Morphology\n\nexport default index;\n//# sourceMappingURL=morphologycorejs.js.map\n","'use strict';\n\n\nvar TYPED_OK =  (typeof Uint8Array !== 'undefined') &&\n                (typeof Uint16Array !== 'undefined') &&\n                (typeof Int32Array !== 'undefined');\n\nfunction _has(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexports.assign = function (obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    var source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (var p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// reduce buffer size, avoiding mem copy\nexports.shrinkBuf = function (buf, size) {\n  if (buf.length === size) { return buf; }\n  if (buf.subarray) { return buf.subarray(0, size); }\n  buf.length = size;\n  return buf;\n};\n\n\nvar fnTyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    if (src.subarray && dest.subarray) {\n      dest.set(src.subarray(src_offs, src_offs + len), dest_offs);\n      return;\n    }\n    // Fallback to ordinary array\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    var i, l, len, pos, chunk, result;\n\n    // calculate data length\n    len = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      len += chunks[i].length;\n    }\n\n    // join chunks\n    result = new Uint8Array(len);\n    pos = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      chunk = chunks[i];\n      result.set(chunk, pos);\n      pos += chunk.length;\n    }\n\n    return result;\n  }\n};\n\nvar fnUntyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    return [].concat.apply([], chunks);\n  }\n};\n\n\n// Enable/Disable typed arrays use, for testing\n//\nexports.setTyped = function (on) {\n  if (on) {\n    exports.Buf8  = Uint8Array;\n    exports.Buf16 = Uint16Array;\n    exports.Buf32 = Int32Array;\n    exports.assign(exports, fnTyped);\n  } else {\n    exports.Buf8  = Array;\n    exports.Buf16 = Array;\n    exports.Buf32 = Array;\n    exports.assign(exports, fnUntyped);\n  }\n};\n\nexports.setTyped(TYPED_OK);\n","'use strict';\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction adler32(adler, buf, len, pos) {\n  var s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n}\n\n\nmodule.exports = adler32;\n"],"sourceRoot":""}