"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8100],{48100:function(t,e,n){n.r(e),n.d(e,{NexusPlugin:function(){return NexusPlugin}});var s=n(85893),i=n(67294),r=n(73818),o=n(17931);let PluginError=()=>(0,s.jsx)(r.ZP,{status:"warning",title:"Plugin failed to render",subTitle:"This issue has been reported to devolopers"});let NexusPlugin=class NexusPlugin extends i.Component{async loadExternalPlugin(){if(!this.container.current)return;let t=await fetch("".concat(o.sb,"/plugins/manifest.json")).then(t=>t.json()),{modulePath:e}=t[this.props.name],n="".concat(o.sb,"/plugins/").concat(e);window.System.import(n).then(t=>{this.setState({error:null,loading:!1}),this.destroyPlugin=t.default({ref:this.container.current,nexusClient:this.props.nexusClient,resource:this.props.resource})}).catch(t=>{this.setState({error:t,loading:!1})})}componentDidCatch(t){this.setState({error:t,loading:!1})}componentDidUpdate(t){(t.resource!==this.props.resource||t.name!==this.props.name)&&(this.destroyPlugin&&(this.destroyPlugin(),this.destroyPlugin=null),this.setState({error:null,loading:!0}),this.loadExternalPlugin())}componentDidMount(){this.loadExternalPlugin()}componentWillUnmount(){this.destroyPlugin&&"function"==typeof this.destroyPlugin&&this.destroyPlugin()}render(){let t=this.props.className||"";return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"remote-component ".concat(t),ref:this.container}),this.state.error&&(0,s.jsx)(PluginError,{})]})}constructor(t){super(t),this.state={error:null,loading:!0},this.container=i.createRef(),this.destroyPlugin=null}};e.default=NexusPlugin}}]);