{"version":3,"sources":["webpack://_N_E/./node_modules/file-saver/dist/FileSaver.min.js","webpack://_N_E/./node_modules/lodash/isNil.js","webpack://_N_E/./node_modules/lodash/isNumber.js","webpack://_N_E/./src/components/Collapsible/index.tsx","webpack://_N_E/./src/components/ScrollTo/index.tsx","webpack://_N_E/./src/components/DataContainer/index.tsx","webpack://_N_E/./src/components/ESData/index.tsx","webpack://_N_E/./src/components/InfoBox/index.tsx","webpack://_N_E/./src/components/LayerSelector/index.tsx","webpack://_N_E/./src/components/List/index.tsx","webpack://_N_E/./src/components/NexusPlugin/index.tsx","webpack://_N_E/./src/components/NumberFormat/index.tsx","webpack://_N_E/./src/components/Title/index.tsx","webpack://_N_E/./src/components/Unit/index.tsx","webpack://_N_E/./src/layouts/Filters/index.tsx","webpack://_N_E/./src/components/ExpMorphologyFactsheet/index.tsx","webpack://_N_E/./src/components/ImageViewer/index.tsx","webpack://_N_E/./src/components/ExpMorphologyTable/index.tsx","webpack://_N_E/./src/utils/index.ts","webpack://_N_E/./src/components/NexusFileDownloadButton/index.tsx","webpack://_N_E/./src/views/experimental/NeuronMorphology.tsx","webpack://_N_E/./src/pages/experimental-data/neuronal-morphology.tsx","webpack://_N_E/./src/queries/es/index.ts","webpack://_N_E/./src/views/experimental/config.ts","webpack://_N_E/?a571","webpack://_N_E/./src/components/ExpMorphologyTable/styles.module.scss","webpack://_N_E/./src/components/InfoBox/styles.module.scss","webpack://_N_E/./src/components/LayerSelector/styles.module.scss","webpack://_N_E/./src/styles/experimental-data/neuron-morphology.module.scss"],"names":["b","a","autoBom","console","warn","test","type","Blob","c","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","error","send","status","e","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","navigator","userAgent","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports","value","baseGetTag","isObjectLike","collapsed","children","color","className","React","isCollapsed","setCollapsed","id","onClick","classPrefix","anchor","direction","querySelector","scrollIntoView","query","data","loading","state","setState","nexus","useNexusContext","View","elasticSearchQuery","hippocampus","then","hits","text","styles","LAYERS","activeLayer","onLayerSelected","map","layer","classPrefixList","list","onSelect","role","aria-labelledby","element","aria-checked","tabIndex","handleSelectedElement","NexusPluginLazy","dynamic","ssr","props","significantFigures","thousandSeparator","prefix","suffix","isNumber","fixed","parseFloat","toPrecision","formatted","toLocaleString","subtitle","hint","primaryColor","primary","dangerouslySetInnerHTML","__html","replacement","MOhm","backgroundAlt","MorphologyFactsheetSingleValueEntry","fact","isNil","NumberFormat","Unit","unit","MorphologyFactsheetEntry","neuriteTypes","strPrettify","str","morphologyName","stats","expMorphologyStats","getFactsheetEntries","neuriteType","Object","entries","statKey","statValue","includes","mean_soma_radius","filter","max_section_length","neuriteHasStats","ImageViewerLazy","entryToArray","entry","Array","isArray","getAgentLabel","agent","givenName","familyName","getAgentType","morphologies","agentIds","reduce","ids","morphology","currIds","contribution","Boolean","from","Set","useState","agentMap","setAgentMap","useEffect","length","contributionEsQuery","size","terms","esDocuments","esDocument","_source","agents","label","keyBy","morph","style","textAlign","src","basePath","alt","annotation","hasBody","sort","a1","a2","nexusEntities","nexusUrlR","RegExp","join","filename","url","org","project","setLoading","nexusUrl","Error","mulEntityTypeR","mulEntityTypeMatch","match","matches","deployment","entityType","slice","schema","parseUrl","fileOrg","fileProject","fileId","split","reverse","File","get","as","imageData","router","useRouter","setQuery","push","pathname","undefined","shallow","currentLayer","mtypes","region","mtype","currentMtype","instances","currentInstance","instance","getMorphologyDistribution","morphologyResource","distribution","find","getAndSortMorphologies","m1","m2","Filters","Title","colorName","InfoBox","LayerSelector","List","DataContainer","Collapsible","ESData","morphologyDataQuery","NexusPlugin","resource","nexusClient","contentUrl","ExpMorphologyFactsheet","mtypeExpMorphologyListDataQuery","About","MainLayout","NeuronMorphology","electroPhysiologyDataQuery","etype","experiment","bool","must","term","nested","path","should","etypeTracesDataQuery","must_not","exists","accentColors","__NEXT_P"],"mappings":"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","file":"static/chunks/pages/experimental-data/neuronal-morphology-d32fcfea5beb57ab4f3a.js","sourcesContent":["(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","/**\n * Checks if `value` is `null` or `undefined`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n * @example\n *\n * _.isNil(null);\n * // => true\n *\n * _.isNil(void 0);\n * // => true\n *\n * _.isNil(NaN);\n * // => false\n */\nfunction isNil(value) {\n  return value == null;\n}\n\nmodule.exports = isNil;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n * classified as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && baseGetTag(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n","import React, { ReactChild, ReactFragment } from 'react';\nimport { IoIosArrowUp } from 'react-icons/io';\n\n\nconst classPrefix = 'collapsible__';\n\ntype CollapsibleColor = 'red'\n\ntype CollapsibleProps = {\n  collapsed?: boolean;\n  title: string;\n  children: ReactChild | ReactFragment;\n  color?: CollapsibleColor;\n  className?: string;\n};\n\nconst Collapsible: React.FC<CollapsibleProps> = ({\n  collapsed,\n  title,\n  children,\n  color = '',\n  className = '',\n}) => {\n  const [isCollapsed, setCollapsed] = React.useState(collapsed);\n\n  return (\n    <div id=\"data\" className={`${classPrefix}${isCollapsed ? 'collapsed' : 'expanded'} ${color} ${className}`}>\n      <div\n        className=\"header\"\n        title={title}\n        onClick={() => setCollapsed(!isCollapsed)}\n      >\n        {title}\n        <span className=\"arrow\">\n          <IoIosArrowUp />\n        </span>\n      </div>\n      <div className=\"content\">{children}</div>\n    </div>\n  );\n};\n\nexport default Collapsible;\n","import React, { ReactChild, ReactFragment } from 'react';\nimport { IoIosArrowDown, IoIosArrowUp } from 'react-icons/io';\n\nimport { Direction, Color } from '../../types';\n\n\nconst classPrefix = 'scroll-to__';\n\ntype ScrollToProps = {\n  anchor: string;\n  direction: Direction;\n  children: ReactChild | ReactFragment;\n  color?: Color;\n};\n\nconst ScrollTo: React.FC<ScrollToProps> = ({\n  anchor,\n  direction,\n  children,\n  color = '',\n}) => {\n  const scroll = () => {\n    const target = document.querySelector(`#${anchor}`);\n    if (target) {\n      target.scrollIntoView();\n    }\n  };\n\n  return (\n    <div onClick={scroll} className={`${classPrefix}basis bg-${color}`}>\n      {children}\n      <span className={`${classPrefix}direction`}>\n        {direction === 'up' && <IoIosArrowUp />}\n        {direction === 'down' && <IoIosArrowDown />}\n      </span>\n    </div>\n  );\n};\n\nexport default ScrollTo;\n","import React from 'react';\n\nimport ScrollTo from '../../components/ScrollTo';\n\n\nconst classPrefix = 'data-container__';\n\ntype DataContainerProps = {\n  visible?: boolean;\n  children: React.ReactNode\n};\n\nconst DataContainer: React.FC<DataContainerProps> = ({\n  children,\n}) => {\n  return <div className={`${classPrefix}basis`}>\n    <div className=\"center\">{children}</div>\n    <div className=\"scroll-to\">\n      <ScrollTo anchor=\"filters\" direction=\"up\">\n        Return to selectors\n            </ScrollTo>\n    </div>\n  </div>\n};\n\nexport default DataContainer;\n","import React from 'react';\nimport { useNexusContext } from '@bbp/react-nexus';\nimport { ElasticSearchViewQueryResponse } from '@bbp/nexus-sdk';\n\nimport { hippocampus } from '../../config';\n\n\ntype ESDataProps = {\n  query: Record<string, unknown> | null;\n  children: (\n    data: ElasticSearchViewQueryResponse<any>['hits']['hits'] | null,\n    loading: boolean,\n    error: any,\n  ) => React.ReactNode;\n};\n\nconst ESData: React.FC<ESDataProps> = ({\n  query,\n  children,\n}) => {\n  const [state, setState] = React.useState<{\n    data: ElasticSearchViewQueryResponse<any>['hits']['hits'] | null;\n    loading: boolean;\n    error: any;\n  }>({\n    data: null,\n    loading: false,\n    error: null,\n  });\n  const nexus = useNexusContext();\n\n  React.useEffect(() => {\n    if (query) {\n      setState({ ...state, loading: true, data: null });\n      nexus.View.elasticSearchQuery(\n        hippocampus.org,\n        hippocampus.project,\n        hippocampus.datasetViewId,\n        query,\n      )\n        .then(data =>\n          setState({ ...state, loading: false, data: data.hits.hits }),\n        )\n        .catch(error => setState({ ...state, loading: false, error }));\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [query]);\n\n  return (\n    <>\n      {children(state.data, state.loading, state.error)}\n    </>\n  );\n};\n\nexport default ESData;\n","import React from 'react';\n\nimport { Color } from '../../types';\nimport styles from './styles.module.scss';\n\n\ntype InfoBoxProps = {\n  title?: string;\n  text: string;\n  color?: Color;\n};\n\nconst InfoBox: React.FC<InfoBoxProps> = ({\n  title,\n  text,\n  color = '',\n}) => {\n  return (\n    <div className={`${styles.container} bg-${color}`}>\n      {title && <h3>{title}</h3>}\n      <p>{text}</p>\n    </div>\n  );\n};\n\nexport default InfoBox;\n","import React, { ReactChild, ReactFragment } from 'react';\nimport { Layer } from '../../types';\n\nimport styles from './styles.module.scss'\n\n\ntype LayerSelectProps = {\n  activeLayer?: Layer;\n  onLayerSelected?: (layer: Layer) => void;\n};\n\nconst LAYERS: Layer[] = ['SLM', 'SR', 'SP', 'SO'];\n\nconst LayerSelector: React.FC<LayerSelectProps> = ({\n  activeLayer,\n  onLayerSelected = () => {},\n}) => {\n  const selectLayer = (l: Layer): void => onLayerSelected(l);\n\n  return (\n    <div>\n      {LAYERS.map(layer => (\n        <div\n          key={layer}\n          className={`${styles.layer} ${layer === activeLayer ? styles.active : ''}`}\n          onClick={() => selectLayer(layer)}\n        >\n          {layer}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default LayerSelector;\n","import React from 'react';\n\nimport { Color } from '../../types';\n\n\nconst classPrefixList = 'list__';\nconst classPrefixListElement = 'list-element__';\n\ntype ListProps = {\n  title?: string;\n  list: string[];\n  value?: string;\n  onSelect?: (s: string) => void;\n  color?: Color;\n  anchor?: string;\n  block?: boolean;\n  className?: string;\n};\n\nconst List: React.FC<ListProps> = ({\n  title,\n  list,\n  value,\n  onSelect = () => { },\n  color,\n  anchor = '',\n  className = '',\n}) => {\n  const handleSelectedElement = (element: string) => {\n    const target = anchor && document.querySelector(`#${anchor}`);\n    if (target) {\n      window.setTimeout(() => target.scrollIntoView(true), 0)\n    }\n    onSelect(element);\n  }\n\n  const id = title ? title.replace(/\\s/g, '') : 'no_title';\n\n  return (\n    <div\n      className={`${classPrefixList}basis bg-${color} ${className}`}\n      role=\"radiogroup\"\n      aria-labelledby={`${classPrefixList}${id}`}\n    >\n      {title && <p>{title}</p>}\n      <div className=\"elements\">\n        {list.map(element => (\n          <div\n            key={element}\n            role=\"radio\"\n            aria-checked={value === element}\n            tabIndex={0}\n            className={`${classPrefixListElement}basis ${value === element ? 'selected' : ''}`}\n            onClick={() => handleSelectedElement(element)}\n            title={element}\n          >\n            {element}\n          </div>\n\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default List;\n","import React from 'react';\nimport dynamic from 'next/dynamic';\n\nimport { NexusPluginClassProps } from './nexus-plugin';\n\n\nconst NexusPluginLazy = dynamic(() => import('./nexus-plugin'), { ssr: false });\n\nconst ImageViewer: React.FC<NexusPluginClassProps<any>> = (props) => {\n  return (\n    <NexusPluginLazy {...props} />\n  );\n};\n\n\nexport default ImageViewer;\n","import React from 'react';\n\nimport isNumber from 'lodash/isNumber';\n\n\ntype NumberFormatProps = {\n  value?: any;\n  decimals?: number;\n  significantFigures?: number;\n  thousandSeparator?: boolean;\n  prefix?: string;\n  suffix?: string;\n};\n\nconst NumberFormat: React.FC<NumberFormatProps> = ({\n  value,\n  significantFigures = 5,\n  thousandSeparator = true,\n  prefix = '',\n  suffix = '',\n}) => {\n  if (!isNumber(value)) return value;\n\n  const fixed = parseFloat(value.toPrecision(significantFigures));\n\n  const formatted = thousandSeparator\n    ? fixed.toLocaleString('en')\n    : fixed;\n\n  return `${prefix}${formatted}${suffix}`;\n}\n\n\nexport default NumberFormat;\n","import React from 'react';\n\nimport { Color } from '../../types';\n\n\nconst classPrefix = 'title__';\n\ntype TitleProps = {\n  title?: React.ReactChild;\n  subtitle?: string;\n  primaryColor?: Color;\n  hint?: string;\n  primary?: boolean;\n};\n\nconst Title: React.FC<TitleProps> = ({\n  title,\n  subtitle,\n  hint,\n  primaryColor = 'yellow' as Color,\n  primary,\n}) => {\n  return (\n    <div\n      className={`${classPrefix}basis ${\n        primary ? 'primary' : ''\n      } ${primaryColor}`}\n    >\n      {subtitle && !primary && <h4 className=\"text-white\">{subtitle}</h4>}\n      {title && <h2 role=\"title\" className=\"text-white\">{title}</h2>}\n      {subtitle && primary && <h4 className=\"text-white\">{subtitle}</h4>}\n      {hint && <p dangerouslySetInnerHTML={{ __html: hint }} />}\n    </div>\n  );\n};\n\nexport default Title;\n","import React from 'react';\n\ntype UnitProps = {\n  value?: string;\n}\n\nconst replacement = {\n  MOhm: 'MΩ',\n};\n\nconst Unit: React.FC<UnitProps> = ({ value = '' }) => {\n  return (\n    <>\n      {replacement[value] ?? value}\n    </>\n  );\n};\n\n\nexport default Unit;\n","import React, { ReactChild, ReactFragment } from 'react';\n\nimport ScrollTo from '../../components/ScrollTo';\nimport { Color } from '../../types';\n// import './style.scss';\n\nconst classPrefix = 'filters__';\n\ntype FiltersProps = {\n  children: ReactChild | ReactFragment;\n  backgroundAlt?: boolean;\n  id?: string;\n};\n\nconst Filters: React.FC<FiltersProps> = ({\n  children,\n  backgroundAlt,\n  id = 'filters',\n}) => {\n  return (\n    <div>\n      <div\n        id={id}\n        className={`${classPrefix}basis ${backgroundAlt ? 'background-alt' : ''}`}\n      >\n        {children}\n      </div>\n    </div>\n  );\n};\n\nexport default Filters;\n","import React from 'react';\nimport NumberFormat from '../NumberFormat';\nimport isNil from 'lodash/isNil';\n\nimport Unit from '../Unit';\nimport expMorphologyStats from '../../exp-morphology-stats.json';\n\n\nconst classPrefix = 'factsheet__';\n\n\ntype MorphologyFactsheetEntryType = {\n  name: string;\n  description?: string;\n  unit?: string;\n  value?: number | string;\n  value_map?: {\n    [key: string]: string | number;\n  };\n};\n\n\ntype MorphologyFactsheetProps = {\n  morphologyName: string;\n  className?: string;\n};\n\n\nconst MorphologyFactsheetSingleValueEntry: React.FC<{\n  fact: MorphologyFactsheetEntryType;\n}> = ({\n  fact\n}) => {\n  return (\n    <div className=\"row mt-1\">\n      <div className=\"col-xs-8 col-sm-4 name\">{fact.name}</div>\n      <div className=\"col-xs-4 col-sm-8 value\">\n        {isNil(fact.value)\n          ? (<span>-</span>)\n          : (<span>\n              <NumberFormat value={fact.value} /> <Unit value={fact.unit} />\n            </span>)\n        }\n      </div>\n    </div>\n  );\n};\n\nconst MorphologyFactsheetEntry: React.FC<{\n  fact: MorphologyFactsheetEntryType\n}> = ({\n  fact\n}) => {\n  return (<MorphologyFactsheetSingleValueEntry fact={fact} />);\n};\n\nconst neuriteTypes = ['all', 'axon', 'apical_dendrite', 'basal_dendrite'];\n\nconst strPrettify = (str) => str ? str.replace(/\\_/g, ' ') : str;\n\nconst MorphologyFactsheet: React.FC<MorphologyFactsheetProps> = ({\n  morphologyName,\n  className = '',\n}) => {\n  const stats = expMorphologyStats[morphologyName];\n\n  if (!stats) {\n    return (\n      <p className=\"red\">No morphology stats found</p>\n    );\n  }\n\n  const neuriteHasStats = (neuriteType) => !!stats[neuriteType].max_section_length;\n\n  const getFactsheetEntries = (neuriteType) => {\n    return Object.entries(stats[neuriteType]).map(([statKey, statValue]) => ({\n      name: strPrettify(statKey),\n      unit: (statKey as string).includes('volume') ? 'µm³' : ((statKey as string).includes('length') ? 'µm' : ''),\n      value: statValue\n    }));\n  };\n\n  return (\n    <div className={`${classPrefix}basis ${className}`}>\n      <h3>Morphology factsheet</h3>\n\n      <div className=\"mb-3 mt-3\">\n        <MorphologyFactsheetEntry fact={{\n          name: 'soma diameter',\n          unit: 'µm',\n          value: stats.mean_soma_radius * 2,\n        }} />\n      </div>\n\n      {neuriteTypes.filter(neuriteType => neuriteHasStats(neuriteType)).map(neuriteType => (\n        <div className=\"mb-2\" key={neuriteType}>\n          <strong className=\"text-capitalize\">{strPrettify(neuriteType)}</strong>\n          {getFactsheetEntries(neuriteType).map(fact => (\n            <MorphologyFactsheetEntry key={fact.name} fact={fact as MorphologyFactsheetEntryType} />\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default MorphologyFactsheet;\n","import React from 'react';\nimport dynamic from 'next/dynamic';\n\nimport { ImageViewerProps } from './image-viewer';\n\n\nconst ImageViewerLazy = dynamic(() => import('./image-viewer'), { ssr: false });\n\nconst ImageViewer: React.FC<ImageViewerProps> = (props) => {\n  return (\n    <ImageViewerLazy {...props} />\n  );\n};\n\n\nexport default ImageViewer;\n","import React, { useState, useEffect } from 'react';\nimport { keyBy } from 'lodash';\nimport { useNexusContext } from '@bbp/react-nexus';\n\nimport { hippocampus, basePath } from '../../config';\nimport ImageViewer from '../ImageViewer';\n\nimport styles from './styles.module.scss'\n\n\ntype ExpMorphologyTableProps = {\n  morphologies: Record<string, any>[];\n};\n\nfunction entryToArray(entry) {\n  if (Array.isArray(entry)) return entry;\n\n  return [entry];\n}\n\nfunction getAgentLabel(agent) {\n  return agent.name\n    ? agent.name\n    : `${agent.givenName} ${agent.familyName}`;\n}\n\nfunction getAgentType(agent) {\n  return agent.name\n    ? 'institution'\n    : 'person';\n}\n\nconst ExpMorphologyTable: React.FC<ExpMorphologyTableProps> = ({ morphologies = [] }) => {\n  const nexus = useNexusContext();\n\n  const agentIds = morphologies.reduce((ids: string[], morphology) => {\n    const currIds = entryToArray(morphology.contribution)\n      .map(contribution => contribution.agent?.['@id'])\n      .filter(Boolean);\n\n    return Array.from(new Set([...ids, ...currIds]));\n  }, []);\n\n  const [agentMap, setAgentMap] = useState<Record<string, any>>(null);\n\n  useEffect(() => {\n    if (!agentIds.length) return;\n\n    const contributionEsQuery = {\n      from: 0,\n      size: 100,\n      query: {\n        terms: {\n          '_id': agentIds,\n        }\n      }\n    }\n\n    nexus.View\n      // query ElesticSearch endpoint to get agents by their ids\n      .elasticSearchQuery(hippocampus.org, hippocampus.project, hippocampus.datasetViewId, contributionEsQuery)\n      // extract ES documents\n      .then(data => data.hits.hits)\n      // extract Nexus original documents\n      .then(esDocuments => esDocuments.map(esDocument => esDocument._source))\n      // pick only agent ids and labels\n      .then(agents => agents.map(agent => ({\n        id: agent['@id'],\n        label: getAgentLabel(agent),\n        type: getAgentType(agent),\n      })))\n      // create a map of agents of type Record<id, label>\n      .then(agents => keyBy(agents, 'id'))\n      .then(agentMap => setAgentMap(agentMap));\n  }, [morphologies]);\n\n  return (\n    <div className=\"layer-anatomy-summary__basis mt-2\">\n      <table>\n        <thead>\n          <tr>\n            <th>Name</th>\n            <th>Image</th>\n            <th>M-Type</th>\n            <th>Contribution</th>\n          </tr>\n        </thead>\n        <tbody>\n          {morphologies.map(morph => (\n            <tr key={morph.name}>\n              <td className=\"text-capitalize\">{morph.name}</td>\n              <td style={{ textAlign: 'center'}}>\n                <div className={styles.morphImageContainer}>\n                  <ImageViewer\n                    src={`${basePath}/assets/images/exp-morph-images/${morph.name}.jpeg`}\n                    alt={`Morphology ${morph.name} image`}\n                    loading=\"lazy\"\n                  />\n                </div>\n              </td>\n              <td>{morph.annotation.hasBody.label}</td>\n              <td>\n                {agentMap && entryToArray(morph.contribution)\n                  .map(contribution => agentMap[contribution.agent['@id']])\n                  .sort((a1, a2) => a1.type > a2.type ? 1 : -1)\n                  .map(agent => <span key={agent.label}>{agent.label} <br/></span>)\n                }\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\n\nexport default ExpMorphologyTable;\n","interface ParsedNexusUrl {\n  deployment: string;\n  entityType: string;\n  org: string;\n  project: string;\n  schema: string;\n  id: string;\n}\n\nconst nexusEntities = [\n  'orgs',\n  'projects',\n  'acls',\n  'views',\n  'resources',\n  'files',\n];\n\nconst nexusUrlR = new RegExp(\n  [\n    '^',\n    '(https?://.+)', // nexus deployment\n    '/',\n    `(${nexusEntities.join('|')})`, // entity type\n    '/',\n    '([^/]+)', // org\n    '/',\n    '([^/]+)', // proj\n    '/?',\n    '([^/]+)?', // schema [optional]\n    '/?',\n    '([^/]+)?', // id [optional]\n    '/?',\n    '$',\n  ].join(''),\n);\n\n/**\n * @author pgetta\n * With given Nexus URL (might be self/project/id url), return it's:\n * * deployment URL\n * * entity type\n * * org label\n * * project label\n * * id\n *\n * @param nexusUrl\n */\nexport const parseUrl = (nexusUrl: string): ParsedNexusUrl => {\n  if (!nexusUrl) throw new Error('selfUrl should be defined');\n\n  const mulEntityTypeR = new RegExp(`(${nexusEntities.join('|')})`, 'g');\n  const mulEntityTypeMatch = nexusUrl.match(mulEntityTypeR);\n  if (mulEntityTypeMatch && mulEntityTypeMatch.length > 1) {\n    throw new Error(\n      'Url contains multiple entity types which is not supported',\n    );\n  }\n\n  const matches = nexusUrl.match(nexusUrlR);\n  if (!matches || matches.length <= 5) {\n    throw new Error('Error while parsing selfUrl');\n  }\n\n  return {\n    deployment: matches[1],\n    entityType: matches[2].slice(0, -1),\n    org: matches[3],\n    project: matches[4],\n    schema: matches[5],\n    id: matches[6],\n  };\n};\n","import React, { useState } from 'react';\nimport { useNexusContext } from '@bbp/react-nexus';\nimport { saveAs } from 'file-saver';\nimport { Button } from 'antd';\n\nimport { parseUrl } from '../../utils';\n\n\n\nexport type NexusFileDownloadButtonProps = {\n  filename: string;\n  url: string;\n  org?: string;\n  project?: string;\n  children: React.ReactNode;\n  className?: string;\n};\n\nconst NexusFileDownloadButton: React.FC<NexusFileDownloadButtonProps> = ({\n  filename,\n  url,\n  org,\n  project,\n  children,\n  className = '',\n}) => {\n  const nexus = useNexusContext();\n\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const download = () => {\n    setLoading(true);\n    const { org: fileOrg, project: fileProject } = {...parseUrl(url), ...{ org, project }};\n    const fileId = url.split('/').reverse()[0];\n\n    nexus.File.get(fileOrg as string, fileProject as string, fileId, { as: 'blob' })\n      .then(imageData => saveAs(imageData as Blob, filename))\n      .catch(console.error)\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <Button\n      className={className}\n      type=\"primary\"\n      size=\"small\"\n      onClick={download}\n      loading={loading}\n    >\n      {children}\n    </Button>\n  );\n};\n\nexport default NexusFileDownloadButton;\n","import React from 'react';\nimport { useRouter } from 'next/router';\nimport { useNexusContext } from '@bbp/react-nexus';\n\nimport ESData from '../../components/ESData';\nimport DataContainer from '../../components/DataContainer';\nimport LayerSelector from '../../components/LayerSelector';\nimport { morphologyDataQuery, mtypeExpMorphologyListDataQuery } from '../../queries/es';\nimport Filters from '../../layouts/Filters';\nimport Title from '../../components/Title';\nimport InfoBox from '../../components/InfoBox';\nimport NexusPlugin from '../../components/NexusPlugin';\nimport { colorName } from './config';\nimport { Layer } from '../../types';\nimport Collapsible from '../../components/Collapsible';\nimport List from '../../components/List';\nimport morphologies from '../../exp-morphology-list.json';\nimport ExpMorphologyFactsheet from '../../components/ExpMorphologyFactsheet';\nimport ExpMorphologyTable from '../../components/ExpMorphologyTable';\nimport NexusFileDownloadButton from '../../components/NexusFileDownloadButton';\nimport { hippocampus } from '../../config';\n\nimport styles from '../../styles/experimental-data/neuron-morphology.module.scss';\n\n\nconst NeuronExperimentalMorphology: React.FC = () => {\n  const router = useRouter();\n  const nexus = useNexusContext();\n\n  const query = {\n    ...router.query\n  };\n\n  const setQuery = (query: any): void => {\n    router.push({ query, pathname: router.pathname }, undefined, { shallow: true });\n  };\n\n  const setLayer = (layer: Layer) => {\n    setQuery({\n      layer,\n      mtype: null,\n      instance: null,\n    });\n  };\n  const currentLayer: Layer = query.layer as Layer;\n\n  const mtypes = currentLayer\n    ? Array.from(new Set(morphologies.filter(m => m.region === currentLayer).map(m => m.mtype))).sort()\n    : [];\n\n  const setMtype = (mtype: string) => {\n    setQuery({\n      mtype,\n      layer: currentLayer,\n      instance: null,\n    });\n  };\n  const currentMtype: string = query.mtype as string;\n\n  const instances = currentMtype\n    ? morphologies.filter(m => m.mtype === currentMtype).map(m => m.name).sort()\n    : []\n\n  const setInstance = (instance: string) => {\n    setQuery({\n      instance,\n      layer: currentLayer,\n      mtype: currentMtype,\n    });\n  };\n  const currentInstance: string = query.instance as string;\n\n  const getMorphologyDistribution = (morphologyResource: any) => {\n    return morphologyResource.distribution.find((d: any) => d.name.match(/\\.asc$/i));\n  };\n\n  const getAndSortMorphologies = (esDocuments) => {\n    return esDocuments\n      .map(esDocument => esDocument._source)\n      .sort((m1, m2) => (m1.name > m2.name) ? 1 : -1);\n  };\n\n  return (\n    <>\n      <Filters backgroundAlt>\n        <div className=\"row bottom-xs w-100\">\n          <div className=\"col-xs-12 col-lg-6\">\n            <Title\n              primaryColor={colorName}\n              title={<span>Neuronal <br /> Morphology</span>}\n              subtitle=\"Experimental Data\"\n            />\n            <InfoBox\n              color=\"grey-1\"\n              text=\"We classified neuronal morphologies in different morphological types (m-types) and created digital 3D reconstructions. Using objective classification methods, we have identified 12 m-types in rat hippocampus CA1.\"\n            />\n          </div>\n          <div className=\"col-xs-12 col-lg-6\">\n            <div className={styles.selector}>\n              <div className={styles.selectorColumn}>\n                <div className={styles.selectorHead}>1. Choose a layer</div>\n                <div className={styles.selectorBody}>\n                  <LayerSelector\n                    activeLayer={currentLayer}\n                    onLayerSelected={setLayer}\n                  />\n                </div>\n              </div>\n              <div className={styles.selectorColumn}>\n                <div className={styles.selectorHead}>2. Select reconstruction</div>\n                <div className={styles.selectorBody}>\n                  <List\n                    list={mtypes}\n                    value={currentMtype}\n                    title=\"m-type\"\n                    color={colorName}\n                    onSelect={setMtype}\n                  />\n                  <br />\n                  <br />\n                  <br />\n                  <List\n                    list={instances}\n                    value={currentInstance}\n                    title=\"Reconstructed morphology\"\n                    color={colorName}\n                    onSelect={setInstance}\n                    anchor=\"data\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Filters>\n\n      <div id=\"data\" />\n\n      {!!currentInstance && <DataContainer>\n        <Collapsible title={`Neuron Morphology ${currentMtype} ${currentInstance}`}>\n          <ESData\n            query={morphologyDataQuery(currentMtype, currentInstance)}\n          >\n            {esDocuments => (\n              <>\n                {!!esDocuments && !!esDocuments.length && (\n                  <>\n                    <h3>3D view</h3>\n                    <NexusPlugin\n                      className=\"mt-3\"\n                      name=\"neuron-morphology\"\n                      resource={esDocuments[0]._source}\n                      nexusClient={nexus}\n                    />\n                    <div className=\"text-right\">\n                      <NexusFileDownloadButton\n                        className=\"mt-3\"\n                        filename={getMorphologyDistribution(esDocuments[0]._source).name}\n                        url={getMorphologyDistribution(esDocuments[0]._source).contentUrl}\n                        org={hippocampus.org}\n                        project={hippocampus.project}\n                      >\n                        Download morphology\n                      </NexusFileDownloadButton>\n                    </div>\n                  </>\n                )}\n              </>\n            )}\n          </ESData>\n          <ExpMorphologyFactsheet className=\"mt-3\" morphologyName={currentInstance} />\n        </Collapsible>\n\n        <Collapsible title=\"Population\" className=\"mt-4 mb-4\">\n          <h3>Reconstructed morphologies</h3>\n          <ESData query={mtypeExpMorphologyListDataQuery(currentMtype)}>\n            {esDocuments => (\n              <>\n                {!!esDocuments &&\n                  <ExpMorphologyTable\n                    morphologies={getAndSortMorphologies(esDocuments)}\n                  />\n                }\n              </>\n            )}\n          </ESData>\n        </Collapsible>\n      </DataContainer>}\n    </>\n  );\n};\n\nexport default NeuronExperimentalMorphology;\n","import React from 'react';\n\nimport MainLayout from '../../layouts/MainLayout';\nimport NeuronMorphologyView from '../../views/experimental/NeuronMorphology';\n\n\nexport default function About() {\n  return (\n    <MainLayout>\n      <NeuronMorphologyView />\n    </MainLayout>\n  );\n};\n","\ntype ESQuery = Record<string, unknown>;\n\n/**\n * Lists get specific experiment of specific e-type\n *\n */\nexport const layerAnatomyDataQuery = {\n  from: 0,\n  size: 1000,\n  query: {\n    bool: {\n      filter: [\n        {\n          bool: {\n            should: [\n              {\n                term: {\n                  '@type': 'LayerThickness',\n                },\n              },\n              {\n                term: {\n                  '@type': 'NeuronDensity',\n                },\n              },\n              {\n                term: {\n                  '@type': 'SliceCollection',\n                }\n              }\n            ],\n          },\n        },\n      ],\n    },\n  },\n};\n\nexport const electroPhysiologyDataQuery = (\n  etype: string,\n  experiment: string,\n): ESQuery | null => {\n  if (!etype || !experiment) {\n    return null;\n  }\n\n  return {\n    from: 0,\n    size: 100,\n    query: {\n      bool: {\n        filter: [\n          {\n            bool: {\n              must: [\n                { term: { '@type': 'Trace' } },\n              ],\n            },\n          },\n          {\n            bool: {\n              must: {\n                term: { 'name.raw': experiment }\n              }\n            }\n          },\n          {\n            nested: {\n              path: 'annotation.hasBody',\n              query: {\n                bool: {\n                  filter: { term: { 'annotation.hasBody.label.raw': etype } },\n                },\n              },\n            },\n          },\n          {\n            nested: {\n              path: 'distribution',\n              query: {\n                bool: {\n                  must: {\n                    match: { 'distribution.encodingFormat': 'application/nwb' },\n                  },\n                },\n              },\n            },\n          },\n        ],\n      },\n    },\n  };\n};\n\nexport const ephysByNameDataQuery = (\n  names: string[],\n): ESQuery | null => {\n  if (!names) {\n    return null;\n  }\n\n  return {\n    from: 0,\n    size: 10000,\n    query: {\n      bool: {\n        filter: [\n          {\n            bool: {\n              must: [\n                { term: { '@type': 'Trace' } },\n              ],\n            },\n          },\n          {\n            bool: {\n              must: {\n                terms: { 'name.raw': names }\n              }\n            }\n          },\n          {\n            bool: {\n              must: {\n                term: { 'note': 'subset' }\n              }\n            }\n          },\n          {\n            nested: {\n              path: 'distribution',\n              query: {\n                bool: {\n                  must: {\n                    match: { 'distribution.encodingFormat': 'application/nwb' },\n                  },\n                },\n              },\n            },\n          },\n        ],\n      },\n    },\n  };\n};\n\n\nexport const mtypeExpMorphologyListDataQuery = (\n  mtype: string\n): ESQuery | null => {\n  if (!mtype) {\n    return null;\n  }\n\n  return {\n    from: 0,\n    size: 200,\n    query: {\n      bool: {\n        filter: [\n          {\n            bool: {\n              should: [\n                {\n                  term: {\n                    '_deprecated': false,\n                  },\n                },\n              ],\n            },\n          },\n          {\n            bool: {\n              should: [\n                {\n                  term: {\n                    '@type': 'ReconstructedCell',\n                  },\n                },\n              ],\n            },\n          },\n          {\n            nested: {\n              path: 'annotation.hasBody',\n              query: {\n                bool: {\n                  filter: [\n                    {\n                      term: {\n                        'annotation.hasBody.label.raw': mtype,\n                      },\n                    },\n                  ],\n                },\n              },\n            },\n          },\n        ],\n      },\n    },\n  };\n};\n\nexport const morphologyDataQuery = (\n  mtype: string,\n  instance: string\n): ESQuery | null => {\n  if(!mtype || !instance) {\n    return null;\n  }\n\n  return {\n    from: 0,\n    size: 100,\n    query: {\n      bool: {\n        filter: [\n          {\n            bool: {\n              should: [\n                {\n                  term: {\n                    '_deprecated': false,\n                  },\n                },\n              ],\n            },\n          },\n          {\n            bool: {\n              should: [\n                {\n                  term: {\n                    '@type': 'NeuronMorphology',\n                  },\n                },\n              ],\n            },\n          },\n          {\n            bool: {\n              should: [\n                {\n                  term: {\n                    'name.raw': instance,\n                  },\n                },\n              ],\n            },\n          },\n          // {\n          //   nested: {\n          //     path: 'annotation.hasBody',\n          //     query: {\n          //       bool: {\n          //         filter: [\n          //           {\n          //             term: {\n          //               'annotation.hasBody.label.raw': mtype,\n          //             },\n          //           },\n          //         ],\n          //       },\n          //     },\n          //   },\n          // },\n        ],\n      },\n    },\n  };\n};\n\n\nexport const dataByIdQuery = (\n  id: string | string[]\n): ESQuery | null => {\n  if(!id) {\n    return null;\n  }\n\n  return {\n    from: 0,\n    size: 100,\n    query: {\n      bool: {\n        filter: [\n          {\n            bool: {\n              should: [\n                {\n                  term: {\n                    '_deprecated': false,\n                  },\n                },\n              ],\n            },\n          },\n          {\n            bool: {\n              should: [\n                {\n                  term: {\n                    '@id': id,\n                  },\n                },\n              ],\n            },\n          },\n        ],\n      },\n    },\n  };\n};\n\n\nexport const etypeTracesDataQuery = (\n  etype: string,\n): ESQuery | null => {\n  if (!etype) {\n    return null;\n  }\n\n  return {\n    from: 0,\n    size: 10000,\n    query: {\n      bool: {\n        filter: [\n          {\n            bool: {\n              must: [\n                { term: { '@type': 'Trace' } },\n              ],\n            },\n          },\n          {\n            bool: {\n              must_not: {\n                exists: {\n                  \"field\": \"note\",\n                },\n              },\n            },\n          },\n          {\n            nested: {\n              path: 'annotation.hasBody',\n              query: {\n                bool: {\n                  filter: { term: { 'annotation.hasBody.label.raw': etype } },\n                },\n              },\n            },\n          },\n          {\n            nested: {\n              path: 'distribution',\n              query: {\n                bool: {\n                  must: {\n                    match: { 'distribution.encodingFormat': 'application/rab' },\n                  },\n                },\n              },\n            },\n          },\n        ],\n      },\n    },\n  };\n};\n","import { accentColors } from '../../config';\nimport { Color } from '../../types';\n\nexport const sectionTitle = 'Experimental Data';\nexport const colorName: Color = 'grey-1';\nexport const primaryColor = accentColors[colorName];\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/experimental-data/neuronal-morphology\",\n      function () {\n        return require(\"private-next-pages/experimental-data/neuronal-morphology.tsx\");\n      }\n    ]);\n  ","// extracted by mini-css-extract-plugin\nmodule.exports = {\"morphImageContainer\":\"styles_morphImageContainer__1PM2z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__9zB6A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layer\":\"styles_layer__uUJ49\",\"active\":\"styles_active__1RUjp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selector\":\"neuron-morphology_selector__2Hh7F\",\"selectorColumn\":\"neuron-morphology_selectorColumn__1ltHl\",\"selectorHead\":\"neuron-morphology_selectorHead__3ZykT\",\"selectorBody\":\"neuron-morphology_selectorBody__Gr9_a\"};"],"sourceRoot":""}