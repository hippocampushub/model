(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4574],{68607:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/digital-reconstructions/connection-anatomy",function(){return n(81725)}])},13025:function(e,t,n){"use strict";var a=n(85893),s=n(67294),r=n(23148),i=n(61267),o=n(33638);r.kL.register(...r.zX),t.Z=e=>{let{data:t,height:n=500,title:l,yAxisLabel:c,theme:u=3}=e,d=(0,s.useRef)(null),m=(0,s.useRef)(null),p=(0,s.useCallback)(e=>{let t=[i.x8.blue,i.x8.yellow,i.x8.green,i.x8.red,i.x8.purple];return t[e%t.length]},[]),y=(0,s.useMemo)(()=>{if(!t||!t.value_map)return[];let e=Object.keys(t.value_map),n=Object.keys(t.value_map[e[0]]);return e.map((e,a)=>({label:"".concat(e," (Model)"),data:n.map(n=>100*(t.value_map[e][n]||0)),backgroundColor:p(a),stack:"Model"}))},[t,p]),h={id:"hachurePlugin",afterDatasetsDraw(e,t,n){let{ctx:a,data:s}=e;a.save(),a.lineWidth=1,a.strokeStyle="white",s.datasets.forEach((t,n)=>{if("Exp"===t.stack){let s=e.getDatasetMeta(n);s.data.forEach((e,n)=>{if(t.data[n]>0){let{x:t,y:n,width:s,height:r}=e.getProps(["x","y","width","height"]);a.save(),a.beginPath(),a.rect(t-s/2,n,s,r),a.clip();for(let e=-s;e<r+s;e+=4)a.moveTo(t-s/2,n+e),a.lineTo(t+s/2,n+e-s);a.stroke(),a.restore()}})}}),a.restore()}};(0,s.useEffect)(()=>{if(!d.current||!t||!t.value_map)return;let e=d.current.getContext("2d");if(!e)return;let n=Object.keys(t.value_map[Object.keys(t.value_map)[0]]);return m.current&&m.current.destroy(),m.current=new r.kL(e,{type:"bar",data:{labels:n,datasets:y},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!!l,text:l||t.name},tooltip:{mode:"index",intersect:!1},legend:{position:"right"}},scales:{x:{stacked:!0},y:{stacked:!0,beginAtZero:!0,max:100,title:{display:!0,text:c||t.unit||"Percentage"}}}},plugins:[h]}),()=>{m.current&&m.current.destroy()}},[t,y,l,c]);let f=(0,s.useCallback)(()=>{if(!t)return;let e="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(t))),n=document.createElement("a");n.href=e,n.download="".concat(t.id||"laminar-data",".json"),n.click()},[t]);return t&&t.value_map?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{height:"".concat(n,"px")},children:(0,a.jsx)("canvas",{ref:d,"aria-label":"Laminar Distribution Graph",role:"img"})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o.Z,{theme:u,onClick:f,children:"Download Data"})})]}):(0,a.jsx)("div",{children:"No data available"})}},28354:function(e,t,n){"use strict";var a=n(85893),s=n(67294),r=n(11163);t.Z=(e,t)=>()=>{let n=(0,r.useRouter)();return(0,s.useEffect)(()=>{if(n.isReady&&!n.query[t.key]){let e=t.defaultQuery;n.replace({query:e},void 0,{shallow:!0})}},[n.query]),(0,a.jsx)(e,{})}},81725:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return DigRecConnectionsPage}});var a=n(85893),s=n(9008),r=n.n(s),i=n(67294),o=n(41664),l=n.n(o),c=n(11163),u=n(71376),d=n(82718),m=n(78433),p=n(67264),y=n(50818),h=n(35930),f=n(58856),b=n(33638),x=n(13210),v=n(22633),g=n(13025),j=n(61267),_=n(17931),w=n(42978),C=n(28354),k=n(74660),N=(0,C.Z)(()=>{let e=(0,c.useRouter)(),{volume_section:t,prelayer:n,postlayer:s}=e.query,[r,o]=(0,i.useState)({volume_section:t,prelayer:n,postlayer:s}),[C,N]=(0,i.useState)(null),[P,S]=(0,i.useState)({}),[E,D]=(0,i.useState)(null),[T,R]=(0,i.useState)(null),setParams=t=>{let n={...e.query,...t};e.push({query:n},void 0,{shallow:!0})};(0,i.useEffect)(()=>{if(e.isReady){if(e.query.prelayer||e.query.volume_section||e.query.postlayer)o({volume_section:t,prelayer:n,postlayer:s});else{let t=j.defaultSelection.digitalReconstruction.connectionAnatomy,{volume_section:n,prelayer:a,postlayer:s}=t;o({volume_section:n,prelayer:a,postlayer:s}),e.replace({query:t},void 0,{shallow:!0})}}},[e.query]);let setVolumeSectionQuery=e=>{o(t=>{let n={...t,volume_section:e};return setParams(n),n})},setPreLayerQuery=e=>{o(t=>{let n={...t,prelayer:e};return setParams(n),n})},setPostLayerQuery=e=>{o(t=>{let n={...t,postlayer:e};return setParams(n),n})},L=[{title:"Volume section",key:"volume_section",values:j.jo,setFn:setVolumeSectionQuery},{title:"Pre-synaptic cell group",key:"prelayer",values:j.ST,setFn:setPreLayerQuery},{title:"Post-synaptic cell group",key:"postlayer",values:j.ST,setFn:setPostLayerQuery}];(0,i.useEffect)(()=>{r.volume_section&&r.prelayer&&r.postlayer&&(fetchFactsheetData(),fetchLaminarData())},[r]);let fetchFactsheetData=async()=>{try{let{volume_section:e,prelayer:t,postlayer:n}=r,a="".concat(_.$N,"/3_digital-reconstruction/connection-anatomy/").concat(e,"/").concat(t,"-").concat(n,"/distribution-plots.json"),s=await fetch(a),i=await s.json();i&&Array.isArray(i.values)?(N(i.values),updateAvailablePlots(i.values)):console.error("Unexpected data format:",i)}catch(e){console.error("Error fetching factsheet:",e)}},fetchLaminarData=async()=>{try{let{volume_section:e,prelayer:t,postlayer:n}=r,a="".concat(_.$N,"/3_digital-reconstruction/connection-anatomy/").concat(e,"/").concat(t,"-").concat(n,"/Connections.json");console.log("Fetching laminar data from:",a);let s=await fetch(a);if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let i=await s.json();console.log("Fetched laminar data:",i);let o=i.values.find(e=>"laminar-distribution"===e.id);o?(D(o),R(null)):(console.warn("No laminar distribution data found in the response"),R("No laminar distribution data available for this selection."),D(null))}catch(e){console.error("Error fetching laminar data:",e),R("Error loading laminar distribution data. Please try again later."),D(null)}},updateAvailablePlots=e=>{let t=["bouton-density","sample-convergence-by-connection","sample-convergence-by-synapse","sample-divergence-by-connection","sample-divergence-by-synapse","connection-probability-vs-inter-somatic-distance"].reduce((t,n)=>(t[n]=e.some(e=>e.id===n),t),{});S(t)},getPlotDataById=e=>null==C?void 0:C.find(t=>t.id===e),renderPlot=(e,t,n,s,i)=>{if(!P[e])return null;let o=getPlotDataById(e);return(0,a.jsxs)(h.Z,{title:t,id:e,className:"mt-4",children:[(0,a.jsx)("div",{className:"graph",children:(0,a.jsx)(f.Z,{plotData:o,xAxis:n,yAxis:s,xAxisTickStep:i})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)(b.Z,{theme:3,onClick:()=>(0,w.KO)(o,"".concat(e,"-").concat(r.volume_section,"-").concat(r.prelayer,"-").concat(r.postlayer,".json")),children:[(0,a.jsx)("span",{style:{textTransform:"capitalize"},className:"collapsible-property small",children:r.volume_section}),t,(0,a.jsx)("span",{className:"!mr-0 collapsible-property small ",children:r.prelayer})," ","-"," ",(0,a.jsx)("span",{className:"!ml-0 collapsible-property small ",children:r.postlayer})]})})]})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{theme:3,hasData:!!r.prelayer&&!!r.postlayer,children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row w-full lg:items-center mt-40 lg:mt-0",children:[(0,a.jsx)("div",{className:"w-full lg:w-1/2 md:w-full md:flex-none mb-8 md:mb-8 lg:pr-0",children:(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(m.Z,{title:"Connection Anatomy",subtitle:"Digital Reconstructions",theme:3}),(0,a.jsx)("div",{role:"information",children:(0,a.jsx)(p.Z,{children:(0,a.jsxs)("p",{children:["We combined"," ",(0,a.jsx)(l(),{href:"/experimental-data/connection-anatomy/",className:"link theme-".concat(3),children:"literature data"})," ","and predictions on"," ",(0,a.jsx)(l(),{href:"/reconstruction-data/connections/",className:"link theme-".concat(3),children:"uncharacterized pathways"})," ","to reconstruct the CA1 internal connection anatomy and physiology. The resulting connectome consists of 821 M synapses. For each circuit, each pathway is analyzed in terms of number of synapses per connection, divergence, convergence, connection probability, and synaptic properties."]})})})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-8 mb-12 md:mb-0 mx-8 md:mx-0 lg:w-1/2 md:w-full flex-grow md:flex-none justify-center",style:{maxWidth:"800px"},children:[(0,a.jsxs)("div",{className:"selector__column selector__column--lg mt-3 theme-".concat(3),style:{maxWidth:"auto"},children:[(0,a.jsx)("div",{className:"selector__head theme-".concat(3),children:"1. Select a volume section"}),(0,a.jsx)("div",{className:"selector__body",children:(0,a.jsx)(v.Z,{value:r.volume_section,onSelect:setVolumeSectionQuery,theme:3})})]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 flex-grow p-0 m-0",children:[(0,a.jsxs)("div",{className:"selector__column theme-".concat(3," flex-1"),style:{maxWidth:"auto"},children:[(0,a.jsx)("div",{className:"selector__head theme-".concat(3),children:"2. Select a pre-synaptic cell group"}),(0,a.jsx)("div",{className:"selector__body",children:(0,a.jsx)(x.Z,{block:!0,list:j.ST,value:r.prelayer,title:"m-type",onSelect:setPreLayerQuery,theme:3})})]}),(0,a.jsxs)("div",{className:"selector__column theme-".concat(3," flex-1"),children:[(0,a.jsx)("div",{className:"selector__head theme-".concat(3),children:"3. Select a post-synaptic cell group"}),(0,a.jsx)("div",{className:"selector__body",children:(0,a.jsx)(x.Z,{block:!0,list:j.ST,value:r.postlayer,title:"m-type",onSelect:setPostLayerQuery,theme:3})})]})]})]})]})}),(0,a.jsxs)(y.Z,{visible:!!r.volume_section&&!!r.prelayer&&!!r.postlayer,navItems:[{id:"bouton-density",label:"Bouton density of the presynaptic cells"},{id:"sample-convergence-by-connection",label:"Number of synapses per connection"},{id:"sample-convergence-by-synapse",label:"Convergence (synapses)"},{id:"sample-divergence-by-connection",label:"Divergence (connections)"},{id:"sample-divergence-by-synapse",label:"Divergence (synapses)"},{id:"laminar-distribution-synapses",label:"Laminar distribution of synapses"},{id:"connection-probability-vs-inter-somatic-distance",label:"Connection probability vs inter-somatic distance"}],quickSelectorEntries:L,children:[(0,a.jsx)(k.T,{pre:r.prelayer,post:r.postlayer}),renderPlot("bouton-density","Bouton density of the presynaptic cells","Bouton density (\xb5mâ»\xb9)","Count",.1),renderPlot("sample-convergence-by-connection","Number of synapses per connection","Synapse/connection","Count",100),renderPlot("sample-convergence-by-synapse","Convergence (synapses)","Synapses","Count",1e3),T?(0,a.jsx)(h.Z,{title:"Laminar distribution of synapses",id:"laminar-distribution-synapses",children:(0,a.jsx)("div",{className:"text-center p-4",children:(0,a.jsx)("p",{className:"text-red-500",children:T})})}):E?(0,a.jsx)(h.Z,{title:"Laminar distribution of synapses",id:"laminar-distribution-synapses",children:(0,a.jsx)(g.Z,{data:E,title:"Laminar Distribution of Synapses",yAxisLabel:"Percentage of synapses"})}):(0,a.jsx)(h.Z,{title:"Laminar distribution of synapses",id:"laminar-distribution-synapses",children:(0,a.jsx)("div",{className:"text-center p-4",children:(0,a.jsx)("p",{children:"Loading laminar distribution data..."})})}),renderPlot("sample-divergence-by-connection","Divergence (connections)","Connections","Count",500),renderPlot("sample-divergence-by-synapse","Divergence (synapses)","Synapses","Count",2e3),renderPlot("connection-probability-vs-inter-somatic-distance","Connection probability vs inter-somatic distance","Inter-somatic distance (\xb5m)","Connection probability",100)]})]})},{key:"volume_section",defaultQuery:j.defaultSelection.digitalReconstruction.connectionAnatomy});function DigRecConnectionsPage(){let e={title:"Connection Anatomy | Digital Reconstructions | The Hippocampus Hub",description:"Explore the anatomical properties of neuronal connections in hippocampal digital reconstructions. This page features data on synapse numbers, synapse distribution, and connectivity pathways.",keywords:["Connection Anatomy","Synapses","Connectivity Pathways","Hippocampus","Digital Reconstructions","Neuroscience","Blue Brain Project"],author:"Blue Brain Project",creator:"EPFL Blue Brain Project",publisher:"The Hippocampus Hub"};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:e.title}),(0,a.jsx)("meta",{name:"description",content:e.description}),(0,a.jsx)("meta",{name:"keywords",content:e.keywords.join(", ")}),(0,a.jsx)("meta",{name:"author",content:e.author}),(0,a.jsx)("meta",{name:"creator",content:e.creator}),(0,a.jsx)("meta",{name:"publisher",content:e.publisher})]}),(0,a.jsx)(N,{})]})}},26495:function(e,t,n){"use strict";n.d(t,{$Q:function(){return l},bp:function(){return c},x1:function(){return o}});var a=n(67294),s=n(23148);let r="label";function reforwardRef(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function setDatasets(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a=[];e.datasets=t.map(t=>{let s=e.datasets.find(e=>e[n]===t[n]);return!s||!t.data||a.includes(s)?{...t}:(a.push(s),Object.assign(s,t),s)})}let i=(0,a.forwardRef)(function(e,t){let{height:n=150,width:i=300,redraw:o=!1,datasetIdKey:l,type:c,data:u,options:d,plugins:m=[],fallbackContent:p,updateMode:y,...h}=e,f=(0,a.useRef)(null),b=(0,a.useRef)(),renderChart=()=>{f.current&&(b.current=new s.kL(f.current,{type:c,data:function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,a={labels:[],datasets:[]};return t=e.labels,a.labels=t,setDatasets(a,e.datasets,n),a}(u,l),options:d&&{...d},plugins:m}),reforwardRef(t,b.current))},destroyChart=()=>{reforwardRef(t,null),b.current&&(b.current.destroy(),b.current=null)};return(0,a.useEffect)(()=>{!o&&b.current&&d&&function(e,t){let n=e.options;n&&t&&Object.assign(n,t)}(b.current,d)},[o,d]),(0,a.useEffect)(()=>{if(!o&&b.current){var e,t;e=b.current.config.data,t=u.labels,e.labels=t}},[o,u.labels]),(0,a.useEffect)(()=>{!o&&b.current&&u.datasets&&setDatasets(b.current.config.data,u.datasets,l)},[o,u.datasets]),(0,a.useEffect)(()=>{b.current&&(o?(destroyChart(),setTimeout(renderChart)):b.current.update(y))},[o,d,u.labels,u.datasets,y]),(0,a.useEffect)(()=>{b.current&&(destroyChart(),setTimeout(renderChart))},[c]),(0,a.useEffect)(()=>(renderChart(),()=>destroyChart()),[]),a.createElement("canvas",Object.assign({ref:f,role:"img",height:n,width:i},h),p)});function createTypedChart(e,t){return s.kL.register(t),(0,a.forwardRef)((t,n)=>a.createElement(i,Object.assign({},t,{ref:n,type:e})))}let o=createTypedChart("line",s.ST),l=createTypedChart("bar",s.vn),c=createTypedChart("scatter",s.ho)}},function(e){e.O(0,[1228,2196,3737,7056,9676,9242,9227,8287,4088,6935,9774,2888,179],function(){return e(e.s=68607)}),_N_E=e.O()}]);