{"version":3,"file":"static/chunks/pages/digital-reconstructions/region-8135240f3ed9aaa2.js","mappings":"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","sources":["webpack://_N_E/./node_modules/@ant-design/icons-svg/lib/asn/CameraOutlined.js","webpack://_N_E/./node_modules/@ant-design/icons-svg/lib/asn/FullscreenExitOutlined.js","webpack://_N_E/./node_modules/@ant-design/icons-svg/lib/asn/FullscreenOutlined.js","webpack://_N_E/./node_modules/@ant-design/icons/lib/icons/CameraOutlined.js","webpack://_N_E/./node_modules/@ant-design/icons/lib/icons/FullscreenExitOutlined.js","webpack://_N_E/./node_modules/@ant-design/icons/lib/icons/FullscreenOutlined.js","webpack://_N_E/?2223","webpack://_N_E/./src/views/3_digital-reconstructions/region/region-viewer/utils.ts","webpack://_N_E/./src/views/3_digital-reconstructions/region/region-viewer/region-viewer.ts","webpack://_N_E/./src/views/3_digital-reconstructions/region/region-viewer/RegionViewer.tsx","webpack://_N_E/./src/views/3_digital-reconstructions/Region.tsx","webpack://_N_E/./src/pages/digital-reconstructions/region.tsx","webpack://_N_E/./src/views/3_digital-reconstructions/region/region-viewer/volume-viewer.module.scss","webpack://_N_E/./node_modules/fscreen/dist/fscreen.esm.js","webpack://_N_E/./node_modules/react-full-screen/dist/index.modern.js","webpack://_N_E/<anon>"],"sourcesContent":["\"use strict\";\n// This icon file is generated automatically.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CameraOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z\" } }] }, \"name\": \"camera\", \"theme\": \"outlined\" };\nexports.default = CameraOutlined;\n","\"use strict\";\n// This icon file is generated automatically.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar FullscreenExitOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z\" } }] }, \"name\": \"fullscreen-exit\", \"theme\": \"outlined\" };\nexports.default = FullscreenExitOutlined;\n","\"use strict\";\n// This icon file is generated automatically.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar FullscreenOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z\" } }] }, \"name\": \"fullscreen\", \"theme\": \"outlined\" };\nexports.default = FullscreenOutlined;\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _CameraOutlined = _interopRequireDefault(require(\"@ant-design/icons-svg/lib/asn/CameraOutlined\"));\nvar _AntdIcon = _interopRequireDefault(require(\"../components/AntdIcon\"));\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nvar CameraOutlined = function CameraOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(_AntdIcon.default, (0, _objectSpread2.default)((0, _objectSpread2.default)({}, props), {}, {\n    ref: ref,\n    icon: _CameraOutlined.default\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(CameraOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'CameraOutlined';\n}\nvar _default = exports.default = RefIcon;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _FullscreenExitOutlined = _interopRequireDefault(require(\"@ant-design/icons-svg/lib/asn/FullscreenExitOutlined\"));\nvar _AntdIcon = _interopRequireDefault(require(\"../components/AntdIcon\"));\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nvar FullscreenExitOutlined = function FullscreenExitOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(_AntdIcon.default, (0, _objectSpread2.default)((0, _objectSpread2.default)({}, props), {}, {\n    ref: ref,\n    icon: _FullscreenExitOutlined.default\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(FullscreenExitOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'FullscreenExitOutlined';\n}\nvar _default = exports.default = RefIcon;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _FullscreenOutlined = _interopRequireDefault(require(\"@ant-design/icons-svg/lib/asn/FullscreenOutlined\"));\nvar _AntdIcon = _interopRequireDefault(require(\"../components/AntdIcon\"));\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nvar FullscreenOutlined = function FullscreenOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(_AntdIcon.default, (0, _objectSpread2.default)((0, _objectSpread2.default)({}, props), {}, {\n    ref: ref,\n    icon: _FullscreenOutlined.default\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(FullscreenOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'FullscreenOutlined';\n}\nvar _default = exports.default = RefIcon;","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/digital-reconstructions/region\",\n      function () {\n        return require(\"private-next-pages/digital-reconstructions/region.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/digital-reconstructions/region\"])\n      });\n    }\n  ","export class RendererCtrl {\n  public stopped = false;\n\n  private countinuousRenderCounter = 0;\n  private once = true;\n  private stopTime = null;\n\n  public get render() {\n    if (this.stopped) return false;\n\n    if (this.countinuousRenderCounter) return true;\n\n    if (this.stopTime) {\n      const now = Date.now();\n      if (this.stopTime > now) return true;\n\n      this.stopTime = null;\n      return false;\n    }\n\n    const { once } = this;\n    this.once = false;\n    return once;\n  }\n\n  public renderOnce() {\n    this.once = true;\n  }\n\n  public renderFor(time) {\n    const now = Date.now();\n    if (this.stopTime && this.stopTime > now + time) return;\n    this.stopTime = now + time;\n  }\n\n  public renderUntilStopped() {\n    this.countinuousRenderCounter += 1;\n    return () => { this.countinuousRenderCounter -= 1; };\n  }\n\n  public stop() {\n    this.stopped = true\n  }\n}\n","import throttle from 'lodash/throttle';\nimport { TrackballControls } from 'three/examples/jsm/controls/TrackballControls';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader';\nimport {\n  AmbientLight,\n  Box3,\n  Color,\n  DoubleSide,\n  Group,\n  Material,\n  Mesh,\n  MeshLambertMaterial,\n  PerspectiveCamera,\n  PointLight,\n  Scene,\n  Vector3,\n  WebGLRenderer\n} from 'three';\n\nimport { Layer, VolumeSection } from '@/types';\n\nimport { RendererCtrl } from './utils';\nimport { saveAs } from 'file-saver';\n\nconst AMBIENT_LIGHT_COLOR = 0x555555;\nconst CAMERA_LIGHT_COLOR = 0xcacaca;\nconst BACKGROUND_COLOR = 0xfefdfb;\n\nfunction parseCssColor(colorStr: string) {\n  return parseInt(colorStr.replace('#', ''), 16);\n}\n\nexport default class VolumeViewer {\n  private meshPath: string | null = null;\n  private volumeSection: VolumeSection | null = null;\n\n  private container: HTMLDivElement | null = null;\n  private resizeObserver: ResizeObserver | null = null;\n  private canvas: HTMLCanvasElement | null = null;\n  private renderer: WebGLRenderer | null = null;\n  private scene: Scene | null = null;\n  private camera: PerspectiveCamera | null = null;\n  private controls: TrackballControls | null = null;\n  private ctrl: RendererCtrl = new RendererCtrl();\n  private onUserInteract: EventListener = () => { };\n\n  private material: Record<string, Material> = {};\n  private group: Group | null = null;\n  private layerMesh: { [meshName: string]: Mesh } = {};\n\n  constructor(container: HTMLDivElement) {\n    this.container = container;\n  }\n\n  public async init(meshPath: string, volumeSection: VolumeSection) {\n    try {\n      this.meshPath = meshPath;\n      this.volumeSection = volumeSection;\n\n      this.initCanvas();\n      this.initRenderer();\n      this.initScene();\n      this.initCamera();\n      this.initControls();\n      this.initEvents();\n      this.initObservers();\n\n      this.initMaterials();\n\n      await this.initMeshes();\n\n      this.alignCamera();\n\n      this.ctrl.renderOnce();\n      this.startRenderLoop();\n    } catch (error) {\n      //console.error('Error initializing VolumeViewer:', error);\n    }\n  }\n\n  public resize() {\n    const { clientWidth, clientHeight } = this.container!;\n    this.camera!.aspect = clientWidth / clientHeight;\n    this.camera!.updateProjectionMatrix();\n    this.renderer!.setSize(clientWidth, clientHeight);\n\n    this.ctrl.renderOnce();\n  }\n\n  public setVolumeSection(volumeSection: VolumeSection, visibility: Record<string, boolean>) {\n    this.volumeSection = volumeSection;\n\n    //console.log(`Volume section changed to: ${volumeSection}`);\n    //console.log('Current layer visibility:');\n\n    Object.entries(this.layerMesh).forEach(([meshName, mesh]) => {\n      if (meshName === 'region') {\n        mesh.visible = true;\n      } else {\n        const layerType = meshName.replace('neurons_', '');\n        mesh.visible = layerType === volumeSection && visibility[layerType];\n      }\n      //console.log(`  ${meshName}: ${mesh.visible ? 'visible' : 'hidden'}`);\n    });\n\n    this.ctrl.renderOnce();\n  }\n\n  public setLayerVisibility(visibility: Record<string, boolean>) {\n    //console.log('Layer visibility changed:');\n\n    Object.entries(visibility).forEach(([layer, visible]) => {\n      if (layer === 'region') {\n        this.layerMesh['region'].visible = true;\n        //console.log(`  region: always visible`);\n      } else {\n        const meshKey = `neurons_${layer}`;\n        if (this.layerMesh[meshKey]) {\n          this.layerMesh[meshKey].visible = (layer === this.volumeSection) && visible;\n          //console.log(`  ${meshKey}: ${this.layerMesh[meshKey].visible ? 'visible' : 'hidden'}`);\n        } else {\n          //console.warn(`  Mesh for ${meshKey} is not found`);\n        }\n      }\n    });\n\n    this.ctrl.renderOnce();\n  }\n\n  public downloadRender(filename: string) {\n    const { clientWidth, clientHeight } = this.renderer!.domElement.parentElement!;\n\n    const renderer = new WebGLRenderer({\n      antialias: true,\n      alpha: true,\n      preserveDrawingBuffer: true,\n      physicallyCorrectColors: true,\n    });\n\n    renderer.setSize(clientWidth * 3, clientHeight * 3);\n\n    renderer.render(this.scene!, this.camera!);\n\n    renderer.domElement.toBlob(blob => saveAs(blob!, `${filename}.png`));\n    renderer.dispose();\n  }\n\n  public destroy() {\n    Object.values(this.material).forEach(material => material.dispose());\n    Object.values(this.layerMesh).forEach(mesh => mesh.geometry.dispose());\n\n    if (this.renderer) {\n      this.renderer.domElement.removeEventListener('wheel', this.onUserInteract);\n      this.renderer.domElement.removeEventListener('mousemove', this.onUserInteract);\n      this.renderer.domElement.removeEventListener('touchmove', this.onUserInteract);\n      this.renderer.domElement.removeEventListener('pointermove', this.onUserInteract);\n    }\n\n    if (this.resizeObserver) {\n      this.resizeObserver.unobserve(this.container!);\n    }\n\n    if (this.controls) {\n      this.controls.dispose();\n    }\n    if (this.renderer) {\n      this.renderer.dispose();\n    }\n\n    if (this.container && this.canvas) {\n      this.container.removeChild(this.canvas);\n    }\n  }\n\n  private initCanvas() {\n    this.canvas = document.createElement('canvas');\n    this.container!.appendChild(this.canvas);\n  }\n\n  private initRenderer() {\n    this.renderer = new WebGLRenderer({\n      canvas: this.canvas!,\n      antialias: true,\n    });\n\n    const { clientWidth, clientHeight } = this.container!;\n    this.renderer.setSize(clientWidth, clientHeight);\n    this.renderer.setPixelRatio(window.devicePixelRatio || 1);\n  }\n\n  private initScene() {\n    this.scene = new Scene();\n    this.scene.background = new Color(\"#EFF1F8\");\n    this.scene.add(new AmbientLight(AMBIENT_LIGHT_COLOR));\n  }\n\n  private initCamera() {\n    const { clientWidth, clientHeight } = this.container!;\n    this.camera = new PerspectiveCamera(45, clientWidth / clientHeight, 1, 30000);\n    this.scene!.add(this.camera);\n    this.camera.add(new PointLight(CAMERA_LIGHT_COLOR, 0.9));\n  }\n\n  private initControls() {\n    this.controls = new TrackballControls(this.camera!, this.renderer!.domElement);\n    this.controls.enableDamping = true;\n    this.controls.zoomSpeed = 0.5;\n    this.controls.rotateSpeed = 0.8;\n    this.controls.maxDistance = 20000;\n  }\n\n  private initEvents() {\n    const params = { capture: false, passive: true };\n\n    this.onUserInteract = throttle(() => this.ctrl.renderFor(4000), 100).bind(this);\n\n    this.canvas!.addEventListener('wheel', this.onUserInteract, params);\n    this.canvas!.addEventListener('mousemove', this.onUserInteract, params);\n    this.canvas!.addEventListener('touchmove', this.onUserInteract, params);\n    this.canvas!.addEventListener('pointermove', this.onUserInteract, params);\n  }\n\n  private initObservers() {\n    this.resizeObserver = new ResizeObserver(() => setTimeout(() => this.resize(), 0));\n    this.resizeObserver.observe(this.container!);\n  }\n\n  private initMaterials() {\n    this.material = {\n      region: new MeshLambertMaterial({\n        color: parseCssColor(\"#3b4165\"),\n        wireframe: true,\n        transparent: true,\n        opacity: .05,\n      }),\n      neurons: new MeshLambertMaterial({ color: parseCssColor(\"#3b4165\") }),\n      cylinder: new MeshLambertMaterial({ color: parseCssColor(\"#3b4165\") }),\n      slice: new MeshLambertMaterial({ color: parseCssColor(\"#3b4165\") }),\n    }\n  }\n\n  private initMeshes() {\n    const loader = new OBJLoader();\n\n    return new Promise<void>((resolve) => {\n      loader.load(this.meshPath!, (obj) => {\n        obj.traverse(mesh => {\n          if (!mesh.isMesh) return;\n\n          const { name } = mesh;\n\n          if (name === 'region') {\n            mesh.material = this.material.region;\n            mesh.visible = true;\n          } else if (name === 'neurons_region') {\n            mesh.material = this.material.neurons;\n            mesh.visible = this.volumeSection === 'region';\n          } else {\n            const layerType = name.replace('neurons_', '');\n            mesh.material = this.material[layerType];\n            mesh.visible = name.includes(this.volumeSection!);\n          }\n          this.layerMesh[name] = mesh;\n        });\n\n        this.scene!.add(obj);\n        this.group = obj;\n        resolve();\n      });\n    });\n  }\n\n  private alignCamera() {\n    const boundingBox = new Box3().setFromObject(this.group!);\n\n    const centerVec = new Vector3();\n    boundingBox.getCenter(centerVec);\n\n    const sizeVec = new Vector3();\n    boundingBox.getSize(sizeVec);\n\n    const size = sizeVec.x;\n\n    this.camera!.position.z = centerVec.z;\n    this.camera!.position.y = centerVec.y;\n\n    const distance = size / Math.tan(Math.PI * this.camera!.fov / 360) * 1.15;\n\n    this.camera!.position.x = centerVec.x - distance;\n    this.controls!.target = centerVec;\n\n    this.controls!.update();\n  }\n\n  private startRenderLoop() {\n    if (this.ctrl.stopped) return;\n\n    if (!this.renderer || !this.scene || !this.camera || !this.controls) {\n      console.warn('Renderer, scene, camera, or controls not initialized. Stopping render loop.');\n      return;\n    }\n\n    if (this.ctrl.render) {\n      this.controls.update();\n      this.renderer.render(this.scene, this.camera);\n    }\n\n    requestAnimationFrame(this.startRenderLoop.bind(this));\n  }\n}","import React, { useRef, useEffect, useState } from 'react';\nimport { FullScreen, useFullScreenHandle } from 'react-full-screen';\nimport { FullscreenOutlined, FullscreenExitOutlined, SettingOutlined, CameraOutlined } from '@ant-design/icons';\nimport { Button, Checkbox, Drawer, Tooltip, Spin } from 'antd';\n\nimport { Layer, VolumeSection } from '@/types';\nimport { graphTheme, layers } from '@/constants';\n\nimport RegionViewer from './region-viewer';\n\nimport styles from './volume-viewer.module.scss';\n\nexport type RegionViewerProps = {\n  meshPath: string;\n  volumeSection: VolumeSection;\n  onReady?: () => void;\n};\n\nconst defaultLayerVisibilityState: Record<Layer, boolean> = layers.reduce((acc, layer) => {\n  acc[layer] = true;\n  return acc;\n}, {} as Record<Layer, boolean>);\n\n// Check if fullscreen is available\nconst isFullscreenAvailable = typeof document !== 'undefined' && (document.fullscreenEnabled || document['webkitFullscreenEnabled']);\n\nconst RegionViewerComponent: React.FC<RegionViewerProps> = ({ meshPath, volumeSection, onReady }) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [volumeViewer, setRegionViewer] = useState<RegionViewer | null>(null);\n  const [settingDrawerVisible, setSettingDrawerVisible] = useState(false);\n  const fullscreenHandle = useFullScreenHandle();\n\n  const [layerVisibilityState, setLayerVisibilityState] = useState(defaultLayerVisibilityState);\n  const [regionMaskVisible, setRegionMaskVisible] = useState(true);\n  const [isInitializing, setIsInitializing] = useState(true);\n  const [isViewerReady, setIsViewerReady] = useState(false);\n\n  const updateLayerVisibility = (newState: Partial<Record<Layer, boolean>>) => {\n    const updatedState = { ...layerVisibilityState, ...newState };\n    setLayerVisibilityState(updatedState);\n    volumeViewer?.setLayerVisibility(updatedState);\n  };\n\n  const updateRegionMaskVisibility = (visible: boolean) => {\n    setRegionMaskVisible(visible);\n    // Assuming the RegionViewer has a method to update the region mask visibility\n    // If not, we might need to handle this differently\n    //volumeViewer?.updateRegionMaskVisibility?.(visible);\n  };\n\n  const toggleFullscreen = () => {\n    if (fullscreenHandle.active) {\n      fullscreenHandle.exit();\n    } else {\n      fullscreenHandle.enter();\n    }\n  };\n\n  const downloadRender = () => {\n    const imageName = `volume_render_CA1_${volumeSection}`;\n    volumeViewer?.downloadRender(imageName);\n  };\n\n  useEffect(() => {\n    if (!meshPath || !containerRef.current) return;\n\n    const containerNode = containerRef.current;\n    const viewer = new RegionViewer(containerNode);\n    setRegionViewer(viewer);\n\n    viewer.init(meshPath, volumeSection)\n      .then(() => {\n        setRegionViewer(viewer);\n        setIsInitializing(false);\n        // Add a small delay before setting the viewer as ready\n        setTimeout(() => {\n          setIsViewerReady(true);\n          onReady?.();\n        }, 100);\n      })\n      .catch(error => {\n        console.error('Error initializing RegionViewer:', error);\n        setIsInitializing(false);\n      });\n\n    return () => {\n      viewer.destroy();\n    };\n  }, [meshPath, volumeSection, onReady]);\n\n  useEffect(() => {\n    volumeViewer?.setVolumeSection(volumeSection, layerVisibilityState);\n  }, [volumeViewer, volumeSection, layerVisibilityState]);\n\n  return (\n    <div>\n      <FullScreen\n        className={fullscreenHandle.active ? undefined : styles.fixedAspectRatio}\n        handle={fullscreenHandle}\n      >\n        <div className={styles.container} ref={containerRef}>\n          {(isInitializing || !isViewerReady) && (\n            <div className={styles.loadingOverlay}>\n              <Spin tip=\"Loading...\" size=\"large\" style={{ color: graphTheme.blue }} />\n            </div>\n          )}\n          <Tooltip title=\"Viewer settings\">\n            <Button\n              className={styles.settingBtn}\n              size=\"small\"\n              onClick={() => setSettingDrawerVisible(true)}\n              icon={<SettingOutlined />}\n            />\n          </Tooltip>\n\n          <div className={styles.topRightCtrlGroup}>\n            <Tooltip title=\"Download render as a PNG\">\n              <Button\n                size=\"small\"\n                onClick={downloadRender}\n                icon={<CameraOutlined />}\n              />\n            </Tooltip>\n            {isFullscreenAvailable && (\n              <Tooltip title=\"Fullscreen\">\n                <Button\n                  size=\"small\"\n                  className=\"ml-1\"\n                  onClick={toggleFullscreen}\n                  icon={fullscreenHandle.active ? <FullscreenExitOutlined /> : <FullscreenOutlined />}\n                />\n              </Tooltip>\n            )}\n          </div>\n\n          <Drawer\n            title=\"Viewer settings\"\n            placement=\"left\"\n            closable={true}\n            width={240}\n            onClose={() => setSettingDrawerVisible(false)}\n            open={settingDrawerVisible}\n            getContainer={false}\n            style={{ position: 'absolute' }}\n          >\n            <div>\n              <Checkbox\n                className={styles.coloredCheckbox}\n                style={{ '--checkbox-color': \"black\" } as React.CSSProperties}\n                checked={regionMaskVisible}\n                onChange={(e) => updateRegionMaskVisibility(e.target.checked)}\n              >\n                CA1 region mask\n              </Checkbox>\n            </div>\n\n            <h4 className=\"mt-2\">Layers</h4>\n\n            {layers.map(layer => (\n              <div className=\"mt-1\" key={layer}>\n                <Checkbox\n                  className={styles.coloredCheckbox}\n                  style={{ '--checkbox-color': \"black\" } as React.CSSProperties}\n                  checked={layerVisibilityState[layer]}\n                  onChange={(e) => updateLayerVisibility({ [layer]: e.target.checked })}\n                >\n                  {layer}\n                </Checkbox>\n              </div>\n            ))}\n          </Drawer>\n        </div>\n      </FullScreen>\n    </div>\n  );\n};\n\nexport default RegionViewerComponent;\n","import React, { useState } from 'react';\nimport { Row, Col, Spin } from 'antd';\nimport { useRouter } from 'next/router';\n\nimport Filters from '@/layouts/Filters';\nimport { regionFactsheetPath } from '@/queries/http';\nimport HttpDownloadButton from '@/components/HttpDownloadButton';\nimport Factsheet from '@/components/Factsheet';\nimport HttpData from '@/components/HttpData';\nimport StickyContainer from '@/components/StickyContainer';\nimport Title from '@/components/Title';\nimport InfoBox from '@/components/InfoBox';\nimport DataContainer from '@/components/DataContainer';\nimport Collapsible from '@/components/Collapsible';\nimport { VolumeSection, QuickSelectorEntry } from '@/types';\nimport { defaultSelection, volumeSections } from '@/constants';\nimport withPreselection from '@/hoc/with-preselection';\nimport withQuickSelector from '@/hoc/with-quick-selector';\n\nimport { basePath, dataPath } from '@/config';\n\nimport RegionViewer from './region/region-viewer/RegionViewer';\nimport VolumeSectionSelector3D from '@/components/VolumeSectionSelector3D';\nimport DownloadButton from '@/components/DownloadButton';\nimport { downloadAsJson } from '@/utils';\n\nconst RegionView: React.FC = () => {\n  const router = useRouter();\n  const theme = 3;\n  const { volume_section: volumeSection } = router.query as { volume_section: VolumeSection | undefined };\n\n  const [isViewerReady, setIsViewerReady] = useState(false);\n\n  const setVolumeSectionQuery = (volumeSection: VolumeSection) => {\n    const query = { volume_section: volumeSection };\n    router.push({ query }, undefined, { shallow: true });\n  };\n\n  const qsEntries: QuickSelectorEntry[] = [{\n    title: 'Volume section',\n    key: 'volume_section',\n    values: volumeSections,\n    setFn: setVolumeSectionQuery,\n  }];\n\n  const validVolumeSection: VolumeSection = volumeSection ?? defaultSelection.digitalReconstruction.region.volume_section as VolumeSection;\n\n  if (!validVolumeSection) {\n    return null; // Or handle this case appropriately\n  }\n\n  const getVolumeDescription = (section: VolumeSection) => {\n    switch (section) {\n      case 'region':\n        return \"Region CA1.\"\n      case 'cylinder':\n        return \"Cylindrical subvolume of radius 300 um from the dorsal CA1.\"\n      case 'slice':\n        return \"Coronal slice of 400 um from the dorsal CA1.\"\n      default:\n        return '';\n    }\n  };\n\n  return (\n    <>\n      <Filters theme={theme} hasData={true}>\n        <div className=\"flex flex-col lg:flex-row w-full lg:items-center mt-40 lg:mt-0\">\n          <div className=\"w-full lg:w-1/2 md:w-full md:flex-none mb-8 md:mb-8 lg:pr-0\">\n            <StickyContainer>\n              <Title\n                title=\"Region\"\n                subtitle=\"Digital Reconstructions\"\n                theme={theme}\n              />\n              <div role=\"information\">\n                <InfoBox>\n                  <p>\n                    Reconstruction data are combined to produce an instance of the CA1 network model.\n                  </p>\n                </InfoBox>\n              </div>\n            </StickyContainer>\n          </div>\n\n          <div className=\"flex flex-col-reverse md:flex-row-reverse gap-8 mb-12 md:mb-0 mx-8 md:mx-0 lg:w-1/2 md:w-full flex-grow md:flex-none justify-center\">\n            <div className={`selector__column selector__column--lg theme-${theme} w-full`}>\n              <div className={`selector__head theme-${theme}`}>Choose a layer</div>\n              <div className=\"selector__body\">\n                <VolumeSectionSelector3D\n                  value={volumeSection}\n                  onSelect={setVolumeSectionQuery}\n                  theme={theme}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Filters>\n\n      <DataContainer theme={theme}\n        visible={!!volumeSection}\n        navItems={[\n          { id: 'ViewerSection', label: \"Viewer\" },\n          { id: 'factsheetSection', label: \"Factsheet\" },\n        ]}\n        quickSelectorEntries={qsEntries}\n      >\n        <Collapsible id='viewerSection' title={'Viewer'} properties={[volumeSection]}>\n          <h3>{getVolumeDescription(validVolumeSection)}</h3>\n          <div className=\"text-base mb-2\">The image shows soma positions.</div>\n\n          <div className=\"graph no-padding\">\n            <RegionViewer\n              meshPath={`${dataPath}/3d/3_digital-reconstruction/region/region.obj`}\n              volumeSection={validVolumeSection}\n              onReady={() => setIsViewerReady(true)} />\n          </div>\n        </Collapsible>\n\n        <Collapsible id=\"factsheetSection\" title=\"Factsheet\">\n          {validVolumeSection && (\n            <HttpData path={`${dataPath}/3_digital-reconstruction/region/${volumeSection}/factsheet.json`}>\n              {(data, loading) => (\n                <Spin spinning={loading}>\n                  {data && (\n                    <>\n                      <h3 className=\"mt-2\">Neuronal anatomy</h3>\n                      <Factsheet facts={data.neuronalAnatomy} />\n\n                      <h3 className=\"mt-3\">Neuronal physiology</h3>\n                      <Factsheet facts={data.neuronalPhysiology} />\n\n                      <h3 className=\"mt-3\">Synaptic anatomy</h3>\n                      <Factsheet facts={data.synapticAnatomy} />\n\n                      <h3 className=\"mt-3\">Synaptic physiology</h3>\n                      <Factsheet facts={data.synapticPhysiology} />\n\n                      <h3 className=\"mt-3\">Network anatomy</h3>\n                      <Factsheet facts={data.networkAnatomy} />\n\n                      <h3 className=\"mt-3\">Schaffer collaterals</h3>\n                      <Factsheet facts={data.schafferCollaterals} />\n\n                      <div className=\"mt-4\">\n                        <DownloadButton\n                          theme={theme} onClick={() => downloadAsJson(data, `region-factsheet.json`)} >\n                          Factsheet\n                        </DownloadButton>\n                      </div>\n                    </>\n                  )}\n                </Spin>\n              )}\n            </HttpData>\n          )}\n        </Collapsible>\n      </DataContainer>\n    </>\n  );\n};\n\nexport default withPreselection(\n  RegionView,\n  {\n    key: 'volume_section',\n    defaultQuery: defaultSelection.digitalReconstruction.region,\n  },\n);\n","import Head from 'next/head';\nimport RegionView from '@/views/3_digital-reconstructions/Region';\n\nexport default function DigRecRegionPage() {\n  const metadata = {\n    title: 'Region | Digital Reconstructions | The Hippocampus Hub',\n    description:\n      'Examine the reconstructed digital model of the CA1 region in the hippocampus. Analyze the neuronal populations, layers, and connectivity patterns that shape this vital hippocampal region.',\n    keywords: [\n      'CA1 Region',\n      'Hippocampus',\n      'Digital Reconstructions',\n      'Neuronal Populations',\n      'Neuroscience',\n      'Blue Brain Project',\n    ],\n    author: 'Blue Brain Project',\n    creator: 'EPFL Blue Brain Project',\n    publisher: 'The Hippocampus Hub',\n  };\n\n  return (\n    <>\n      <Head>\n        <title>{metadata.title}</title>\n        <meta name=\"description\" content={metadata.description} />\n        <meta name=\"keywords\" content={metadata.keywords.join(', ')} />\n        <meta name=\"author\" content={metadata.author} />\n        <meta name=\"creator\" content={metadata.creator} />\n        <meta name=\"publisher\" content={metadata.publisher} />\n      </Head>\n\n      <RegionView />\n    </>\n  );\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fixedAspectRatio\":\"volume-viewer_fixedAspectRatio___KBBO\",\"container\":\"volume-viewer_container__nRG_R\",\"coloredCheckbox\":\"volume-viewer_coloredCheckbox__jgdoh\",\"coloredBox\":\"volume-viewer_coloredBox__wXD2L\",\"settingBtn\":\"volume-viewer_settingBtn__4TWJe\",\"fullscreenBtn\":\"volume-viewer_fullscreenBtn__1Gzz1\",\"config\":\"volume-viewer_config__BWQi8\",\"legend\":\"volume-viewer_legend__U7qKT\",\"topRightCtrlGroup\":\"volume-viewer_topRightCtrlGroup__lFqHL\",\"legendDivider\":\"volume-viewer_legendDivider__zkaFA\",\"loadingOverlay\":\"volume-viewer_loadingOverlay__xhUEL\",\"loadingContent\":\"volume-viewer_loadingContent__88aPA\"};","var key = {\r\n    fullscreenEnabled: 0,\r\n    fullscreenElement: 1,\r\n    requestFullscreen: 2,\r\n    exitFullscreen: 3,\r\n    fullscreenchange: 4,\r\n    fullscreenerror: 5,\r\n    fullscreen: 6\r\n};\r\nvar webkit = [\r\n    'webkitFullscreenEnabled',\r\n    'webkitFullscreenElement',\r\n    'webkitRequestFullscreen',\r\n    'webkitExitFullscreen',\r\n    'webkitfullscreenchange',\r\n    'webkitfullscreenerror',\r\n    '-webkit-full-screen',\r\n];\r\nvar moz = [\r\n    'mozFullScreenEnabled',\r\n    'mozFullScreenElement',\r\n    'mozRequestFullScreen',\r\n    'mozCancelFullScreen',\r\n    'mozfullscreenchange',\r\n    'mozfullscreenerror',\r\n    '-moz-full-screen',\r\n];\r\nvar ms = [\r\n    'msFullscreenEnabled',\r\n    'msFullscreenElement',\r\n    'msRequestFullscreen',\r\n    'msExitFullscreen',\r\n    'MSFullscreenChange',\r\n    'MSFullscreenError',\r\n    '-ms-fullscreen',\r\n];\r\n// so it doesn't throw if no window or document\r\nvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\r\nvar vendor = (('fullscreenEnabled' in document && Object.keys(key)) ||\r\n    (webkit[0] in document && webkit) ||\r\n    (moz[0] in document && moz) ||\r\n    (ms[0] in document && ms) ||\r\n    []);\r\nvar fscreen = {\r\n    requestFullscreen: function (element) { return element[vendor[key.requestFullscreen]](); },\r\n    requestFullscreenFunction: function (element) { return element[vendor[key.requestFullscreen]]; },\r\n    get exitFullscreen() { return document[vendor[key.exitFullscreen]].bind(document); },\r\n    get fullscreenPseudoClass() { return \":\" + vendor[key.fullscreen]; },\r\n    addEventListener: function (type, handler, options) { return document.addEventListener(vendor[key[type]], handler, options); },\r\n    removeEventListener: function (type, handler, options) { return document.removeEventListener(vendor[key[type]], handler, options); },\r\n    get fullscreenEnabled() { return Boolean(document[vendor[key.fullscreenEnabled]]); },\r\n    set fullscreenEnabled(val) { },\r\n    get fullscreenElement() { return document[vendor[key.fullscreenElement]]; },\r\n    set fullscreenElement(val) { },\r\n    get onfullscreenchange() { return document[(\"on\" + vendor[key.fullscreenchange]).toLowerCase()]; },\r\n    set onfullscreenchange(handler) { return document[(\"on\" + vendor[key.fullscreenchange]).toLowerCase()] = handler; },\r\n    get onfullscreenerror() { return document[(\"on\" + vendor[key.fullscreenerror]).toLowerCase()]; },\r\n    set onfullscreenerror(handler) { return document[(\"on\" + vendor[key.fullscreenerror]).toLowerCase()] = handler; },\r\n};\n\nexport default fscreen;\n//# sourceMappingURL=fscreen.esm.js.map\n","import React, { useState, useRef, useEffect, useCallback, useMemo } from 'react';\nimport fscreen from 'fscreen';\n\nfunction useFullScreenHandle() {\n  var _useState = useState(false),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var node = useRef(null);\n  useEffect(function () {\n    var handleChange = function handleChange() {\n      setActive(fscreen.fullscreenElement === node.current);\n    };\n\n    fscreen.addEventListener('fullscreenchange', handleChange);\n    return function () {\n      return fscreen.removeEventListener('fullscreenchange', handleChange);\n    };\n  }, []);\n  var enter = useCallback(function () {\n    if (fscreen.fullscreenElement) {\n      return fscreen.exitFullscreen().then(function () {\n        return fscreen.requestFullscreen(node.current);\n      });\n    } else if (node.current) {\n      return fscreen.requestFullscreen(node.current);\n    }\n  }, []);\n  var exit = useCallback(function () {\n    if (fscreen.fullscreenElement === node.current) {\n      return fscreen.exitFullscreen();\n    }\n\n    return Promise.resolve();\n  }, []);\n  return useMemo(function () {\n    return {\n      active: active,\n      enter: enter,\n      exit: exit,\n      node: node\n    };\n  }, [active, enter, exit]);\n}\nvar FullScreen = function FullScreen(_ref) {\n  var handle = _ref.handle,\n      onChange = _ref.onChange,\n      children = _ref.children,\n      className = _ref.className;\n  var classNames = [];\n\n  if (className) {\n    classNames.push(className);\n  }\n\n  classNames.push('fullscreen');\n\n  if (handle.active) {\n    classNames.push('fullscreen-enabled');\n  }\n\n  useEffect(function () {\n    if (onChange) {\n      onChange(handle.active, handle);\n    }\n  }, [handle.active]);\n  return React.createElement(\"div\", {\n    className: classNames.join(' '),\n    ref: handle.node,\n    style: handle.active ? {\n      height: '100%',\n      width: '100%'\n    } : undefined\n  }, children);\n};\n\nexport { FullScreen, useFullScreenHandle };\n//# sourceMappingURL=index.modern.js.map\n"],"names":["Object","defineProperty","exports","value","_interopRequireDefault","__webpack_require__","_typeof","Z","_objectSpread2","React","_interopRequireWildcard","e","r","__esModule","default","t","_getRequireWildcardCache","has","get","n","__proto__","a","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_CameraOutlined","_AntdIcon","WeakMap","RefIcon","forwardRef","props","ref","createElement","icon","_FullscreenExitOutlined","_FullscreenOutlined","window","__NEXT_P","push","RendererCtrl","render","stopped","countinuousRenderCounter","stopTime","now","Date","once","renderOnce","renderFor","time","renderUntilStopped","stop","parseCssColor","colorStr","parseInt","replace","VolumeViewer","init","meshPath","volumeSection","initCanvas","initRenderer","initScene","initCamera","initControls","initEvents","initObservers","initMaterials","initMeshes","alignCamera","ctrl","startRenderLoop","error","resize","clientWidth","clientHeight","container","camera","aspect","updateProjectionMatrix","renderer","setSize","setVolumeSection","visibility","entries","layerMesh","forEach","meshName","mesh","param","visible","layerType","setLayerVisibility","layer","meshKey","concat","downloadRender","filename","domElement","parentElement","WebGLRenderer","antialias","alpha","preserveDrawingBuffer","physicallyCorrectColors","scene","toBlob","blob","saveAs","dispose","destroy","values","material","geometry","removeEventListener","onUserInteract","resizeObserver","unobserve","controls","canvas","removeChild","document","appendChild","setPixelRatio","devicePixelRatio","Scene","background","Color","add","AmbientLight","PerspectiveCamera","PointLight","TrackballControls","enableDamping","zoomSpeed","rotateSpeed","maxDistance","params","capture","passive","throttle","bind","addEventListener","ResizeObserver","setTimeout","observe","region","MeshLambertMaterial","color","wireframe","transparent","opacity","neurons","cylinder","slice","loader","OBJLoader","Promise","load","obj","traverse","isMesh","name","includes","group","resolve","boundingBox","Box3","setFromObject","centerVec","Vector3","getCenter","sizeVec","getSize","size","x","position","z","y","distance","Math","tan","PI","fov","target","update","console","warn","requestAnimationFrame","constructor","defaultLayerVisibilityState","layers","reduce","acc","isFullscreenAvailable","fullscreenEnabled","RegionViewer","onReady","containerRef","useRef","volumeViewer","setRegionViewer","useState","settingDrawerVisible","setSettingDrawerVisible","fullscreenHandle","useFullScreenHandle","layerVisibilityState","setLayerVisibilityState","regionMaskVisible","setRegionMaskVisible","isInitializing","setIsInitializing","isViewerReady","setIsViewerReady","updateLayerVisibility","updatedState","newState","updateRegionMaskVisibility","useEffect","current","containerNode","viewer","then","catch","jsx_runtime","jsx","div","FullScreen","className","active","undefined","styles","handle","jsxs","Spin","tip","style","graphTheme","blue","Tooltip","title","Button","onClick","SettingOutlined","imageName","CameraOutlined","exit","enter","FullscreenExitOutlined","FullscreenOutlined","Drawer","placement","closable","width","onClose","open","getContainer","Checkbox","checked","onChange","h4","map","Region","withPreselection","router","useRouter","volume_section","query","setVolumeSectionQuery","shallow","qsEntries","key","volumeSections","setFn","validVolumeSection","defaultSelection","digitalReconstruction","Fragment","Filters","theme","hasData","StickyContainer","Title","subtitle","role","InfoBox","p","VolumeSectionSelector3D","onSelect","DataContainer","navItems","id","label","quickSelectorEntries","Collapsible","properties","h3","getVolumeDescription","section","dataPath","HttpData","path","data","loading","spinning","Factsheet","facts","neuronalAnatomy","neuronalPhysiology","synapticAnatomy","synapticPhysiology","networkAnatomy","schafferCollaterals","DownloadButton","downloadAsJson","defaultQuery","DigRecRegionPage","metadata","description","keywords","author","creator","publisher","Head","meta","content","join","RegionView","module","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror","fullscreen","fscreen_esm_document","vendor","keys","webkit","moz","ms","fscreen_esm","element","requestFullscreenFunction","fullscreenPseudoClass","type","handler","options","Boolean","val","onfullscreenchange","toLowerCase","onfullscreenerror","_useState","react","setActive","node","handleChange","useCallback","useMemo","_ref","children","classNames","height"],"sourceRoot":""}